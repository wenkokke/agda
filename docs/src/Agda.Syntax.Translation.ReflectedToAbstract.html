<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -fwarn-missing-signatures #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Syntax.Translation.ReflectedToAbstract</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-operator">(***)</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">foldM</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadError</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadReader</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">asks</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">reader</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runReaderT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Literal.html"><span class="hs-identifier">Agda.Syntax.Literal</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Info.html"><span class="hs-identifier">Agda.Syntax.Info</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier">QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier">QNamed</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier">QNamed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Concrete.Name.html#isNoName"><span class="hs-identifier">isNoName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier">nameConcrete</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#nextName"><span class="hs-identifier">nextName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#qualify"><span class="hs-identifier">qualify</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier">unambiguous</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pattern.html"><span class="hs-identifier">Agda.Syntax.Abstract.Pattern</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html"><span class="hs-identifier">Agda.Syntax.Reflected</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">R</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier">Dom</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom%27"><span class="hs-identifier">Dom'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.html"><span class="hs-identifier">Agda.Interaction.Options</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Options.Base.html#optUseUnicode"><span class="hs-identifier">optUseUnicode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Concrete.Glyph.html#UnicodeOrAscii"><span class="hs-identifier">UnicodeOrAscii</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MetaInfo"><span class="hs-identifier">MetaInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Scope.Monad.html"><span class="hs-identifier">Agda.Syntax.Scope.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Scope.Monad.html#getCurrentModule"><span class="hs-identifier">getCurrentModule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List1.html"><span class="hs-identifier">Agda.Utils.List1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.List1.html#List1"><span class="hs-identifier">List1</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Utils.List1.html"><span class="hs-identifier">Agda.Utils.List1</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List1</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html"><span class="hs-identifier">Agda.Syntax.Common.Pretty</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html"><span class="hs-identifier">Agda.Utils.Singleton</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">type</span><span> </span><span id="Vars"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#Vars"><span class="hs-identifier hs-var">Vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">type</span><span> </span><span id="MonadReflectedToAbstract"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-var">MonadReflectedToAbstract</span></a></span></span><span> </span><span id="local-6989586621681454229"><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#Vars"><span class="hs-identifier hs-type">Vars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NameId"><span class="hs-identifier hs-type">NameId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-type">HasOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454229"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- | Adds a new unique name to the current context.</span><span>
</span><span id="line-59"></span><span class="hs-comment">--   NOTE: See @chooseName@ in @Agda.Syntax.Translation.AbstractToConcrete@ for similar logic.</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   NOTE: See @freshConcreteName@ in @Agda.Syntax.Scope.Monad@ also for similar logic.</span><span>
</span><span id="line-61"></span><span id="local-6989586621681453866"><span id="local-6989586621681453869"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withName"><span class="hs-identifier hs-type">withName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453866"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453866"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453869"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453866"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453869"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-62"></span><span id="withName"><span class="annot"><span class="annottext">withName :: forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
String -&gt; (Name -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withName"><span class="hs-identifier hs-var hs-var">withName</span></a></span></span><span> </span><span id="local-6989586621681454233"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454233"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Type -&gt; (Name -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
String -&gt; Type -&gt; (Name -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVar"><span class="hs-identifier hs-var">withVar</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454233"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="Agda.Syntax.Reflected.html#Unknown"><span class="hs-identifier hs-var">R.Unknown</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span id="local-6989586621681453873"><span id="local-6989586621681453874"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVar"><span class="hs-identifier hs-type">withVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453874"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453874"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-65"></span><span id="withVar"><span class="annot"><span class="annottext">withVar :: forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
String -&gt; Type -&gt; (Name -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVar"><span class="hs-identifier hs-var hs-var">withVar</span></a></span></span><span> </span><span id="local-6989586621681454258"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454258"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681454259"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454259"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681454260"><span class="annot"><span class="annottext">Name -&gt; m a
</span><a href="#local-6989586621681454260"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621681454261"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454261"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Name
forall a (m :: * -&gt; *).
(FreshName a, MonadFresh NameId m) =&gt;
a -&gt; m Name
forall (m :: * -&gt; *). MonadFresh NameId m =&gt; String -&gt; m Name
</span><a href="Agda.TypeChecking.Monad.Base.html#freshName_"><span class="hs-identifier hs-var">freshName_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454258"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621681454263"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454263"><span class="hs-identifier hs-var">ctx</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(Name, Type)] -&gt; [Name]) -&gt; m [Name]
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">(([(Name, Type)] -&gt; [Name]) -&gt; m [Name])
-&gt; ([(Name, Type)] -&gt; [Name]) -&gt; m [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, Type) -&gt; Name) -&gt; [(Name, Type)] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(((Name, Type) -&gt; Name) -&gt; [(Name, Type)] -&gt; [Name])
-&gt; ((Name, Type) -&gt; Name) -&gt; [(Name, Type)] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier hs-var">nameConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; ((Name, Type) -&gt; Name) -&gt; (Name, Type) -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, Type) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621681454266"><span class="annot"><span class="annottext">UnicodeOrAscii
</span><a href="#local-6989586621681454266"><span class="hs-identifier hs-var">glyphMode</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PragmaOptions -&gt; UnicodeOrAscii
</span><a href="Agda.Interaction.Options.Base.html#optUseUnicode"><span class="hs-identifier hs-var">optUseUnicode</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; UnicodeOrAscii)
-&gt; m PragmaOptions -&gt; m UnicodeOrAscii
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">M.pragmaOptions</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454269"><span class="annot"><span class="annottext">freshNameMode :: FreshNameMode
</span><a href="#local-6989586621681454269"><span class="hs-identifier hs-var hs-var">freshNameMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnicodeOrAscii
</span><a href="#local-6989586621681454266"><span class="hs-identifier hs-var">glyphMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><span class="annottext">UnicodeOrAscii
</span><a href="Agda.Syntax.Concrete.Glyph.html#UnicodeOk"><span class="hs-identifier hs-var">UnicodeOk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreshNameMode
</span><a href="Agda.Syntax.Concrete.Name.html#UnicodeSubscript"><span class="hs-identifier hs-var">A.UnicodeSubscript</span></a></span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><span class="annottext">UnicodeOrAscii
</span><a href="Agda.Syntax.Concrete.Glyph.html#AsciiOnly"><span class="hs-identifier hs-var">AsciiOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreshNameMode
</span><a href="Agda.Syntax.Concrete.Name.html#AsciiCounter"><span class="hs-identifier hs-var">A.AsciiCounter</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454274"><span class="annot"><span class="annottext">name' :: Name
</span><a href="#local-6989586621681454274"><span class="hs-identifier hs-var hs-var">name'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; Name
forall a. a -&gt; [a] -&gt; a
</span><a href="Agda.Utils.List.html#headWithDefault"><span class="hs-identifier hs-var">headWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Name
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; Name) -&gt; [Name] -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; [Name]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; Name -&gt; Bool
forall {t :: * -&gt; *}. Foldable t =&gt; t Name -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681454277"><span class="hs-identifier hs-var">notTaken</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454263"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; [Name]) -&gt; [Name] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; Name -&gt; [Name]
forall a. (a -&gt; a) -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">iterate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreshNameMode -&gt; Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nextName"><span class="hs-identifier hs-var">nextName</span></a></span><span> </span><span class="annot"><span class="annottext">FreshNameMode
</span><a href="#local-6989586621681454269"><span class="hs-identifier hs-var">freshNameMode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454261"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><span class="annottext">([(Name, Type)] -&gt; [(Name, Type)]) -&gt; m a -&gt; m a
forall a. ([(Name, Type)] -&gt; [(Name, Type)]) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">local</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454261"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454259"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Name, Type) -&gt; [(Name, Type)] -&gt; [(Name, Type)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m a -&gt; m a) -&gt; m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m a
</span><a href="#local-6989586621681454260"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454274"><span class="hs-identifier hs-var">name'</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>    </span><span id="local-6989586621681454277"><span class="annot"><span class="annottext">notTaken :: t Name -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681454277"><span class="hs-identifier hs-var hs-var">notTaken</span></a></span></span><span> </span><span id="local-6989586621681454286"><span class="annot"><span class="annottext">t Name
</span><a href="#local-6989586621681454286"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621681454287"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454287"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
forall a. IsNoName a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Concrete.Name.html#isNoName"><span class="hs-identifier hs-var">isNoName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454287"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier hs-var">nameConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454287"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; t Name -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">t Name
</span><a href="#local-6989586621681454286"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span id="local-6989586621681453927"><span id="local-6989586621681453928"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withNames"><span class="hs-identifier hs-type">withNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453928"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453928"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-78"></span><span id="withNames"><span class="annot"><span class="annottext">withNames :: forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[String] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withNames"><span class="hs-identifier hs-var hs-var">withNames</span></a></span></span><span> </span><span id="local-6989586621681454293"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681454293"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-var">withVars</span></a></span><span> </span><span class="annot"><span class="annottext">([(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a)
-&gt; [(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [Type] -&gt; [(String, Type)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681454293"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="annot"><span class="annottext">([Type] -&gt; [(String, Type)]) -&gt; [Type] -&gt; [(String, Type)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="Agda.Syntax.Reflected.html#Unknown"><span class="hs-identifier hs-var">R.Unknown</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span id="local-6989586621681453931"><span id="local-6989586621681453932"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-type">withVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453931"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453931"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453932"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453931"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453932"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-81"></span><span id="withVars"><span class="annot"><span class="annottext">withVars :: forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-var hs-var">withVars</span></a></span></span><span> </span><span id="local-6989586621681454299"><span class="annot"><span class="annottext">[(String, Type)]
</span><a href="#local-6989586621681454299"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span id="local-6989586621681454300"><span class="annot"><span class="annottext">[Name] -&gt; m a
</span><a href="#local-6989586621681454300"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(String, Type)]
</span><a href="#local-6989586621681454299"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; m a
</span><a href="#local-6989586621681454300"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681454301"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454301"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681454302"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454302"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681454303"><span class="annot"><span class="annottext">[(String, Type)]
</span><a href="#local-6989586621681454303"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Type -&gt; (Name -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
String -&gt; Type -&gt; (Name -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVar"><span class="hs-identifier hs-var">withVar</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454301"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454302"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; m a) -&gt; m a) -&gt; (Name -&gt; m a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681454304"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454304"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-var">withVars</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, Type)]
</span><a href="#local-6989586621681454303"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="annot"><span class="annottext">(([Name] -&gt; m a) -&gt; m a) -&gt; ([Name] -&gt; m a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681454305"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454305"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; m a
</span><a href="#local-6989586621681454300"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454304"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454305"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><span class="hs-comment">-- | Returns the name and type of the variable with the given de Bruijn index.</span></span><span>
</span><span id="line-86"></span><span id="local-6989586621681453938"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askVar"><span class="hs-identifier hs-type">askVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453938"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453938"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-87"></span><span id="askVar"><span class="annot"><span class="annottext">askVar :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Maybe (Name, Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askVar"><span class="hs-identifier hs-var hs-var">askVar</span></a></span></span><span> </span><span id="local-6989586621681454310"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454310"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, Type)] -&gt; Maybe (Name, Type)) -&gt; m (Maybe (Name, Type))
forall a. ([(Name, Type)] -&gt; a) -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, Type)] -&gt; Int -&gt; Maybe (Name, Type)
forall a. [a] -&gt; Int -&gt; Maybe a
</span><a href="Agda.Utils.List.html#%21%21%21"><span class="hs-operator hs-var">!!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454310"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span id="local-6989586621681453942"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askName"><span class="hs-identifier hs-type">askName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-90"></span><span id="askName"><span class="annot"><span class="annottext">askName :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Maybe Name)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askName"><span class="hs-identifier hs-var hs-var">askName</span></a></span></span><span> </span><span id="local-6989586621681454320"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454320"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, Type) -&gt; Name) -&gt; Maybe (Name, Type) -&gt; Maybe Name
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Name, Type) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Name, Type) -&gt; Maybe Name)
-&gt; m (Maybe (Name, Type)) -&gt; m (Maybe Name)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; m (Maybe (Name, Type))
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Maybe (Name, Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askVar"><span class="hs-identifier hs-var">askVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454320"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">class</span><span> </span><span id="ToAbstract"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-var">ToAbstract</span></a></span></span><span> </span><span id="local-6989586621681453950"><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span id="local-6989586621681453950"><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-94"></span><span>  </span><span id="toAbstract"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-type">toAbstract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621681453961"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453961"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453961"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="toAbstract"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-type">toAbstract</span></a></span></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621681453947"><span id="local-6989586621681453948"><span id="local-6989586621681453952"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621681453947"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453948"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681453947"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453948"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681453947"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453948"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453952"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453952"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453950"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-99"></span><span>  </span><span id="local-6989586621681454323"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var">toAbstract</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; m (AbsOfRef s)) -&gt; t s -&gt; m (t (AbsOfRef s))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">s -&gt; m (AbsOfRef s)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
s -&gt; m (AbsOfRef s)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><span class="hs-comment">-- | Translate reflected syntax to abstract, using the names from the current typechecking context.</span></span><span>
</span><span id="line-102"></span><span id="local-6989586621681453962"><span id="local-6989586621681453963"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract_"><span class="hs-identifier hs-type">toAbstract_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453962"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NameId"><span class="hs-identifier hs-type">NameId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-type">HasOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453962"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681453963"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681453962"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-112"></span><span id="toAbstract_"><span class="annot"><span class="annottext">toAbstract_ :: forall r (m :: * -&gt; *).
(ToAbstract r, MonadFresh NameId m, MonadError TCErr m,
 MonadTCEnv m, ReadTCState m, HasOptions m, HasBuiltins m,
 HasConstInfo m) =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract_"><span class="hs-identifier hs-var hs-var">toAbstract_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (AbsOfRef r) -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(m (AbsOfRef r) -&gt; m (AbsOfRef r))
-&gt; (r -&gt; m (AbsOfRef r)) -&gt; r -&gt; m (AbsOfRef r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; m (AbsOfRef r)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadFresh NameId m, MonadError TCErr m,
 MonadTCEnv m, ReadTCState m, HasOptions m, HasBuiltins m,
 HasConstInfo m) =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstractWithoutImplicit"><span class="hs-identifier hs-var">toAbstractWithoutImplicit</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><span class="hs-comment">-- | Drop implicit arguments unless --show-implicit is on.</span></span><span>
</span><span id="line-115"></span><span id="local-6989586621681454362"><span id="local-6989586621681454363"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstractWithoutImplicit"><span class="hs-identifier hs-type">toAbstractWithoutImplicit</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454362"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NameId"><span class="hs-identifier hs-type">NameId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-type">HasOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454362"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454363"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454362"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-125"></span><span id="toAbstractWithoutImplicit"><span class="annot"><span class="annottext">toAbstractWithoutImplicit :: forall r (m :: * -&gt; *).
(ToAbstract r, MonadFresh NameId m, MonadError TCErr m,
 MonadTCEnv m, ReadTCState m, HasOptions m, HasBuiltins m,
 HasConstInfo m) =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstractWithoutImplicit"><span class="hs-identifier hs-var hs-var">toAbstractWithoutImplicit</span></a></span></span><span> </span><span id="local-6989586621681454402"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454402"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621681454403"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454403"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name]
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; [Name]) -&gt; m [Name] -&gt; m [Name]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m [Name]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Name]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextNames"><span class="hs-identifier hs-var">getContextNames</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454406"><span class="annot"><span class="annottext">ctx :: [(Name, Type)]
</span><a href="#local-6989586621681454406"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Type] -&gt; [(Name, Type)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454403"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">([Type] -&gt; [(Name, Type)]) -&gt; [Type] -&gt; [(Name, Type)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="Agda.Syntax.Reflected.html#Unknown"><span class="hs-identifier hs-var">R.Unknown</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><span class="annottext">ReaderT [(Name, Type)] m (AbsOfRef r)
-&gt; [(Name, Type)] -&gt; m (AbsOfRef r)
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">r -&gt; ReaderT [(Name, Type)] m (AbsOfRef r)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454402"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, Type)]
</span><a href="#local-6989586621681454406"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681454010"><span id="local-6989586621681454011"><span id="local-6989586621681454409"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454010"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454011"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454010"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454011"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454010"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454011"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454010"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681454014"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454014"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454014"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454014"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454014"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>  </span><span id="local-6989586621681454430"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Arg r -&gt; m (AbsOfRef (Arg r))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span id="local-6989586621681454432"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681454432"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681454433"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454433"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Named_ (AbsOfRef r) -&gt; Arg (Named_ (AbsOfRef r))
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681454432"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Named_ (AbsOfRef r) -&gt; Arg (Named_ (AbsOfRef r)))
-&gt; m (Named_ (AbsOfRef r)) -&gt; m (Arg (Named_ (AbsOfRef r)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Named NamedName r -&gt; m (AbsOfRef (Named NamedName r))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Named NamedName r -&gt; m (AbsOfRef (Named NamedName r))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">r -&gt; Named NamedName r
forall a name. a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#unnamed"><span class="hs-identifier hs-var">unnamed</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454433"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681454025"><span id="local-6989586621681454437"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454025"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454025"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">]</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454025"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454025"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- instance ToAbstract r A.Expr =&gt; ToAbstract (Dom r, Name) (A.TypedBinding) where</span><span>
</span><span id="line-141"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681454029"><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454029"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454029"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454029"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454029"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#TypedBinding"><span class="hs-identifier hs-type">A.TypedBinding</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span id="local-6989586621681454464"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Dom r, Name) -&gt; m (AbsOfRef (Dom r, Name))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681454467"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681454467"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">domIsFinite :: forall t e. Dom' t e -&gt; Bool
</span><a href="Agda.Syntax.Internal.html#domIsFinite"><span class="hs-identifier hs-var">domIsFinite</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681454469"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681454469"><span class="hs-identifier hs-var">isfin</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681454471"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454471"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">domTactic :: forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var">domTactic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681454473"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681454473"><span class="hs-identifier hs-var">tac</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454474"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454474"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621681454475"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454475"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">r -&gt; m (AbsOfRef r)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454471"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-comment">-- TODO(Amy): Anyone know why this discards the tactic? It was like</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-comment">-- that when I got here!</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="annottext">TypedBinding -&gt; m TypedBinding
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(TypedBinding -&gt; m TypedBinding) -&gt; TypedBinding -&gt; m TypedBinding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Range
-&gt; TypedBindingInfo
-&gt; List1 (NamedArg Binder)
-&gt; Expr
-&gt; TypedBinding
</span><a href="Agda.Syntax.Abstract.html#TBind"><span class="hs-identifier hs-var">A.TBind</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TacticAttribute -&gt; Bool -&gt; TypedBindingInfo
</span><a href="Agda.Syntax.Abstract.html#TypedBindingInfo"><span class="hs-identifier hs-var">A.TypedBindingInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TacticAttribute
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681454469"><span class="hs-identifier hs-var">isfin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg Binder -&gt; List1 (NamedArg Binder)
forall el coll. Singleton el coll =&gt; el -&gt; coll
</span><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedArg Binder -&gt; List1 (NamedArg Binder))
-&gt; NamedArg Binder -&gt; List1 (NamedArg Binder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Binder -&gt; NamedArg Binder
forall a. ArgInfo -&gt; a -&gt; NamedArg a
</span><a href="Agda.Syntax.Common.html#unnamedArg"><span class="hs-identifier hs-var">unnamedArg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681454467"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Binder -&gt; NamedArg Binder) -&gt; Binder -&gt; NamedArg Binder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Binder
</span><a href="Agda.Syntax.Abstract.html#mkBinder_"><span class="hs-identifier hs-var">A.mkBinder_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454474"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>      </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454475"><span class="hs-identifier hs-var">dom</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Elim"><span class="hs-identifier hs-type">Elim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Elim"><span class="hs-identifier hs-type">Elim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-154"></span><span>  </span><span id="local-6989586621681454500"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elim) -&gt; m (AbsOfRef (Expr, Elim))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681454501"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454501"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621681454503"><span class="annot"><span class="annottext">Arg Type
</span><a href="#local-6989586621681454503"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621681454504"><span class="annot"><span class="annottext">Arg (Named_ Expr)
</span><a href="#local-6989586621681454504"><span class="hs-identifier hs-var">arg</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; m (AbsOfRef (Arg Type))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Arg Type -&gt; m (AbsOfRef (Arg Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Type
</span><a href="#local-6989586621681454503"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621681454505"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681454505"><span class="hs-identifier hs-var">showImp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Bool
forall (m :: * -&gt; *). HasOptions m =&gt; m Bool
</span><a href="Agda.TypeChecking.Monad.Options.html#showImplicitArguments"><span class="hs-identifier hs-var">showImplicitArguments</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681454505"><span class="hs-identifier hs-var">showImp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ Expr) -&gt; Bool
forall a. LensHiding a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#visible"><span class="hs-identifier hs-var">visible</span></a></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ Expr)
</span><a href="#local-6989586621681454504"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-158"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">AppInfo -&gt; Expr -&gt; Arg (Named_ Expr) -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-var">A.App</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; AppInfo -&gt; AppInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Reflected"><span class="hs-identifier hs-var">Reflected</span></a></span><span> </span><span class="annot"><span class="annottext">AppInfo
</span><a href="Agda.Syntax.Info.html#defaultAppInfo_"><span class="hs-identifier hs-var">defaultAppInfo_</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454501"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ Expr)
</span><a href="#local-6989586621681454504"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-159"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454501"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621681454521"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681454522"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454522"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454523"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454523"><span class="hs-identifier hs-var">elims</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Elim -&gt; m Expr) -&gt; Expr -&gt; Elims -&gt; m Expr
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Expr, Elim) -&gt; m Expr) -&gt; Expr -&gt; Elim -&gt; m Expr
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(Expr, Elim) -&gt; m Expr
(Expr, Elim) -&gt; m (AbsOfRef (Expr, Elim))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elim) -&gt; m (AbsOfRef (Expr, Elim))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454522"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454523"><span class="hs-identifier hs-var">elims</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681454079"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454079"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Abs"><span class="hs-identifier hs-type">R.Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454079"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Abs"><span class="hs-identifier hs-type">R.Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454079"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-type">AbsOfRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454079"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>  </span><span id="local-6989586621681454540"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Abs r -&gt; m (AbsOfRef (Abs r))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621681454542"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454542"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681454543"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454543"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Name -&gt; m (AbsOfRef (Abs r))) -&gt; m (AbsOfRef (Abs r))
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
String -&gt; (Name -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withName"><span class="hs-identifier hs-var">withName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454544"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; m (AbsOfRef (Abs r))) -&gt; m (AbsOfRef (Abs r)))
-&gt; (Name -&gt; m (AbsOfRef (Abs r))) -&gt; m (AbsOfRef (Abs r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681454545"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454545"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454545"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AbsOfRef r -&gt; (AbsOfRef r, Name))
-&gt; m (AbsOfRef r) -&gt; m (AbsOfRef r, Name)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; m (AbsOfRef r)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
r -&gt; m (AbsOfRef r)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621681454543"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681454544"><span class="annot"><span class="annottext">s' :: String
</span><a href="#local-6989586621681454544"><span class="hs-identifier hs-var hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. IsNoName a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Concrete.Name.html#isNoName"><span class="hs-identifier hs-var">isNoName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454542"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;z&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681454542"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-comment">-- TODO: only do this when var is free</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span id="local-6989586621681454554"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Literal -&gt; m (AbsOfRef Literal)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span id="local-6989586621681454555"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454555"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; Literal -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Lit"><span class="hs-identifier hs-var">A.Lit</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454555"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span id="local-6989586621681454623"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Var"><span class="hs-identifier hs-type">R.Var</span></a></span><span> </span><span id="local-6989586621681454625"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454625"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681454626"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454626"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-178"></span><span>      </span><span id="local-6989586621681454627"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454627"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; m Name
forall (m :: * -&gt; *). MonadReflectedToAbstract m =&gt; Int -&gt; m Name
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVarName"><span class="hs-identifier hs-var">mkVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454625"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><span class="annottext">(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Var"><span class="hs-identifier hs-var">A.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454627"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454626"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Con"><span class="hs-identifier hs-type">R.Con</span></a></span><span> </span><span id="local-6989586621681454631"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454631"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681454632"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454632"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AmbiguousQName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Con"><span class="hs-identifier hs-var">A.Con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; AmbiguousQName
</span><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier hs-var">unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; AmbiguousQName) -&gt; QName -&gt; AmbiguousQName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KillRangeT QName
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454631"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454632"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Def"><span class="hs-identifier hs-type">R.Def</span></a></span><span> </span><span id="local-6989586621681454635"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454635"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681454636"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454636"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-182"></span><span>      </span><span id="local-6989586621681454637"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454637"><span class="hs-identifier hs-var">af</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Expr
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkDef"><span class="hs-identifier hs-var">mkDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KillRangeT QName
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454635"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>      </span><span class="annot"><span class="annottext">(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454637"><span class="hs-identifier hs-var">af</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454636"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Lam"><span class="hs-identifier hs-type">R.Lam</span></a></span><span> </span><span id="local-6989586621681454640"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681454640"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681454641"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681454641"><span class="hs-identifier hs-var">t</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681454642"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454642"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454643"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454643"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; m (AbsOfRef (Abs Type))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Abs Type -&gt; m (AbsOfRef (Abs Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681454641"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454644"><span class="annot"><span class="annottext">info :: ArgInfo
</span><a href="#local-6989586621681454644"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo -&gt; ArgInfo
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681454640"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo) -&gt; ArgInfo -&gt; ArgInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Reflected"><span class="hs-identifier hs-var">Reflected</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="Agda.Syntax.Common.html#defaultArgInfo"><span class="hs-identifier hs-var">defaultArgInfo</span></a></span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; LamBinding -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-var">A.Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="Agda.Syntax.Info.html#exprNoRange"><span class="hs-identifier hs-var">exprNoRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg Binder -&gt; LamBinding
</span><a href="Agda.Syntax.Abstract.html#mkDomainFree"><span class="hs-identifier hs-var">A.mkDomainFree</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedArg Binder -&gt; LamBinding) -&gt; NamedArg Binder -&gt; LamBinding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Binder -&gt; NamedArg Binder
forall a. ArgInfo -&gt; a -&gt; NamedArg a
</span><a href="Agda.Syntax.Common.html#unnamedArg"><span class="hs-identifier hs-var">unnamedArg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681454644"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">(Binder -&gt; NamedArg Binder) -&gt; Binder -&gt; NamedArg Binder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Binder
</span><a href="Agda.Syntax.Abstract.html#mkBinder_"><span class="hs-identifier hs-var">A.mkBinder_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454643"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454642"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#ExtLam"><span class="hs-identifier hs-type">R.ExtLam</span></a></span><span> </span><span id="local-6989586621681454651"><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621681454651"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621681454652"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454652"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-189"></span><span>      </span><span id="local-6989586621681454653"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454653"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Name
forall a (m :: * -&gt; *).
(FreshName a, MonadFresh NameId m) =&gt;
a -&gt; m Name
forall (m :: * -&gt; *). MonadFresh NameId m =&gt; String -&gt; m Name
</span><a href="Agda.TypeChecking.Monad.Base.html#freshName_"><span class="hs-identifier hs-var">freshName_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Agda.TypeChecking.Monad.Base.html#extendedLambdaName"><span class="hs-identifier hs-var">extendedLambdaName</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span id="local-6989586621681454655"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681454655"><span class="hs-identifier hs-var">m</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m ModuleName
forall (m :: * -&gt; *). ReadTCState m =&gt; m ModuleName
</span><a href="Agda.Syntax.Scope.Monad.html#getCurrentModule"><span class="hs-identifier hs-var">getCurrentModule</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454656"><span class="annot"><span class="annottext">qname :: QName
</span><a href="#local-6989586621681454656"><span class="hs-identifier hs-var hs-var">qname</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Name -&gt; QName
</span><a href="Agda.Syntax.Abstract.Name.html#qualify"><span class="hs-identifier hs-var">qualify</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681454655"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454653"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-192"></span><span>          </span><span id="local-6989586621681454657"><span class="annot"><span class="annottext">cname :: Name
</span><a href="#local-6989586621681454657"><span class="hs-identifier hs-var hs-var">cname</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier hs-var">nameConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454653"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-193"></span><span>          </span><span id="local-6989586621681454658"><span class="annot"><span class="annottext">defInfo :: DefInfo' Expr
</span><a href="#local-6989586621681454658"><span class="hs-identifier hs-var hs-var">defInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Fixity' -&gt; Access -&gt; IsAbstract -&gt; Range -&gt; DefInfo' Expr
forall t.
Name -&gt; Fixity' -&gt; Access -&gt; IsAbstract -&gt; Range -&gt; DefInfo' t
</span><a href="Agda.Syntax.Info.html#mkDefInfo"><span class="hs-identifier hs-var">mkDefInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454657"><span class="hs-identifier hs-var">cname</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity'
</span><a href="Agda.Syntax.Common.html#noFixity%27"><span class="hs-identifier hs-var">noFixity'</span></a></span><span> </span><span class="annot"><span class="annottext">Access
</span><a href="Agda.Syntax.Common.html#PublicAccess"><span class="hs-identifier hs-var">PublicAccess</span></a></span><span> </span><span class="annot"><span class="annottext">IsAbstract
</span><a href="Agda.Syntax.Common.html#ConcreteDef"><span class="hs-identifier hs-var">ConcreteDef</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-194"></span><span>      </span><span id="local-6989586621681454663"><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621681454663"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (QNamed Clause) -&gt; m (AbsOfRef (NonEmpty (QNamed Clause)))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
NonEmpty (QNamed Clause) -&gt; m (AbsOfRef (NonEmpty (QNamed Clause)))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (QNamed Clause)
 -&gt; m (AbsOfRef (NonEmpty (QNamed Clause))))
-&gt; NonEmpty (QNamed Clause)
-&gt; m (AbsOfRef (NonEmpty (QNamed Clause)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; QNamed Clause)
-&gt; List1 Clause -&gt; NonEmpty (QNamed Clause)
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454656"><span class="hs-identifier hs-var">qname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621681454651"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><span class="annottext">(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExprInfo
-&gt; DefInfo' Expr -&gt; Erased -&gt; QName -&gt; List1 Clause -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#ExtendedLam"><span class="hs-identifier hs-var">A.ExtendedLam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="Agda.Syntax.Info.html#exprNoRange"><span class="hs-identifier hs-var">exprNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">DefInfo' Expr
</span><a href="#local-6989586621681454658"><span class="hs-identifier hs-var">defInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Erased
</span><a href="Agda.Syntax.Common.html#defaultErased"><span class="hs-identifier hs-var">defaultErased</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454656"><span class="hs-identifier hs-var">qname</span></a></span><span> </span><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621681454663"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454652"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Pi"><span class="hs-identifier hs-type">R.Pi</span></a></span><span> </span><span id="local-6989586621681454667"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681454667"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681454668"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681454668"><span class="hs-identifier hs-var">b</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-198"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681454669"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454669"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454670"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454670"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; m (AbsOfRef (Abs Type))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Abs Type -&gt; m (AbsOfRef (Abs Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681454668"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span id="local-6989586621681454671"><span class="annot"><span class="annottext">TypedBinding
</span><a href="#local-6989586621681454671"><span class="hs-identifier hs-var">a</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Dom Type, Name) -&gt; m (AbsOfRef (Dom Type, Name))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Dom Type, Name) -&gt; m (AbsOfRef (Dom Type, Name))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681454667"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454670"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>      </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; Telescope1 -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Pi"><span class="hs-identifier hs-var">A.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="Agda.Syntax.Info.html#exprNoRange"><span class="hs-identifier hs-var">exprNoRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypedBinding -&gt; Telescope1
forall el coll. Singleton el coll =&gt; el -&gt; coll
</span><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">TypedBinding
</span><a href="#local-6989586621681454671"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454669"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Sort"><span class="hs-identifier hs-type">R.Sort</span></a></span><span> </span><span id="local-6989586621681454674"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681454674"><span class="hs-identifier hs-var">s</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; m (AbsOfRef Sort)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Sort -&gt; m (AbsOfRef Sort)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681454674"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Lit"><span class="hs-identifier hs-type">R.Lit</span></a></span><span> </span><span id="local-6989586621681454676"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454676"><span class="hs-identifier hs-var">l</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; m (AbsOfRef Literal)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Literal -&gt; m (AbsOfRef Literal)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454676"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Meta"><span class="hs-identifier hs-type">R.Meta</span></a></span><span> </span><span id="local-6989586621681454678"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681454678"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681454679"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454679"><span class="hs-identifier hs-var">es</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>      </span><span id="local-6989586621681454680"><span class="annot"><span class="annottext">MetaInfo
</span><a href="#local-6989586621681454680"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m MetaInfo
forall (m :: * -&gt; *). ReadTCState m =&gt; m MetaInfo
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkMetaInfo"><span class="hs-identifier hs-var">mkMetaInfo</span></a></span><span>
</span><span id="line-205"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454682"><span class="annot"><span class="annottext">info' :: MetaInfo
</span><a href="#local-6989586621681454682"><span class="hs-identifier hs-var hs-var">info'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaInfo
</span><a href="#local-6989586621681454680"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Info.html#metaNumber"><span class="hs-identifier hs-var">metaNumber</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621681454678"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
(Expr, Elims) -&gt; m (AbsOfRef (Expr, Elims))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaInfo -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Underscore"><span class="hs-identifier hs-var">A.Underscore</span></a></span><span> </span><span class="annot"><span class="annottext">MetaInfo
</span><a href="#local-6989586621681454682"><span class="hs-identifier hs-var">info'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681454679"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><a href="Agda.Syntax.Reflected.html#Unknown"><span class="hs-identifier hs-var">R.Unknown</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaInfo -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Underscore"><span class="hs-identifier hs-var">A.Underscore</span></a></span><span> </span><span class="annot"><span class="annottext">(MetaInfo -&gt; Expr) -&gt; m MetaInfo -&gt; m Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m MetaInfo
forall (m :: * -&gt; *). ReadTCState m =&gt; m MetaInfo
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkMetaInfo"><span class="hs-identifier hs-var">mkMetaInfo</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621681454109"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkMetaInfo"><span class="hs-identifier hs-type">mkMetaInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454109"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454109"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Info.html#MetaInfo"><span class="hs-identifier hs-type">MetaInfo</span></a></span></span><span>
</span><span id="line-210"></span><span id="mkMetaInfo"><span class="annot"><span class="annottext">mkMetaInfo :: forall (m :: * -&gt; *). ReadTCState m =&gt; m MetaInfo
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkMetaInfo"><span class="hs-identifier hs-var hs-var">mkMetaInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621681454691"><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681454691"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m ScopeInfo
forall (m :: * -&gt; *). ReadTCState m =&gt; m ScopeInfo
</span><a href="Agda.TypeChecking.Monad.State.html#getScope"><span class="hs-identifier hs-var">getScope</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="annottext">MetaInfo -&gt; m MetaInfo
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MetaInfo -&gt; m MetaInfo) -&gt; MetaInfo -&gt; m MetaInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaInfo
</span><a href="Agda.Syntax.Info.html#emptyMetaInfo"><span class="hs-identifier hs-var">emptyMetaInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Info.html#metaScope"><span class="hs-identifier hs-var">metaScope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681454691"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621681454093"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkDef"><span class="hs-identifier hs-type">mkDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span></span><span>
</span><span id="line-215"></span><span id="mkDef"><span class="annot"><span class="annottext">mkDef :: forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkDef"><span class="hs-identifier hs-var hs-var">mkDef</span></a></span></span><span> </span><span id="local-6989586621681454701"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">m Definition -&gt; (Definition -&gt; Defn) -&gt; m Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">m Defn -&gt; (Defn -&gt; Expr) -&gt; m Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Constructor"><span class="hs-identifier hs-type">Constructor</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AmbiguousQName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Con"><span class="hs-identifier hs-var">A.Con</span></a></span><span> </span><span class="annot"><span class="annottext">(AmbiguousQName -&gt; Expr) -&gt; AmbiguousQName -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; AmbiguousQName
</span><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier hs-var">unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funProjection :: Defn -&gt; Either ProjectionLikenessMissing Projection
</span><a href="Agda.TypeChecking.Monad.Base.html#funProjection"><span class="hs-identifier hs-var">funProjection</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Projection"><span class="hs-identifier hs-type">Projection</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">projProper :: Projection -&gt; Maybe QName
</span><a href="Agda.TypeChecking.Monad.Base.html#projProper"><span class="hs-identifier hs-var">projProper</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProjOrigin -&gt; AmbiguousQName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Proj"><span class="hs-identifier hs-var">A.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">(AmbiguousQName -&gt; Expr) -&gt; AmbiguousQName -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; AmbiguousQName
</span><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier hs-var">unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>  </span><span id="local-6989586621681454712"><span class="annot"><span class="annottext">d :: Defn
</span><a href="#local-6989586621681454712"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Defn -&gt; Bool
</span><a href="Agda.TypeChecking.Monad.Base.html#isMacro"><span class="hs-identifier hs-var">isMacro</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681454712"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Macro"><span class="hs-identifier hs-var">A.Macro</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def"><span class="hs-identifier hs-var">A.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454701"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkApp"><span class="hs-identifier hs-type">mkApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-229"></span><span id="mkApp"><span class="annot"><span class="annottext">mkApp :: Expr -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkApp"><span class="hs-identifier hs-var hs-var">mkApp</span></a></span></span><span> </span><span id="local-6989586621681454717"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454717"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681454718"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454718"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AppInfo -&gt; Expr -&gt; Arg (Named_ Expr) -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-var">A.App</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; AppInfo -&gt; AppInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Reflected"><span class="hs-identifier hs-var">Reflected</span></a></span><span> </span><span class="annot"><span class="annottext">AppInfo
</span><a href="Agda.Syntax.Info.html#defaultAppInfo_"><span class="hs-identifier hs-var">defaultAppInfo_</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454717"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg (Named_ Expr) -&gt; Expr) -&gt; Arg (Named_ Expr) -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Arg (Named_ Expr)
forall a. a -&gt; NamedArg a
</span><a href="Agda.Syntax.Common.html#defaultNamedArg"><span class="hs-identifier hs-var">defaultNamedArg</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454718"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span id="local-6989586621681454125"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVar"><span class="hs-identifier hs-type">mkVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454125"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454125"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-233"></span><span id="mkVar"><span class="annot"><span class="annottext">mkVar :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Name, Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVar"><span class="hs-identifier hs-var hs-var">mkVar</span></a></span></span><span> </span><span id="local-6989586621681454743"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454743"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Name, Type))
-&gt; ((Name, Type) -&gt; m (Name, Type))
-&gt; m (Name, Type)
-&gt; m (Name, Type)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; (a -&gt; m b) -&gt; m b -&gt; m b
</span><a href="Agda.Utils.Maybe.html#ifJustM"><span class="hs-identifier hs-var">ifJustM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; m (Maybe (Name, Type))
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Maybe (Name, Type))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#askVar"><span class="hs-identifier hs-var">askVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454743"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name, Type) -&gt; m (Name, Type)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(m (Name, Type) -&gt; m (Name, Type))
-&gt; m (Name, Type) -&gt; m (Name, Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621681454745"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681454745"><span class="hs-identifier hs-var">cxt</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Telescope
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span id="local-6989586621681454747"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454747"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(Name, Type)] -&gt; [Name]) -&gt; m [Name]
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">(([(Name, Type)] -&gt; [Name]) -&gt; m [Name])
-&gt; ([(Name, Type)] -&gt; [Name]) -&gt; m [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Name] -&gt; [Name]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681454745"><span class="hs-identifier hs-var">cxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; [Name])
-&gt; ([(Name, Type)] -&gt; [Name]) -&gt; [(Name, Type)] -&gt; [Name]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; [Name])
-&gt; ([(Name, Type)] -&gt; [Name]) -&gt; [(Name, Type)] -&gt; [Name]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Name, Type) -&gt; Name) -&gt; [(Name, Type)] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, Type) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; m (Name, Type) -&gt; m (Name, Type)
forall (m :: * -&gt; *) a. ReadTCState m =&gt; Bool -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments%27"><span class="hs-identifier hs-var">withShowAllArguments'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">(m (Name, Type) -&gt; m (Name, Type))
-&gt; m (Name, Type) -&gt; m (Name, Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; m (Name, Type)
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; m (Name, Type)) -&gt; TypeError -&gt; m (Name, Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; [Name] -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#DeBruijnIndexOutOfScope"><span class="hs-identifier hs-var">DeBruijnIndexOutOfScope</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454743"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681454745"><span class="hs-identifier hs-var">cxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681454747"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span id="local-6989586621681454091"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVarName"><span class="hs-identifier hs-type">mkVarName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454091"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454091"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span></span><span>
</span><span id="line-239"></span><span id="mkVarName"><span class="annot"><span class="annottext">mkVarName :: forall (m :: * -&gt; *). MonadReflectedToAbstract m =&gt; Int -&gt; m Name
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVarName"><span class="hs-identifier hs-var hs-var">mkVarName</span></a></span></span><span> </span><span id="local-6989586621681454759"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454759"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name, Type) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Name, Type) -&gt; Name) -&gt; m (Name, Type) -&gt; m Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; m (Name, Type)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Name, Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVar"><span class="hs-identifier hs-var">mkVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454759"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span id="local-6989586621681454145"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#annotatePattern"><span class="hs-identifier hs-type">annotatePattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454145"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Pattern"><span class="hs-identifier hs-type">A.Pattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454145"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Pattern"><span class="hs-identifier hs-type">A.Pattern</span></a></span></span><span>
</span><span id="line-242"></span><span id="annotatePattern"><span class="annot"><span class="annottext">annotatePattern :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; Type -&gt; Pattern -&gt; m Pattern
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#annotatePattern"><span class="hs-identifier hs-var hs-var">annotatePattern</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="Agda.Syntax.Reflected.html#Unknown"><span class="hs-identifier hs-var">R.Unknown</span></a></span><span> </span><span id="local-6989586621681454773"><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454773"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pattern -&gt; m Pattern
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454773"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#annotatePattern"><span class="hs-identifier hs-var">annotatePattern</span></a></span><span> </span><span id="local-6989586621681454774"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454774"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681454775"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454775"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681454776"><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454776"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, Type)] -&gt; [(Name, Type)]) -&gt; m Pattern -&gt; m Pattern
forall a. ([(Name, Type)] -&gt; [(Name, Type)]) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">local</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [(Name, Type)] -&gt; [(Name, Type)]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [(Name, Type)] -&gt; [(Name, Type)])
-&gt; Int -&gt; [(Name, Type)] -&gt; [(Name, Type)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454774"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m Pattern -&gt; m Pattern) -&gt; m Pattern -&gt; m Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-244"></span><span>  </span><span id="local-6989586621681454778"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454778"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; m (AbsOfRef Type)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454775"><span class="hs-identifier hs-var">t</span></a></span><span>  </span><span class="hs-comment">-- go into the right context for translating the type</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">Pattern -&gt; m Pattern
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; m Pattern) -&gt; Pattern -&gt; m Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatInfo -&gt; Expr -&gt; Pattern -&gt; Pattern
forall e. PatInfo -&gt; e -&gt; Pattern' e -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#AnnP"><span class="hs-identifier hs-var">A.AnnP</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454778"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454776"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-249"></span><span>  </span><span id="local-6989586621681454815"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Sort -&gt; m (AbsOfRef Sort)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span id="local-6989586621681454816"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681454816"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-250"></span><span>    </span><span id="local-6989586621681454817"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454817"><span class="hs-identifier hs-var">setName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName -&gt; QName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">QName
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe QName -&gt; QName) -&gt; m (Maybe QName) -&gt; m QName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BuiltinId -&gt; m (Maybe QName)
forall (m :: * -&gt; *). HasBuiltins m =&gt; BuiltinId -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-var">getBuiltinName'</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinId
</span><a href="Agda.Syntax.Builtin.html#builtinSet"><span class="hs-identifier hs-var">builtinSet</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621681454821"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454821"><span class="hs-identifier hs-var">propName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName -&gt; QName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">QName
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe QName -&gt; QName) -&gt; m (Maybe QName) -&gt; m QName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BuiltinId -&gt; m (Maybe QName)
forall (m :: * -&gt; *). HasBuiltins m =&gt; BuiltinId -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-var">getBuiltinName'</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinId
</span><a href="Agda.Syntax.Builtin.html#builtinProp"><span class="hs-identifier hs-var">builtinProp</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621681454823"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454823"><span class="hs-identifier hs-var">infName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName -&gt; QName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">QName
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe QName -&gt; QName) -&gt; m (Maybe QName) -&gt; m QName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BuiltinId -&gt; m (Maybe QName)
forall (m :: * -&gt; *). HasBuiltins m =&gt; BuiltinId -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-var">getBuiltinName'</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinId
</span><a href="Agda.Syntax.Builtin.html#builtinSetOmega"><span class="hs-identifier hs-var">builtinSetOmega</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681454816"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-254"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Reflected.html#SetS"><span class="hs-identifier hs-type">SetS</span></a></span><span> </span><span id="local-6989586621681454826"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454826"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkApp"><span class="hs-identifier hs-var">mkApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def"><span class="hs-identifier hs-var">A.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454817"><span class="hs-identifier hs-var">setName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Expr) -&gt; m Expr -&gt; m Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; m (AbsOfRef Type)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454826"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Reflected.html#LitS"><span class="hs-identifier hs-type">LitS</span></a></span><span> </span><span id="local-6989586621681454828"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454828"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Suffix -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def%27"><span class="hs-identifier hs-var">A.Def'</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454817"><span class="hs-identifier hs-var">setName</span></a></span><span> </span><span class="annot"><span class="annottext">(Suffix -&gt; Expr) -&gt; Suffix -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Suffix
</span><a href="Agda.Syntax.Abstract.Name.html#Suffix"><span class="hs-identifier hs-var">A.Suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454828"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-256"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Reflected.html#PropS"><span class="hs-identifier hs-type">PropS</span></a></span><span> </span><span id="local-6989586621681454832"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454832"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkApp"><span class="hs-identifier hs-var">mkApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def"><span class="hs-identifier hs-var">A.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454821"><span class="hs-identifier hs-var">propName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Expr) -&gt; m Expr -&gt; m Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; m (AbsOfRef Type)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454832"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-257"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Reflected.html#PropLitS"><span class="hs-identifier hs-type">PropLitS</span></a></span><span> </span><span id="local-6989586621681454834"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454834"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Suffix -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def%27"><span class="hs-identifier hs-var">A.Def'</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454821"><span class="hs-identifier hs-var">propName</span></a></span><span> </span><span class="annot"><span class="annottext">(Suffix -&gt; Expr) -&gt; Suffix -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Suffix
</span><a href="Agda.Syntax.Abstract.Name.html#Suffix"><span class="hs-identifier hs-var">A.Suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454834"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-258"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Reflected.html#InfS"><span class="hs-identifier hs-type">InfS</span></a></span><span> </span><span id="local-6989586621681454836"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454836"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; m Expr
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; m Expr) -&gt; Expr -&gt; m Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Suffix -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def%27"><span class="hs-identifier hs-var">A.Def'</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454823"><span class="hs-identifier hs-var">infName</span></a></span><span> </span><span class="annot"><span class="annottext">(Suffix -&gt; Expr) -&gt; Suffix -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Suffix
</span><a href="Agda.Syntax.Abstract.Name.html#Suffix"><span class="hs-identifier hs-var">A.Suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681454836"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-259"></span><span>      </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Reflected.html#UnknownS"><span class="hs-identifier hs-var">UnknownS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkApp"><span class="hs-identifier hs-var">mkApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Def"><span class="hs-identifier hs-var">A.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454817"><span class="hs-identifier hs-var">setName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Expr) -&gt; (MetaInfo -&gt; Expr) -&gt; MetaInfo -&gt; Expr
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MetaInfo -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Underscore"><span class="hs-identifier hs-var">A.Underscore</span></a></span><span> </span><span class="annot"><span class="annottext">(MetaInfo -&gt; Expr) -&gt; m MetaInfo -&gt; m Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m MetaInfo
forall (m :: * -&gt; *). ReadTCState m =&gt; m MetaInfo
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkMetaInfo"><span class="hs-identifier hs-var">mkMetaInfo</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Pattern"><span class="hs-identifier hs-type">R.Pattern</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Pattern"><span class="hs-identifier hs-type">R.Pattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Pattern"><span class="hs-identifier hs-type">A.Pattern</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621681454863"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Pattern -&gt; m (AbsOfRef Pattern)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span id="local-6989586621681454864"><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454864"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621681454864"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#ConP"><span class="hs-identifier hs-type">R.ConP</span></a></span><span> </span><span id="local-6989586621681454866"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454866"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681454867"><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454867"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>      </span><span id="local-6989586621681454868"><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454868"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454867"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">Pattern -&gt; m Pattern
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; m Pattern) -&gt; Pattern -&gt; m Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConPatInfo -&gt; AmbiguousQName -&gt; NAPs Expr -&gt; Pattern
forall e. ConPatInfo -&gt; AmbiguousQName -&gt; NAPs e -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#ConP"><span class="hs-identifier hs-var">A.ConP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConOrigin -&gt; PatInfo -&gt; ConPatLazy -&gt; ConPatInfo
</span><a href="Agda.Syntax.Info.html#ConPatInfo"><span class="hs-identifier hs-var">ConPatInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConOrigin
</span><a href="Agda.Syntax.Common.html#ConOCon"><span class="hs-identifier hs-var">ConOCon</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">ConPatLazy
</span><a href="Agda.Syntax.Info.html#ConPatEager"><span class="hs-identifier hs-var">ConPatEager</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; AmbiguousQName
</span><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier hs-var">unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; AmbiguousQName) -&gt; QName -&gt; AmbiguousQName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KillRangeT QName
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454866"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454868"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#DotP"><span class="hs-identifier hs-type">R.DotP</span></a></span><span> </span><span id="local-6989586621681454874"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454874"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatInfo -&gt; Expr -&gt; Pattern
forall e. PatInfo -&gt; e -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#DotP"><span class="hs-identifier hs-var">A.DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Pattern) -&gt; m Expr -&gt; m Pattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; m (AbsOfRef Type)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454874"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#VarP"><span class="hs-identifier hs-type">R.VarP</span></a></span><span> </span><span id="local-6989586621681454877"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454877"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681454878"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454878"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454879"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454879"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; m (Name, Type)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Name, Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVar"><span class="hs-identifier hs-var">mkVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454877"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-270"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Pattern -&gt; m Pattern
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; Type -&gt; Pattern -&gt; m Pattern
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#annotatePattern"><span class="hs-identifier hs-var">annotatePattern</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454877"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454879"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; m Pattern) -&gt; Pattern -&gt; m Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BindName -&gt; Pattern
forall e. BindName -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#VarP"><span class="hs-identifier hs-var">A.VarP</span></a></span><span> </span><span class="annot"><span class="annottext">(BindName -&gt; Pattern) -&gt; BindName -&gt; Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; BindName
</span><a href="Agda.Syntax.Abstract.html#mkBindName"><span class="hs-identifier hs-var">A.mkBindName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681454878"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#LitP"><span class="hs-identifier hs-type">R.LitP</span></a></span><span> </span><span id="local-6989586621681454883"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454883"><span class="hs-identifier hs-var">l</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AbsOfRef Pattern -&gt; m (AbsOfRef Pattern)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AbsOfRef Pattern -&gt; m (AbsOfRef Pattern))
-&gt; AbsOfRef Pattern -&gt; m (AbsOfRef Pattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatInfo -&gt; Literal -&gt; Pattern
forall e. PatInfo -&gt; Literal -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#LitP"><span class="hs-identifier hs-var">A.LitP</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681454883"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#AbsurdP"><span class="hs-identifier hs-type">R.AbsurdP</span></a></span><span> </span><span id="local-6989586621681454886"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454886"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454887"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454887"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; m (Name, Type)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; m (Name, Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#mkVar"><span class="hs-identifier hs-var">mkVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454886"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-274"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Pattern -&gt; m Pattern
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Int -&gt; Type -&gt; Pattern -&gt; m Pattern
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#annotatePattern"><span class="hs-identifier hs-var">annotatePattern</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454886"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454887"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; m Pattern) -&gt; Pattern -&gt; m Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatInfo -&gt; Pattern
forall e. PatInfo -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#AbsurdP"><span class="hs-identifier hs-var">A.AbsurdP</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Reflected.html#ProjP"><span class="hs-identifier hs-type">R.ProjP</span></a></span><span> </span><span id="local-6989586621681454890"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454890"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AbsOfRef Pattern -&gt; m (AbsOfRef Pattern)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AbsOfRef Pattern -&gt; m (AbsOfRef Pattern))
-&gt; AbsOfRef Pattern -&gt; m (AbsOfRef Pattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatInfo -&gt; ProjOrigin -&gt; AmbiguousQName -&gt; Pattern
forall e. PatInfo -&gt; ProjOrigin -&gt; AmbiguousQName -&gt; Pattern' e
</span><a href="Agda.Syntax.Abstract.html#ProjP"><span class="hs-identifier hs-var">A.ProjP</span></a></span><span> </span><span class="annot"><span class="annottext">PatInfo
</span><a href="Agda.Syntax.Info.html#patNoRange"><span class="hs-identifier hs-var">patNoRange</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">(AmbiguousQName -&gt; Pattern) -&gt; AmbiguousQName -&gt; Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; AmbiguousQName
</span><a href="Agda.Syntax.Abstract.Name.html#unambiguous"><span class="hs-identifier hs-var">unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; AmbiguousQName) -&gt; QName -&gt; AmbiguousQName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KillRangeT QName
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454890"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621681454924"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
QNamed Clause -&gt; m (AbsOfRef (QNamed Clause))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span id="local-6989586621681454925"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454925"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span> </span><span id="local-6989586621681454927"><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454927"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681454928"><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454928"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621681454929"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454929"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, Type)]
-&gt; ([Name] -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; m (AbsOfRef (QNamed Clause))
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-var">withVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Text, Arg Type) -&gt; (String, Type))
-&gt; [(Text, Arg Type)] -&gt; [(String, Type)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String)
-&gt; (Arg Type -&gt; Type) -&gt; (Text, Arg Type) -&gt; (String, Type)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Type
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454927"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Name] -&gt; m (AbsOfRef (QNamed Clause)))
 -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; ([Name] -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; m (AbsOfRef (QNamed Clause))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">[(Text, Arg Type)] -&gt; [Arg Pattern] -&gt; m ()
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[(Text, Arg Type)] -&gt; [Arg Pattern] -&gt; m ()
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#checkClauseTelescopeBindings"><span class="hs-identifier hs-var">checkClauseTelescopeBindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454927"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454928"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-282"></span><span>    </span><span id="local-6989586621681454933"><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454933"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454928"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span id="local-6989586621681454934"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454934"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; m (AbsOfRef Type)
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
Type -&gt; m (AbsOfRef Type)
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681454929"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454935"><span class="annot"><span class="annottext">lhs :: LHS
</span><a href="#local-6989586621681454935"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpineLHS -&gt; LHS
forall a b. LHSToSpine a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Abstract.Pattern.html#spineToLhs"><span class="hs-identifier hs-var">spineToLhs</span></a></span><span> </span><span class="annot"><span class="annottext">(SpineLHS -&gt; LHS) -&gt; SpineLHS -&gt; LHS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHSInfo -&gt; QName -&gt; NAPs Expr -&gt; SpineLHS
</span><a href="Agda.Syntax.Abstract.html#SpineLHS"><span class="hs-identifier hs-var">A.SpineLHS</span></a></span><span> </span><span class="annot"><span class="annottext">LHSInfo
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454925"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454933"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="annottext">Clause -&gt; m Clause
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; m Clause) -&gt; Clause -&gt; m Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHS -&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause
forall lhs.
lhs
-&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause' lhs
</span><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-var">A.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621681454935"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Maybe Expr -&gt; RHS
</span><a href="Agda.Syntax.Abstract.html#RHS"><span class="hs-identifier hs-var">A.RHS</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681454934"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Expr
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="Agda.Syntax.Abstract.html#noWhereDecls"><span class="hs-identifier hs-var">A.noWhereDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span id="local-6989586621681454941"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454941"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#AbsurdClause"><span class="hs-identifier hs-type">R.AbsurdClause</span></a></span><span> </span><span id="local-6989586621681454943"><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454943"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681454944"><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454944"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, Type)]
-&gt; ([Name] -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; m (AbsOfRef (QNamed Clause))
forall (m :: * -&gt; *) a.
MonadReflectedToAbstract m =&gt;
[(String, Type)] -&gt; ([Name] -&gt; m a) -&gt; m a
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#withVars"><span class="hs-identifier hs-var">withVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Text, Arg Type) -&gt; (String, Type))
-&gt; [(Text, Arg Type)] -&gt; [(String, Type)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String)
-&gt; (Arg Type -&gt; Type) -&gt; (Text, Arg Type) -&gt; (String, Type)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Type
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454943"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Name] -&gt; m (AbsOfRef (QNamed Clause)))
 -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; ([Name] -&gt; m (AbsOfRef (QNamed Clause)))
-&gt; m (AbsOfRef (QNamed Clause))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="annottext">[(Text, Arg Type)] -&gt; [Arg Pattern] -&gt; m ()
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[(Text, Arg Type)] -&gt; [Arg Pattern] -&gt; m ()
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#checkClauseTelescopeBindings"><span class="hs-identifier hs-var">checkClauseTelescopeBindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454943"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454944"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span id="local-6989586621681454945"><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454945"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[Arg Pattern] -&gt; m (AbsOfRef [Arg Pattern])
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454944"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681454946"><span class="annot"><span class="annottext">lhs :: LHS
</span><a href="#local-6989586621681454946"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpineLHS -&gt; LHS
forall a b. LHSToSpine a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Abstract.Pattern.html#spineToLhs"><span class="hs-identifier hs-var">spineToLhs</span></a></span><span> </span><span class="annot"><span class="annottext">(SpineLHS -&gt; LHS) -&gt; SpineLHS -&gt; LHS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHSInfo -&gt; QName -&gt; NAPs Expr -&gt; SpineLHS
</span><a href="Agda.Syntax.Abstract.html#SpineLHS"><span class="hs-identifier hs-var">A.SpineLHS</span></a></span><span> </span><span class="annot"><span class="annottext">LHSInfo
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681454941"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs Expr
</span><a href="#local-6989586621681454945"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">Clause -&gt; m Clause
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; m Clause) -&gt; Clause -&gt; m Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHS -&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause
forall lhs.
lhs
-&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause' lhs
</span><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-var">A.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621681454946"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">RHS
</span><a href="Agda.Syntax.Abstract.html#AbsurdRHS"><span class="hs-identifier hs-var">A.AbsurdRHS</span></a></span><span> </span><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="Agda.Syntax.Abstract.html#noWhereDecls"><span class="hs-identifier hs-var">A.noWhereDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span>  </span><span id="local-6989586621681454957"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[QNamed Clause] -&gt; m (AbsOfRef [QNamed Clause])
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QNamed Clause -&gt; m Clause) -&gt; [QNamed Clause] -&gt; m [Clause]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; m Clause
QNamed Clause -&gt; m (AbsOfRef (QNamed Clause))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
QNamed Clause -&gt; m (AbsOfRef (QNamed Clause))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#ToAbstract"><span class="hs-identifier hs-type">ToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.List1.html#List1"><span class="hs-identifier hs-type">List1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AbsOfRef"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#AbsOfRef"><span class="hs-identifier hs-var">AbsOfRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.List1.html#List1"><span class="hs-identifier hs-type">List1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-type">QNamed</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Clause"><span class="hs-identifier hs-type">R.Clause</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Utils.List1.html#List1"><span class="hs-identifier hs-type">List1</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621681454967"><span class="annot"><span class="annottext">toAbstract :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
NonEmpty (QNamed Clause) -&gt; m (AbsOfRef (NonEmpty (QNamed Clause)))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAbstract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QNamed Clause -&gt; m Clause)
-&gt; NonEmpty (QNamed Clause) -&gt; m (List1 Clause)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; m Clause
QNamed Clause -&gt; m (AbsOfRef (QNamed Clause))
forall r (m :: * -&gt; *).
(ToAbstract r, MonadReflectedToAbstract m) =&gt;
r -&gt; m (AbsOfRef r)
forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
QNamed Clause -&gt; m (AbsOfRef (QNamed Clause))
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#toAbstract"><span class="hs-identifier hs-var">toAbstract</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-comment">-- | Check that all variables in the telescope are bound in the left-hand side. Since we check the</span><span>
</span><span id="line-301"></span><span class="hs-comment">--   telescope by attaching type annotations to the pattern variables there needs to be somewhere to</span><span>
</span><span id="line-302"></span><span class="hs-comment">--   put the annotation. Also, since the lhs is where the variables are actually bound, missing a</span><span>
</span><span id="line-303"></span><span class="hs-comment">--   binding for a variable that's used later in the telescope causes unbound variable panic</span><span>
</span><span id="line-304"></span><span class="hs-comment">--   (see #5044).</span><span>
</span><span id="line-305"></span><span id="local-6989586621681454177"><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#checkClauseTelescopeBindings"><span class="hs-identifier hs-type">checkClauseTelescopeBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#MonadReflectedToAbstract"><span class="hs-identifier hs-type">MonadReflectedToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681454177"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Type"><span class="hs-identifier hs-type">R.Type</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#Pattern"><span class="hs-identifier hs-type">R.Pattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681454177"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-306"></span><span id="checkClauseTelescopeBindings"><span class="annot"><span class="annottext">checkClauseTelescopeBindings :: forall (m :: * -&gt; *).
MonadReflectedToAbstract m =&gt;
[(Text, Arg Type)] -&gt; [Arg Pattern] -&gt; m ()
</span><a href="Agda.Syntax.Translation.ReflectedToAbstract.html#checkClauseTelescopeBindings"><span class="hs-identifier hs-var hs-var">checkClauseTelescopeBindings</span></a></span></span><span> </span><span id="local-6989586621681454996"><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454996"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681454997"><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454997"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681454998"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681454998"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681454998"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Arg Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681454999"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454999"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)] -&gt; [Int] -&gt; [((Text, Arg Type), Int)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Text, Arg Type)] -&gt; [(Text, Arg Type)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(Text, Arg Type)]
</span><a href="#local-6989586621681454996"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681454999"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Set Int
</span><a href="#local-6989586621681455002"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621681455003"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681455003"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; m ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
Doc -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#genericDocError"><span class="hs-identifier hs-var">genericDocError</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; m ()) -&gt; Doc -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; (Doc -&gt; Doc) -&gt; (Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a c. Sized a =&gt; a -&gt; c -&gt; c -&gt; c
</span><a href="Agda.Syntax.Common.Pretty.html#singPlural"><span class="hs-identifier hs-var">singPlural</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681455003"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;s&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Missing bindings for telescope variable&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Agda.Syntax.Common.Pretty.html#%3C%3F%3E"><span class="hs-operator hs-var">&lt;?&gt;</span></a></span><span>
</span><span id="line-310"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Syntax.Common.Pretty.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
forall (t :: * -&gt; *). Foldable t =&gt; Doc -&gt; t Doc -&gt; [Doc]
</span><a href="Agda.Syntax.Common.Pretty.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Doc) -&gt; [Text] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
forall a. String -&gt; Doc a
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Doc) -&gt; (Text -&gt; String) -&gt; Text -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681455003"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Doc a -&gt; Doc a -&gt; Doc a
</span><span class="hs-operator hs-var">$$</span></span><span>
</span><span id="line-311"></span><span>                             </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;All variables in the clause telescope must be bound in the left-hand side.&quot;</span></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>    </span><span id="local-6989586621681455002"><span class="annot"><span class="annottext">bs :: Set Int
</span><a href="#local-6989586621681455002"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Arg Pattern] -&gt; Set Int
</span><a href="#local-6989586621681455012"><span class="hs-identifier hs-var">boundVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681454997"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621681455012"><span class="annot"><span class="annottext">boundVars :: [Arg Pattern] -&gt; Set Int
</span><a href="#local-6989586621681455012"><span class="hs-identifier hs-var hs-var">boundVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set Int] -&gt; Set Int
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span> </span><span class="annot"><span class="annottext">([Set Int] -&gt; Set Int)
-&gt; ([Arg Pattern] -&gt; [Set Int]) -&gt; [Arg Pattern] -&gt; Set Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Arg Pattern -&gt; Set Int) -&gt; [Arg Pattern] -&gt; [Set Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern -&gt; Set Int
</span><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; Set Int)
-&gt; (Arg Pattern -&gt; Pattern) -&gt; Arg Pattern -&gt; Set Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Pattern -&gt; Pattern
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>    </span><span id="local-6989586621681455016"><span class="annot"><span class="annottext">bound :: Pattern -&gt; Set Int
</span><a href="#local-6989586621681455016"><span class="hs-identifier hs-var hs-var">bound</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#VarP"><span class="hs-identifier hs-type">R.VarP</span></a></span><span> </span><span id="local-6989586621681455017"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681455017"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Int
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681455017"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#ConP"><span class="hs-identifier hs-type">R.ConP</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681455019"><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681455019"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Arg Pattern] -&gt; Set Int
</span><a href="#local-6989586621681455012"><span class="hs-identifier hs-var">boundVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Pattern]
</span><a href="#local-6989586621681455019"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#DotP"><span class="hs-identifier hs-type">R.DotP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#LitP"><span class="hs-identifier hs-type">R.LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Reflected.html#AbsurdP"><span class="hs-identifier hs-type">R.AbsurdP</span></a></span><span> </span><span id="local-6989586621681455021"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681455021"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Int
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681455021"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><a href="#local-6989586621681455016"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Reflected.html#ProjP"><span class="hs-identifier hs-type">R.ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-322"></span></pre></body></html>