<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wunused-imports #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="annot"><span class="hs-comment">{- |  Non-linear matching of the lhs of a rewrite rule against a
      neutral term.

Given a lhs

  &#916; &#8866; lhs : B

and a candidate term

  &#915; &#8866; t : A

we seek a substitution &#915; &#8866; &#963; : &#916; such that

  &#915; &#8866; B[&#963;] = A   and
  &#915; &#8866; lhs[&#963;] = t : A

-}</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.TypeChecking.Rewriting.NonLinMatch</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sequence</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Alternative</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">void</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadError</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ExceptT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runExceptT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StateT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runStateT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Fail</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fail</span></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntMap</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntSet</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntSet</span></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html"><span class="hs-identifier">Agda.TypeChecking.Conversion.Pure</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html"><span class="hs-identifier">Agda.TypeChecking.Datatypes</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Free.Reduce</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html"><span class="hs-identifier">Agda.TypeChecking.Irrelevance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html#isPropM"><span class="hs-identifier">isPropM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Level.html"><span class="hs-identifier">Agda.TypeChecking.Level</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier">constructorForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html"><span class="hs-identifier">Agda.TypeChecking.Records</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Reduce.Monad</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.Cubical.Base.html"><span class="hs-identifier">Agda.TypeChecking.Primitive.Cubical.Base</span></a></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="annot"><span class="hs-comment">-- | Monad for non-linear matching.</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">newtype</span><span> </span><span id="NLM"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-var">NLM</span></a></span></span><span> </span><span id="local-6989586621681512832"><span class="annot"><a href="#local-6989586621681512832"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NLM"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-var">NLM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unNLM"><span class="annot"><span class="annottext">forall a. NLM a -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) a
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#unNLM"><span class="hs-identifier hs-var hs-var">unNLM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReduceM"><span class="hs-identifier hs-type">ReduceM</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681512832"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621681513388"><span id="local-6989586621681513394"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b)
-&gt; (forall a b. a -&gt; NLM b -&gt; NLM a) -&gt; Functor NLM
forall a b. a -&gt; NLM b -&gt; NLM a
forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
fmap :: forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
$c&lt;$ :: forall a b. a -&gt; NLM b -&gt; NLM a
&lt;$ :: forall a b. a -&gt; NLM b -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513406"><span id="local-6989586621681513413"><span id="local-6989586621681513419"><span id="local-6989586621681513425"><span id="local-6989586621681513431"><span class="annot"><span class="annottext">Functor NLM
Functor NLM =&gt;
(forall a. a -&gt; NLM a)
-&gt; (forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM b)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM a)
-&gt; Applicative NLM
forall a. a -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM b
forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; NLM a
pure :: forall a. a -&gt; NLM a
$c&lt;*&gt; :: forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
&lt;*&gt; :: forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
$c*&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
*&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
$c&lt;* :: forall a b. NLM a -&gt; NLM b -&gt; NLM a
&lt;* :: forall a b. NLM a -&gt; NLM b -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513453"><span id="local-6989586621681513459"><span id="local-6989586621681513464"><span class="annot"><span class="annottext">Applicative NLM
Applicative NLM =&gt;
(forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM b)
-&gt; (forall a. a -&gt; NLM a)
-&gt; Monad NLM
forall a. a -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM b
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
&gt;&gt;= :: forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
$c&gt;&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
&gt;&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
$creturn :: forall a. a -&gt; NLM a
return :: forall a. a -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513475"><span class="annot"><span class="annottext">Monad NLM
Monad NLM =&gt; (forall a. String -&gt; NLM a) -&gt; MonadFail NLM
forall a. String -&gt; NLM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. String -&gt; m a) -&gt; MonadFail m
$cfail :: forall a. String -&gt; NLM a
fail :: forall a. String -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Fail.MonadFail</span></span></span><span>
</span><span id="line-73"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513488"><span id="local-6989586621681513496"><span id="local-6989586621681513503"><span id="local-6989586621681513510"><span class="annot"><span class="annottext">Applicative NLM
Applicative NLM =&gt;
(forall a. NLM a)
-&gt; (forall a. NLM a -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. NLM a -&gt; NLM [a])
-&gt; (forall a. NLM a -&gt; NLM [a])
-&gt; Alternative NLM
forall a. NLM a
forall a. NLM a -&gt; NLM [a]
forall a. NLM a -&gt; NLM a -&gt; NLM a
forall (f :: * -&gt; *).
Applicative f =&gt;
(forall a. f a)
-&gt; (forall a. f a -&gt; f a -&gt; f a)
-&gt; (forall a. f a -&gt; f [a])
-&gt; (forall a. f a -&gt; f [a])
-&gt; Alternative f
$cempty :: forall a. NLM a
empty :: forall a. NLM a
$c&lt;|&gt; :: forall a. NLM a -&gt; NLM a -&gt; NLM a
&lt;|&gt; :: forall a. NLM a -&gt; NLM a -&gt; NLM a
$csome :: forall a. NLM a -&gt; NLM [a]
some :: forall a. NLM a -&gt; NLM [a]
$cmany :: forall a. NLM a -&gt; NLM [a]
many :: forall a. NLM a -&gt; NLM [a]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Alternative</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513542"><span id="local-6989586621681513549"><span class="annot"><span class="annottext">Monad NLM
Alternative NLM
(Alternative NLM, Monad NLM) =&gt;
(forall a. NLM a)
-&gt; (forall a. NLM a -&gt; NLM a -&gt; NLM a) -&gt; MonadPlus NLM
forall a. NLM a
forall a. NLM a -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
(Alternative m, Monad m) =&gt;
(forall a. m a) -&gt; (forall a. m a -&gt; m a -&gt; m a) -&gt; MonadPlus m
$cmzero :: forall a. NLM a
mzero :: forall a. NLM a
$cmplus :: forall a. NLM a -&gt; NLM a -&gt; NLM a
mplus :: forall a. NLM a -&gt; NLM a -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadPlus</span></span></span></span><span>
</span><span id="line-74"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513565"><span id="local-6989586621681513571"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513581"><span id="local-6989586621681513587"><span id="local-6989586621681513592"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span></span></span></span><span>
</span><span id="line-75"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513608"><span class="annot"><span class="annottext">Functor NLM
MonadFail NLM
Applicative NLM
(Functor NLM, Applicative NLM, MonadFail NLM) =&gt;
(SomeBuiltin -&gt; NLM (Maybe (Builtin PrimFun))) -&gt; HasBuiltins NLM
SomeBuiltin -&gt; NLM (Maybe (Builtin PrimFun))
forall (m :: * -&gt; *).
(Functor m, Applicative m, MonadFail m) =&gt;
(SomeBuiltin -&gt; m (Maybe (Builtin PrimFun))) -&gt; HasBuiltins m
$cgetBuiltinThing :: SomeBuiltin -&gt; NLM (Maybe (Builtin PrimFun))
getBuiltinThing :: SomeBuiltin -&gt; NLM (Maybe (Builtin PrimFun))
</span><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasBuiltins</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513633"><span id="local-6989586621681513639"><span id="local-6989586621681513644"><span class="annot"><span class="annottext">Functor NLM
MonadFail NLM
Applicative NLM
HasOptions NLM
MonadTCEnv NLM
MonadDebug NLM
(Functor NLM, Applicative NLM, MonadFail NLM, HasOptions NLM,
 MonadDebug NLM, MonadTCEnv NLM) =&gt;
(QName -&gt; NLM Definition)
-&gt; (QName -&gt; NLM (Either SigError Definition))
-&gt; (QName -&gt; NLM RewriteRules)
-&gt; HasConstInfo NLM
QName -&gt; NLM RewriteRules
QName -&gt; NLM (Either SigError Definition)
QName -&gt; NLM Definition
forall (m :: * -&gt; *).
(Functor m, Applicative m, MonadFail m, HasOptions m, MonadDebug m,
 MonadTCEnv m) =&gt;
(QName -&gt; m Definition)
-&gt; (QName -&gt; m (Either SigError Definition))
-&gt; (QName -&gt; m RewriteRules)
-&gt; HasConstInfo m
$cgetConstInfo :: QName -&gt; NLM Definition
getConstInfo :: QName -&gt; NLM Definition
$cgetConstInfo' :: QName -&gt; NLM (Either SigError Definition)
getConstInfo' :: QName -&gt; NLM (Either SigError Definition)
$cgetRewriteRulesFor :: QName -&gt; NLM RewriteRules
getRewriteRulesFor :: QName -&gt; NLM RewriteRules
</span><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasConstInfo</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513662"><span id="local-6989586621681513668"><span class="annot"><span class="annottext">Monad NLM
Functor NLM
Applicative NLM
NLM PragmaOptions
NLM CommandLineOptions
(Functor NLM, Applicative NLM, Monad NLM) =&gt;
NLM PragmaOptions -&gt; NLM CommandLineOptions -&gt; HasOptions NLM
forall (m :: * -&gt; *).
(Functor m, Applicative m, Monad m) =&gt;
m PragmaOptions -&gt; m CommandLineOptions -&gt; HasOptions m
$cpragmaOptions :: NLM PragmaOptions
pragmaOptions :: NLM PragmaOptions
$ccommandLineOptions :: NLM CommandLineOptions
commandLineOptions :: NLM CommandLineOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasOptions</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513680"><span id="local-6989586621681513688"><span id="local-6989586621681513693"><span class="annot"><span class="annottext">Monad NLM
NLM TCState
Monad NLM =&gt;
NLM TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a)
-&gt; ReadTCState NLM
forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
forall (m :: * -&gt; *).
Monad m =&gt;
m TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; m b -&gt; m b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; m a -&gt; m a)
-&gt; ReadTCState m
$cgetTCState :: NLM TCState
getTCState :: NLM TCState
$clocallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
locallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
$cwithTCState :: forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
withTCState :: forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ReadTCState</span></a></span></span></span></span><span>
</span><span id="line-76"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513707"><span id="local-6989586621681513713"><span class="annot"><span class="annottext">Monad NLM
NLM TCEnv
Monad NLM =&gt;
NLM TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a) -&gt; MonadTCEnv NLM
forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
Monad m =&gt;
m TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; m a -&gt; m a) -&gt; MonadTCEnv m
$caskTC :: NLM TCEnv
askTC :: NLM TCEnv
$clocalTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
localTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCEnv</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513731"><span class="annot"><span class="annottext">Applicative NLM
HasOptions NLM
MonadTCEnv NLM
ReadTCState NLM
(Applicative NLM, MonadTCEnv NLM, ReadTCState NLM,
 HasOptions NLM) =&gt;
(forall a. ReduceM a -&gt; NLM a) -&gt; MonadReduce NLM
forall a. ReduceM a -&gt; NLM a
forall (m :: * -&gt; *).
(Applicative m, MonadTCEnv m, ReadTCState m, HasOptions m) =&gt;
(forall a. ReduceM a -&gt; m a) -&gt; MonadReduce m
$cliftReduce :: forall a. ReduceM a -&gt; NLM a
liftReduce :: forall a. ReduceM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadReduce</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513744"><span id="local-6989586621681513750"><span id="local-6989586621681513755"><span id="local-6989586621681513760"><span class="annot"><span class="annottext">MonadTCEnv NLM
MonadTCEnv NLM =&gt;
(forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. Origin -&gt; Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a)
-&gt; (forall a.
    Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a)
-&gt; MonadAddContext NLM
forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
forall a. Origin -&gt; Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
MonadTCEnv m =&gt;
(forall a. Name -&gt; Dom Type -&gt; m a -&gt; m a)
-&gt; (forall a. Origin -&gt; Name -&gt; Term -&gt; Dom Type -&gt; m a -&gt; m a)
-&gt; (forall a. Substitution -&gt; (Context -&gt; Context) -&gt; m a -&gt; m a)
-&gt; (forall a. Range -&gt; String -&gt; (Name -&gt; m a) -&gt; m a)
-&gt; MonadAddContext m
$caddCtx :: forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
addCtx :: forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
$caddLetBinding' :: forall a. Origin -&gt; Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
addLetBinding' :: forall a. Origin -&gt; Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
$cupdateContext :: forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
updateContext :: forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
$cwithFreshName :: forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
withFreshName :: forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadAddContext</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681513779"><span id="local-6989586621681513785"><span id="local-6989586621681513790"><span id="local-6989586621681513795"><span id="local-6989586621681513800"><span id="local-6989586621681513805"><span id="local-6989586621681513810"><span class="annot"><span class="annottext">Monad NLM
Functor NLM
Applicative NLM
NLM Bool
NLM Verbosity
NLM ProfileOptions
(Functor NLM, Applicative NLM, Monad NLM) =&gt;
(String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a)
-&gt; NLM Verbosity
-&gt; NLM ProfileOptions
-&gt; NLM Bool
-&gt; (forall a. NLM a -&gt; NLM a)
-&gt; MonadDebug NLM
String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
forall a. NLM a -&gt; NLM a
forall (m :: * -&gt; *).
(Functor m, Applicative m, Monad m) =&gt;
(String -&gt; Key -&gt; TCMT IO Doc -&gt; m String)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; m a -&gt; m a)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; m a -&gt; m a)
-&gt; m Verbosity
-&gt; m ProfileOptions
-&gt; m Bool
-&gt; (forall a. m a -&gt; m a)
-&gt; MonadDebug m
$cformatDebugMessage :: String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
formatDebugMessage :: String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
$ctraceDebugMessage :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
traceDebugMessage :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
$cverboseBracket :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
verboseBracket :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
$cgetVerbosity :: NLM Verbosity
getVerbosity :: NLM Verbosity
$cgetProfileOptions :: NLM ProfileOptions
getProfileOptions :: NLM ProfileOptions
$cisDebugPrinting :: NLM Bool
isDebugPrinting :: NLM Bool
$cnowDebugPrinting :: forall a. NLM a -&gt; NLM a
nowDebugPrinting :: forall a. NLM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadDebug</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-77"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MonadTCEnv NLM
MonadReduce NLM
ReadTCState NLM
HasBuiltins NLM
MonadAddContext NLM
MonadDebug NLM
HasConstInfo NLM
(HasBuiltins NLM, HasConstInfo NLM, MonadAddContext NLM,
 MonadDebug NLM, MonadReduce NLM, MonadTCEnv NLM,
 ReadTCState NLM) =&gt;
PureTCM NLM
forall (m :: * -&gt; *).
(HasBuiltins m, HasConstInfo m, MonadAddContext m, MonadDebug m,
 MonadReduce m, MonadTCEnv m, ReadTCState m) =&gt;
PureTCM m
</span><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">PureTCM</span></a></span><span>
</span><span id="line-78"></span><span>           </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621681513846"><span class="annot"><span class="annottext">patternViolation :: forall a. Blocker -&gt; NLM a
</span><a href="#local-6989586621681513846"><span class="hs-identifier hs-var hs-var hs-var hs-var">patternViolation</span></a></span></span><span> </span><span id="local-6989586621681513848"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681513848"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM a
forall a. Blocked_ -&gt; NLM a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM a) -&gt; Blocked_ -&gt; NLM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; () -&gt; Blocked_
forall t a. Blocker -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-var">Blocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681513848"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621681513853"><span class="annot"><span class="annottext">catchPatternErr :: forall a. (Blocker -&gt; NLM a) -&gt; NLM a -&gt; NLM a
</span><a href="#local-6989586621681513853"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchPatternErr</span></a></span></span><span> </span><span id="local-6989586621681513855"><span class="annot"><span class="annottext">Blocker -&gt; NLM a
</span><a href="#local-6989586621681513855"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681513856"><span class="annot"><span class="annottext">NLM a
</span><a href="#local-6989586621681513856"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLM a -&gt; (Blocked_ -&gt; NLM a) -&gt; NLM a
forall a. NLM a -&gt; (Blocked_ -&gt; NLM a) -&gt; NLM a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">catchError</span></span><span> </span><span class="annot"><span class="annottext">NLM a
</span><a href="#local-6989586621681513856"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Blocked_ -&gt; NLM a) -&gt; NLM a) -&gt; (Blocked_ -&gt; NLM a) -&gt; NLM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-type">Blocked</span></a></span><span> </span><span id="local-6989586621681513858"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681513858"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; NLM a
</span><a href="#local-6989586621681513855"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681513858"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621681513859"><span class="annot"><span class="annottext">err :: Blocked_
</span><a href="#local-6989586621681513859"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-type">NotBlocked</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM a
forall a. Blocked_ -&gt; NLM a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681513859"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">data</span><span> </span><span id="NLMState"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-var">NLMState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NLMState"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-var">NLMState</span></a></span></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_nlmSub"><span class="annot"><span class="annottext">NLMState -&gt; Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var hs-var">_nlmSub</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_nlmEqs"><span class="annot"><span class="annottext">NLMState -&gt; PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var hs-var">_nlmEqs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#Null"><span class="hs-identifier hs-type">Null</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621681513872"><span class="annot"><span class="annottext">empty :: NLMState
</span><a href="#local-6989586621681513872"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_nlmSub :: Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_nlmEqs :: PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-93"></span><span>  </span><span id="local-6989586621681513876"><span class="annot"><span class="annottext">null :: NLMState -&gt; Bool
</span><a href="#local-6989586621681513876"><span class="hs-identifier hs-var hs-var hs-var hs-var">null</span></a></span></span><span> </span><span id="local-6989586621681513878"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513878"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513878"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Lens' NLMState Sub -&gt; Sub
forall o i. o -&gt; Lens' o i -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; f Sub) -&gt; NLMState -&gt; f NLMState
Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">PostponedEquations -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513878"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Lens' NLMState PostponedEquations -&gt; PostponedEquations
forall o i. o -&gt; Lens' o i -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(PostponedEquations -&gt; f PostponedEquations)
-&gt; NLMState -&gt; f NLMState
Lens' NLMState PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-type">nlmSub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span>
</span><span id="line-96"></span><span id="nlmSub"><span class="annot"><span class="annottext">nlmSub :: Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var hs-var">nlmSub</span></a></span></span><span> </span><span id="local-6989586621681513889"><span class="annot"><span class="annottext">Sub -&gt; f Sub
</span><a href="#local-6989586621681513889"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681513890"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513890"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub -&gt; f Sub
</span><a href="#local-6989586621681513889"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState -&gt; Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513890"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f Sub -&gt; (Sub -&gt; NLMState) -&gt; f NLMState
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681513892"><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681513892"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513890"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681513892"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-type">nlmEqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span>
</span><span id="line-99"></span><span id="nlmEqs"><span class="annot"><span class="annottext">nlmEqs :: Lens' NLMState PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var hs-var">nlmEqs</span></a></span></span><span> </span><span id="local-6989586621681513895"><span class="annot"><span class="annottext">PostponedEquations -&gt; f PostponedEquations
</span><a href="#local-6989586621681513895"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681513896"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513896"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations -&gt; f PostponedEquations
</span><a href="#local-6989586621681513895"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState -&gt; PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513896"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f PostponedEquations
-&gt; (PostponedEquations -&gt; NLMState) -&gt; f NLMState
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681513897"><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681513897"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513896"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681513897"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="local-6989586621681513054"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-type">runNLM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-type">MonadReduce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513054"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513054"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-102"></span><span id="runNLM"><span class="annot"><span class="annottext">runNLM :: forall (m :: * -&gt; *).
MonadReduce m =&gt;
NLM () -&gt; m (Either Blocked_ NLMState)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-var hs-var">runNLM</span></a></span></span><span> </span><span id="local-6989586621681513909"><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681513909"><span class="hs-identifier hs-var">nlm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681513910"><span class="annot"><span class="annottext">Either Blocked_ ()
</span><a href="#local-6989586621681513910"><span class="hs-identifier hs-var">ok</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681513911"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513911"><span class="hs-identifier hs-var">out</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReduceM (Either Blocked_ (), NLMState)
-&gt; m (Either Blocked_ (), NLMState)
forall a. ReduceM a -&gt; m a
forall (m :: * -&gt; *) a. MonadReduce m =&gt; ReduceM a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftReduce"><span class="hs-identifier hs-var">liftReduce</span></a></span><span> </span><span class="annot"><span class="annottext">(ReduceM (Either Blocked_ (), NLMState)
 -&gt; m (Either Blocked_ (), NLMState))
-&gt; ReduceM (Either Blocked_ (), NLMState)
-&gt; m (Either Blocked_ (), NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StateT NLMState ReduceM (Either Blocked_ ())
-&gt; NLMState -&gt; ReduceM (Either Blocked_ (), NLMState)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT Blocked_ (StateT NLMState ReduceM) ()
-&gt; StateT NLMState ReduceM (Either Blocked_ ())
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">(ExceptT Blocked_ (StateT NLMState ReduceM) ()
 -&gt; StateT NLMState ReduceM (Either Blocked_ ()))
-&gt; ExceptT Blocked_ (StateT NLMState ReduceM) ()
-&gt; StateT NLMState ReduceM (Either Blocked_ ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLM () -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) ()
forall a. NLM a -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) a
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#unNLM"><span class="hs-identifier hs-var">unNLM</span></a></span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681513909"><span class="hs-identifier hs-var">nlm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLMState
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ ()
</span><a href="#local-6989586621681513910"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681513913"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681513913"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState))
-&gt; Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Either Blocked_ NLMState
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681513913"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState))
-&gt; Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Either Blocked_ NLMState
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681513911"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-type">matchingBlocked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span id="matchingBlocked"><span class="annot"><span class="annottext">matchingBlocked :: Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var hs-var">matchingBlocked</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
forall a. Blocked_ -&gt; NLM a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- | Add substitution @i |-&gt; v : a@ to result of matching.</span></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-type">tellSub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span id="tellSub"><span class="annot"><span class="annottext">tellSub :: Relevance -&gt; Key -&gt; Type -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-var hs-var">tellSub</span></a></span></span><span> </span><span id="local-6989586621681513916"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513916"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681513917"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681513917"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681513918"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681513918"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681513919"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513919"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621681513920"><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><a href="#local-6989586621681513920"><span class="hs-identifier hs-var">old</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Sub -&gt; Maybe (Relevance, Term)
forall a. Key -&gt; IntMap a -&gt; Maybe a
</span><span class="hs-identifier hs-var">IntMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681513917"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; Maybe (Relevance, Term))
-&gt; NLM Sub -&gt; NLM (Maybe (Relevance, Term))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Lens' NLMState Sub -&gt; NLM Sub
forall o (m :: * -&gt; *) i. MonadState o m =&gt; Lens' o i -&gt; m i
</span><a href="Agda.Utils.Lens.html#use"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; f Sub) -&gt; NLMState -&gt; f NLMState
Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><a href="#local-6989586621681513920"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; f Sub) -&gt; NLMState -&gt; f NLMState
Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' NLMState Sub -&gt; (Sub -&gt; Sub) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' o i -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; (Relevance, Term) -&gt; Sub -&gt; Sub
forall a. Key -&gt; a -&gt; IntMap a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.insert</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681513917"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513916"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513919"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681513930"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513930"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681513931"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513931"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513916"><span class="hs-identifier hs-var">r</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall a. a -&gt; NLM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513930"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; f Sub) -&gt; NLMState -&gt; f NLMState
Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' NLMState Sub -&gt; (Sub -&gt; Sub) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' o i -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; (Relevance, Term) -&gt; Sub -&gt; Sub
forall a. Key -&gt; a -&gt; IntMap a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.insert</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681513917"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513916"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513919"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe Blocked_) -&gt; (Blocked_ -&gt; NLM ()) -&gt; NLM ()
forall (m :: * -&gt; *) a.
Monad m =&gt;
m (Maybe a) -&gt; (a -&gt; m ()) -&gt; m ()
</span><a href="Agda.Utils.Maybe.html#whenJustM"><span class="hs-identifier hs-var">whenJustM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; NLM (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var">equal</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681513918"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513919"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513931"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-type">tellEq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="tellEq"><span class="annot"><span class="annottext">tellEq :: Telescope -&gt; Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-var hs-var">tellEq</span></a></span></span><span> </span><span id="local-6989586621681513938"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513938"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681513939"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513939"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681513940"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681513940"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681513941"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513941"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681513942"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513942"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-125"></span><span>               </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;adding equality between&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513938"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513939"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513941"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513939"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513942"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">(PostponedEquations -&gt; f PostponedEquations)
-&gt; NLMState -&gt; f NLMState
Lens' NLMState PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' NLMState PostponedEquations
-&gt; (PostponedEquations -&gt; PostponedEquations) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' o i -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; PostponedEquation
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513939"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681513940"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513941"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681513942"><span class="hs-identifier hs-var">v</span></a></span><span class="annot"><span class="annottext">PostponedEquation -&gt; PostponedEquations -&gt; PostponedEquations
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">type</span><span> </span><span id="Sub"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | Matching against a term produces a constraint</span><span>
</span><span id="line-132"></span><span class="hs-comment">--   which we have to verify after applying</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   the substitution computed by matching.</span><span>
</span><span id="line-134"></span><span class="hs-keyword">data</span><span> </span><span id="PostponedEquation"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PostponedEquation"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="eqFreeVars"><span class="annot"><span class="annottext">PostponedEquation -&gt; Telescope
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqFreeVars"><span class="hs-identifier hs-var hs-var">eqFreeVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Telescope of free variables in the equation</span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqType"><span class="annot"><span class="annottext">PostponedEquation -&gt; Type
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqType"><span class="hs-identifier hs-var hs-var">eqType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Type of the equation, living in same context as the rhs.</span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqLhs"><span class="annot"><span class="annottext">PostponedEquation -&gt; Term
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqLhs"><span class="hs-identifier hs-var hs-var">eqLhs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Term from pattern, living in pattern context.</span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqRhs"><span class="annot"><span class="annottext">PostponedEquation -&gt; Term
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqRhs"><span class="hs-identifier hs-var hs-var">eqRhs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Term from scrutinee, living in context where matching was invoked.</span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-140"></span><span class="hs-keyword">type</span><span> </span><span id="PostponedEquations"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-var">PostponedEquations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-type">PostponedEquation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- | Match a non-linear pattern against a neutral term,</span><span>
</span><span id="line-143"></span><span class="hs-comment">--   returning a substitution.</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">class</span><span> </span><span id="Match"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-var">Match</span></a></span></span><span> </span><span id="local-6989586621681513101"><span class="annot"><a href="#local-6989586621681513101"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621681513100"><span class="annot"><a href="#local-6989586621681513100"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="match"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-type">match</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Are we currently matching in an irrelevant context?</span></span><span>
</span><span id="line-147"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The telescope of pattern variables</span></span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The telescope of lambda-bound variables</span></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#TypeOf"><span class="hs-identifier hs-type">TypeOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513100"><span class="hs-identifier hs-type">b</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ The type of the pattern</span></span><span>
</span><span id="line-150"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513101"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The pattern to match</span></span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513100"><span class="hs-identifier hs-type">b</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The term to be matched against the pattern</span></span><span>
</span><span id="line-152"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681513102"><span id="local-6989586621681513103"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513102"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513103"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513103"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621681513964"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Arg b)
-&gt; Arg a
-&gt; Arg b
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681513965"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513965"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681513966"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513966"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681513967"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513967"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681513968"><span class="annot"><span class="annottext">TypeOf (Arg b)
</span><a href="#local-6989586621681513968"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681513969"><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681513969"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681513970"><span class="annot"><span class="annottext">Arg b
</span><a href="#local-6989586621681513970"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681513971"><span class="annot"><span class="annottext">r' :: Relevance
</span><a href="#local-6989586621681513971"><span class="hs-identifier hs-var hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513965"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Relevance
</span><a href="Agda.Syntax.Common.html#composeRelevance"><span class="hs-operator hs-var">`composeRelevance`</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a -&gt; Relevance
forall a. LensRelevance a =&gt; a -&gt; Relevance
</span><a href="Agda.Syntax.Common.html#getRelevance"><span class="hs-identifier hs-var">getRelevance</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681513969"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-156"></span><span>                          </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681513971"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513966"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681513967"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom' Term (TypeOf b) -&gt; TypeOf b
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf (Arg b)
Dom' Term (TypeOf b)
</span><a href="#local-6989586621681513968"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg a -&gt; a
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681513969"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg b -&gt; b
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg b
</span><a href="#local-6989586621681513970"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Elim%27"><span class="hs-identifier hs-type">Elim'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621681514099"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514100"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514100"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514101"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514101"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514102"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514102"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514103"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514103"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514104"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514104"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall a. a -&gt; NLM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681514105"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514105"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514106"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514106"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514107"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514107"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514108"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514108"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514109"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514109"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681514111"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514111"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514112"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514112"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514113"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514113"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514114"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514114"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514115"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514115"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681514116"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514117"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514118"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514119"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514119"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514120"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514120"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514121"><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681514121"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681514122"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514122"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514123"><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681514123"><span class="hs-identifier hs-var">v</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681514124"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514124"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">50</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-164"></span><span>     </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching elimination &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Elim' NLPat -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681514121"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with               &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Elim -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681514123"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  eliminating head   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCMT IO Doc) -&gt; Term -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514120"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514119"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514125"><span class="annot"><span class="annottext">no :: NLM ()
</span><a href="#local-6989586621681514125"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681514121"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681514123"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621681514127"><span class="annot"><span class="annottext">Arg NLPat
</span><a href="#local-6989586621681514127"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621681514128"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514128"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Term -&gt; NLM Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; NLM Type -&gt; NLM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514119"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM Term -&gt; (Term -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-171"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514132"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514132"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514133"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514133"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-172"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Arg Term)
-&gt; Arg NLPat
-&gt; Arg Term
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf (Arg Term)
Dom Type
</span><a href="#local-6989586621681514132"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Arg NLPat
</span><a href="#local-6989586621681514127"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514128"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514134"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681514134"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; SubstArg Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-identifier hs-var">absApp</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514133"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514128"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>            </span><span id="local-6989586621681514136"><span class="annot"><span class="annottext">hd' :: Elims -&gt; Term
</span><a href="#local-6989586621681514136"><span class="hs-identifier hs-var hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514120"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; (Elims -&gt; Elims) -&gt; Elims -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514128"><span class="hs-identifier hs-var">v</span></a></span><span class="annot"><span class="annottext">Elim -&gt; Elims -&gt; Elims
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514134"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514136"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514122"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514124"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span id="local-6989586621681514138"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514138"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span>
</span><span id="line-177"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;application at non-pi type (possible non-confluence?) &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514138"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. NLM a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621681514141"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514141"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681514142"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514142"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621681514143"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514143"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621681514144"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514144"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681514145"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514145"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681514146"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514146"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM PathView -&gt; NLM PathView
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; NLM PathView
forall (m :: * -&gt; *). HasBuiltins m =&gt; Type -&gt; m PathView
</span><a href="Agda.TypeChecking.Monad.Builtin.html#pathView"><span class="hs-identifier hs-var">pathView</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NLM PathView) -&gt; NLM Type -&gt; NLM PathView
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514119"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM PathView -&gt; (PathView -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#PathType"><span class="hs-identifier hs-type">PathType</span></a></span><span> </span><span id="local-6989586621681514150"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514150"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681514151"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514151"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621681514152"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514152"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681514153"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514153"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681514154"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514154"><span class="hs-identifier hs-var">_u</span></a></span></span><span> </span><span id="local-6989586621681514155"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514155"><span class="hs-identifier hs-var">_v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-181"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681514156"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514156"><span class="hs-identifier hs-var">interval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr NLM Type -&gt; NLM (Either TCErr Type)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr NLM Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Type
</span><a href="Agda.TypeChecking.Primitive.Cubical.Base.html#primIntervalType"><span class="hs-identifier hs-var">primIntervalType</span></a></span><span>
</span><span id="line-182"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf Term
Type
</span><a href="#local-6989586621681514156"><span class="hs-identifier hs-var">interval</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514143"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514146"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-183"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514158"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681514158"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514150"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; Term -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681514153"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514146"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514162"><span class="annot"><span class="annottext">hd' :: Elims -&gt; Term
</span><a href="#local-6989586621681514162"><span class="hs-identifier hs-var hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514120"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; (Elims -&gt; Elims) -&gt; Elims -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term -&gt; Elim
forall a. a -&gt; a -&gt; a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-var">IApply</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514144"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514145"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514146"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Elim -&gt; Elims -&gt; Elims
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514158"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514162"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514122"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514124"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-186"></span><span>      </span><span id="local-6989586621681514163"><span class="annot"><span class="annottext">PathView
</span><a href="#local-6989586621681514163"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;interval application at non-pi type (possible non-confluence?) &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PathView -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#pathUnview"><span class="hs-identifier hs-var">pathUnview</span></a></span><span> </span><span class="annot"><span class="annottext">PathView
</span><a href="#local-6989586621681514163"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. NLM a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span id="local-6989586621681514166"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681514166"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621681514167"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514167"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span id="local-6989586621681514168"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681514168"><span class="hs-identifier hs-var">o'</span></a></span></span><span> </span><span id="local-6989586621681514169"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514169"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514167"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514169"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-190"></span><span>      </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Maybe Type) -&gt; NLM (Maybe Type)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Type -&gt; NLM (Maybe Type)
forall (m :: * -&gt; *). PureTCM m =&gt; QName -&gt; Type -&gt; m (Maybe Type)
</span><a href="Agda.TypeChecking.Records.html#getDefType"><span class="hs-identifier hs-var">getDefType</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514167"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NLM (Maybe Type)) -&gt; NLM Type -&gt; NLM (Maybe Type)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514119"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe Type) -&gt; (Maybe Type -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514171"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514171"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514172"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514172"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-192"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514173"><span class="annot"><span class="annottext">u :: Term
</span><a href="#local-6989586621681514173"><span class="hs-identifier hs-var hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514120"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>              </span><span id="local-6989586621681514174"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681514174"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514172"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; SubstArg Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-operator hs-var">`absApp`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
SubstArg Type
</span><a href="#local-6989586621681514173"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-194"></span><span>          </span><span id="local-6989586621681514175"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514175"><span class="hs-identifier hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term))
-&gt; NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-identifier hs-var">applyE</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Elims -&gt; Term) -&gt; NLM Term -&gt; NLM (Elims -&gt; Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Arg Term -&gt; NLM Term
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
ProjOrigin -&gt; QName -&gt; Arg Term -&gt; m Term
</span><a href="Agda.TypeChecking.Monad.Signature.html#applyDef"><span class="hs-identifier hs-var">applyDef</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681514166"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514167"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Arg Type
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514171"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Term -&gt; Arg Term
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514173"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514116"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514117"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514174"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681514175"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514122"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514124"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><span class="annottext">Maybe Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514125"><span class="hs-identifier hs-var">no</span></a></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681514180"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514180"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681514181"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514181"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between projections &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514180"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514181"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. NLM a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514125"><span class="hs-identifier hs-var">no</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514125"><span class="hs-identifier hs-var">no</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elim
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681513160"><span id="local-6989586621681513161"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513160"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513161"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513160"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513161"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621681514187"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Dom b)
-&gt; Dom a
-&gt; Dom b
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514188"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514188"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514189"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514189"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514190"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514190"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681514191"><span class="annot"><span class="annottext">TypeOf (Dom b)
</span><a href="#local-6989586621681514191"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681514192"><span class="annot"><span class="annottext">Dom a
</span><a href="#local-6989586621681514192"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681514193"><span class="annot"><span class="annottext">Dom b
</span><a href="#local-6989586621681514193"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514188"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514189"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514190"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf b
TypeOf (Dom b)
</span><a href="#local-6989586621681514191"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom a -&gt; a
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom a
</span><a href="#local-6989586621681514192"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom b -&gt; b
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom b
</span><a href="#local-6989586621681514193"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPType"><span class="hs-identifier hs-type">NLPType</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621681514203"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Type
-&gt; NLPType
-&gt; Type
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514204"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514204"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514205"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514205"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514206"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514206"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOf Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPType"><span class="hs-identifier hs-type">NLPType</span></a></span><span> </span><span id="local-6989586621681514208"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514208"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span id="local-6989586621681514209"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514209"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span id="local-6989586621681514210"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514210"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681514211"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514211"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasOptions m, MonadDebug m) =&gt;
m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Modality.html#workOnTypes"><span class="hs-identifier hs-var">workOnTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Sort
-&gt; NLPSort
-&gt; Sort
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514204"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514205"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514206"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514208"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514210"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514204"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514205"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514206"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#sort"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514210"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514209"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514211"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPSort"><span class="hs-identifier hs-type">NLPSort</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621681514248"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Sort
-&gt; NLPSort
-&gt; Sort
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514249"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514249"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514250"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514250"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514251"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514251"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOf Sort
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681514252"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514252"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681514253"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514253"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621681514254"><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681514254"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Blocked Sort) -&gt; NLM (Blocked Sort)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514251"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Blocked Sort) -&gt; NLM (Blocked Sort))
-&gt; NLM (Blocked Sort) -&gt; NLM (Blocked Sort)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; NLM (Blocked Sort)
forall a (m :: * -&gt; *).
(Reduce a, MonadReduce m) =&gt;
a -&gt; m (Blocked a)
</span><a href="Agda.TypeChecking.Reduce.html#reduceB"><span class="hs-identifier hs-var">reduceB</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514253"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514256"><span class="annot"><span class="annottext">b :: Blocked_
</span><a href="#local-6989586621681514256"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked Sort -&gt; Blocked_
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681514254"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621681514257"><span class="annot"><span class="annottext">s :: Sort
</span><a href="#local-6989586621681514257"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked Sort -&gt; Sort
forall t a. Blocked' t a -&gt; a
</span><a href="Agda.Syntax.Internal.Blockers.html#ignoreBlocking"><span class="hs-identifier hs-var">ignoreBlocking</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681514254"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-222"></span><span>        </span><span id="local-6989586621681514262"><span class="annot"><span class="annottext">yes :: NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var hs-var">yes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall a. a -&gt; NLM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>        </span><span id="local-6989586621681514263"><span class="annot"><span class="annottext">no :: NLM ()
</span><a href="#local-6989586621681514263"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-225"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching pattern &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514250"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514251"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NLPSort -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514252"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with sort      &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514251"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Sort -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514257"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514252"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514257"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PUniv"><span class="hs-identifier hs-type">PUniv</span></a></span><span> </span><span id="local-6989586621681514265"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514265"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681514266"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514266"><span class="hs-identifier hs-var">lp</span></a></span></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Univ"><span class="hs-identifier hs-type">Univ</span></a></span><span> </span><span id="local-6989586621681514268"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514268"><span class="hs-identifier hs-var">u'</span></a></span></span><span> </span><span id="local-6989586621681514269"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681514269"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514265"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Univ -&gt; Univ -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514268"><span class="hs-identifier hs-var">u'</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Level' Term)
-&gt; NLPat
-&gt; Level' Term
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514249"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514250"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514251"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514266"><span class="hs-identifier hs-var">lp</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681514269"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PInf"><span class="hs-identifier hs-type">PInf</span></a></span><span> </span><span id="local-6989586621681514271"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514271"><span class="hs-identifier hs-var">up</span></a></span></span><span> </span><span id="local-6989586621681514272"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681514272"><span class="hs-identifier hs-var">np</span></a></span></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Inf"><span class="hs-identifier hs-type">Inf</span></a></span><span> </span><span id="local-6989586621681514274"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514274"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681514275"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681514275"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514271"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">Univ -&gt; Univ -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621681514274"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681514272"><span class="hs-identifier hs-var">np</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681514275"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PSizeUniv"><span class="hs-identifier hs-var">PSizeUniv</span></a></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PLockUniv"><span class="hs-identifier hs-var">PLockUniv</span></a></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#LockUniv"><span class="hs-identifier hs-var">LockUniv</span></a></span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PLevelUniv"><span class="hs-identifier hs-var">PLevelUniv</span></a></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#LevelUniv"><span class="hs-identifier hs-var">LevelUniv</span></a></span><span class="hs-special">)</span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PIntervalUniv"><span class="hs-identifier hs-var">PIntervalUniv</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#IntervalUniv"><span class="hs-identifier hs-var">IntervalUniv</span></a></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514262"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-comment">-- blocked cases</span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-type">UnivSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514256"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-type">PiSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514256"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-type">FunSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514256"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-239"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-type">MetaS</span></a></span><span> </span><span id="local-6989586621681514288"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681514288"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocked_
forall t. MetaId -&gt; Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#blocked_"><span class="hs-identifier hs-var">blocked_</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681514288"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-comment">-- all other cases do not match</span><span>
</span><span id="line-242"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514263"><span class="hs-identifier hs-var">no</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span id="local-6989586621681514300"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Level' Term)
-&gt; NLPat
-&gt; Level' Term
-&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514301"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514301"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681514302"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514302"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514303"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514303"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOf (Level' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681514304"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514304"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681514305"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681514305"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-246"></span><span>    </span><span id="local-6989586621681514306"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514306"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; (Maybe Term -&gt; Term) -&gt; Maybe Term -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Type) -&gt; NLM (Maybe Term) -&gt; NLM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BuiltinId -&gt; NLM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; BuiltinId -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltin%27"><span class="hs-identifier hs-var">getBuiltin'</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinId
</span><a href="Agda.Syntax.Builtin.html#builtinLevel"><span class="hs-identifier hs-var">builtinLevel</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621681514311"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514311"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Level' Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Level' Term -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier hs-var">reallyUnLevelView</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681514305"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514301"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514302"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514303"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf Term
Type
</span><a href="#local-6989586621681514306"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514304"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514311"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>  </span><span id="local-6989586621681514579"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681514580"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514580"><span class="hs-identifier hs-var">r0</span></a></span></span><span> </span><span id="local-6989586621681514581"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514582"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681514583"><span class="annot"><span class="annottext">TypeOf Term
</span><a href="#local-6989586621681514583"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681514584"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514584"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681514585"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514585"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621681514586"><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681514586"><span class="hs-identifier hs-var">vbt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type)))
-&gt; NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Term, Type) -&gt; NLM (Blocked (Term, Type))
forall a (m :: * -&gt; *).
(Reduce a, MonadReduce m) =&gt;
a -&gt; m (Blocked a)
</span><a href="Agda.TypeChecking.Reduce.html#reduceB"><span class="hs-identifier hs-var">reduceB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514585"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TypeOf Term
Type
</span><a href="#local-6989586621681514583"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514587"><span class="annot"><span class="annottext">n :: Key
</span><a href="#local-6989586621681514587"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-254"></span><span>        </span><span id="local-6989586621681514589"><span class="annot"><span class="annottext">b :: Blocked_
</span><a href="#local-6989586621681514589"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type) -&gt; Blocked_
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681514586"><span class="hs-identifier hs-var">vbt</span></a></span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681514590"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681514591"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type) -&gt; (Term, Type)
forall t a. Blocked' t a -&gt; a
</span><a href="Agda.Syntax.Internal.Blockers.html#ignoreBlocking"><span class="hs-identifier hs-var">ignoreBlocking</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681514586"><span class="hs-identifier hs-var">vbt</span></a></span><span>
</span><span id="line-256"></span><span>        </span><span id="local-6989586621681514592"><span class="annot"><span class="annottext">prettyPat :: TCMT IO Doc
</span><a href="#local-6989586621681514592"><span class="hs-identifier hs-var hs-var">prettyPat</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPat -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NLPat -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514584"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>        </span><span id="local-6989586621681514594"><span class="annot"><span class="annottext">prettyTerm :: TCMT IO Doc
</span><a href="#local-6989586621681514594"><span class="hs-identifier hs-var hs-var">prettyTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span id="local-6989586621681514595"><span class="annot"><span class="annottext">prettyType :: TCMT IO Doc
</span><a href="#local-6989586621681514595"><span class="hs-identifier hs-var hs-var">prettyType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621681514596"><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681514596"><span class="hs-identifier hs-var">etaRecord</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args)))
-&gt; NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM (Maybe (QName, Args))
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
Type -&gt; m (Maybe (QName, Args))
</span><a href="Agda.TypeChecking.Records.html#isEtaRecordType"><span class="hs-identifier hs-var">isEtaRecordType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621681514598"><span class="annot"><span class="annottext">Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type
</span><a href="#local-6989586621681514598"><span class="hs-identifier hs-var">pview</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NLM (Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
m (Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type)
</span><a href="Agda.TypeChecking.Telescope.html#pathViewAsPi%27whnf"><span class="hs-identifier hs-var">pathViewAsPi'whnf</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span id="local-6989586621681514600"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681514600"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Blocker -&gt; Bool) -&gt; Either Blocker Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; Either a b -&gt; b
</span><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-var">fromRight</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Either Blocker Bool -&gt; Bool)
-&gt; (BlockT NLM Bool -&gt; NLM (Either Blocker Bool))
-&gt; BlockT NLM Bool
-&gt; NLM Bool
forall (m :: * -&gt; *) b c a.
Functor m =&gt;
(b -&gt; c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><a href="Agda.Utils.Functor.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlockT NLM Bool -&gt; NLM (Either Blocker Bool)
forall (m :: * -&gt; *) a.
Monad m =&gt;
BlockT m a -&gt; m (Either Blocker a)
</span><a href="Agda.TypeChecking.Monad.Base.html#runBlocked"><span class="hs-identifier hs-var">runBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockT NLM Bool -&gt; NLM (Either Blocker Bool))
-&gt; (BlockT NLM Bool -&gt; BlockT NLM Bool)
-&gt; BlockT NLM Bool
-&gt; NLM (Either Blocker Bool)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; BlockT NLM Bool -&gt; BlockT NLM Bool
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockT NLM Bool -&gt; NLM Bool) -&gt; BlockT NLM Bool -&gt; NLM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; BlockT NLM Bool
forall a (m :: * -&gt; *).
(LensSort a, PrettyTCM a, PureTCM m, MonadBlock m) =&gt;
a -&gt; m Bool
</span><a href="Agda.TypeChecking.Irrelevance.html#isPropM"><span class="hs-identifier hs-var">isPropM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514604"><span class="annot"><span class="annottext">r :: Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681514600"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514580"><span class="hs-identifier hs-var">r0</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching pattern &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514592"><span class="hs-identifier hs-var">prettyPat</span></a></span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with term      &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514594"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span>
</span><span id="line-266"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  of type        &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514595"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">80</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw pattern:  &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPat -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514584"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw term:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw type:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">70</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-272"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pattern vars:   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-273"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;bound vars:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514612"><span class="annot"><span class="annottext">yes :: NLM ()
</span><a href="#local-6989586621681514612"><span class="hs-identifier hs-var hs-var">yes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall a. a -&gt; NLM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>        </span><span id="local-6989586621681514613"><span class="annot"><span class="annottext">no :: TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span> </span><span id="local-6989586621681514614"><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514614"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514612"><span class="hs-identifier hs-var">yes</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-276"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-277"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514592"><span class="hs-identifier hs-var">prettyPat</span></a></span><span>
</span><span id="line-278"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514594"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span>
</span><span id="line-279"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; of type &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514595"><span class="hs-identifier hs-var">prettyType</span></a></span><span>
</span><span id="line-280"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681514614"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking tag from reduction: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514589"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-283"></span><span>          </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514589"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-284"></span><span>        </span><span id="local-6989586621681514615"><span class="annot"><span class="annottext">block :: Blocked_ -&gt; NLM ()
</span><a href="#local-6989586621681514615"><span class="hs-identifier hs-var hs-var">block</span></a></span></span><span> </span><span id="local-6989586621681514616"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514616"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681514612"><span class="hs-identifier hs-var">yes</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-286"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching blocked on meta&quot;</span></span><span>
</span><span id="line-287"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514616"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-288"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-289"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking tag from reduction: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514616"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>          </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514589"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Blocked_ -&gt; Blocked_
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514616"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>        </span><span id="local-6989586621681514617"><span class="annot"><span class="annottext">maybeBlock :: Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var hs-var">maybeBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-292"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621681514619"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681514619"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681514620"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514620"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocked_
forall t. MetaId -&gt; Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#blocked_"><span class="hs-identifier hs-var">blocked_</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681514619"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-293"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514584"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-295"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PVar"><span class="hs-identifier hs-type">PVar</span></a></span><span> </span><span id="local-6989586621681514622"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514622"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681514623"><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681514623"><span class="hs-identifier hs-var">bvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PVar: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514622"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681514624"><span class="hs-identifier hs-type">allowedVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span>
</span><span id="line-297"></span><span>            </span><span id="local-6989586621681514624"><span class="annot"><span class="annottext">allowedVars :: IntSet
</span><a href="#local-6989586621681514624"><span class="hs-identifier hs-var hs-var">allowedVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Key -&gt; Key) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Key -&gt; Key
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681514623"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><a href="#local-6989586621681514626"><span class="hs-identifier hs-type">badVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span>
</span><span id="line-299"></span><span>            </span><span id="local-6989586621681514626"><span class="annot"><span class="annottext">badVars :: IntSet
</span><a href="#local-6989586621681514626"><span class="hs-identifier hs-var hs-var">badVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.difference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Key] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; [Key]
forall a. Integral a =&gt; a -&gt; [a]
</span><a href="Agda.Utils.List.html#downFrom"><span class="hs-identifier hs-var">downFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514587"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681514624"><span class="hs-identifier hs-var">allowedVars</span></a></span><span>
</span><span id="line-300"></span><span>            </span><span class="annot"><a href="#local-6989586621681514629"><span class="hs-identifier hs-type">perm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#Permutation"><span class="hs-identifier hs-type">Permutation</span></a></span><span>
</span><span id="line-301"></span><span>            </span><span id="local-6989586621681514629"><span class="annot"><span class="annottext">perm :: Permutation
</span><a href="#local-6989586621681514629"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Key] -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier hs-var">Perm</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514587"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([Key] -&gt; Permutation) -&gt; [Key] -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; [Key]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Key] -&gt; [Key]) -&gt; [Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Key -&gt; Key) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Key -&gt; Key
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Key] -&gt; [Key]) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681514623"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-302"></span><span>            </span><span class="annot"><a href="#local-6989586621681514632"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>
</span><span id="line-303"></span><span>            </span><span id="local-6989586621681514632"><span class="annot"><span class="annottext">tel :: Telescope
</span><a href="#local-6989586621681514632"><span class="hs-identifier hs-var hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Telescope -&gt; Telescope
</span><a href="Agda.TypeChecking.Telescope.html#permuteTel"><span class="hs-identifier hs-var">permuteTel</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681514629"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span id="local-6989586621681514634"><span class="annot"><span class="annottext">Either Blocked_ (Maybe Term)
</span><a href="#local-6989586621681514634"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Either Blocked_ (Maybe Term))
-&gt; NLM (Either Blocked_ (Maybe Term))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Either Blocked_ (Maybe Term))
 -&gt; NLM (Either Blocked_ (Maybe Term)))
-&gt; NLM (Either Blocked_ (Maybe Term))
-&gt; NLM (Either Blocked_ (Maybe Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; Term -&gt; NLM (Either Blocked_ (Maybe Term))
forall (m :: * -&gt; *) a.
(MonadReduce m, Reduce a, ForceNotFree a) =&gt;
IntSet -&gt; a -&gt; m (Either Blocked_ (Maybe a))
</span><a href="Agda.TypeChecking.Free.Reduce.html#reallyFree"><span class="hs-identifier hs-var">reallyFree</span></a></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681514626"><span class="hs-identifier hs-var">badVars</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ (Maybe Term)
</span><a href="#local-6989586621681514634"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-306"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681514636"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514636"><span class="hs-identifier hs-var">b</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="#local-6989586621681514615"><span class="hs-identifier hs-var">block</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514636"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-307"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-308"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681514637"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514637"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-309"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514638"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681514638"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#telePi"><span class="hs-identifier hs-var">telePi</span></a></span><span>  </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514632"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Permutation -&gt; Type -&gt; Type
forall a. Subst a =&gt; Impossible -&gt; Permutation -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#renameP"><span class="hs-identifier hs-var">renameP</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681514629"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-310"></span><span>                </span><span id="local-6989586621681514642"><span class="annot"><span class="annottext">v' :: Term
</span><a href="#local-6989586621681514642"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
</span><a href="Agda.TypeChecking.Substitute.html#teleLam"><span class="hs-identifier hs-var">teleLam</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514632"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Permutation -&gt; Term -&gt; Term
forall a. Subst a =&gt; Impossible -&gt; Permutation -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#renameP"><span class="hs-identifier hs-var">renameP</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681514629"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514637"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-311"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Key -&gt; Type -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-var">tellSub</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514622"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514587"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514638"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514642"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-type">PDef</span></a></span><span> </span><span id="local-6989586621681514645"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681514646"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PDef: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-314"></span><span>        </span><span id="local-6989586621681514647"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514647"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Term -&gt; NLM Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Term -&gt; NLM Term) -&gt; NLM Term -&gt; NLM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Reduce.Monad.html#constructorForm"><span class="hs-identifier hs-var">constructorForm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLM Term) -&gt; NLM Term -&gt; NLM Term
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#unLevel"><span class="hs-identifier hs-var">unLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-315"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514647"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-316"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621681514651"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514651"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621681514652"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514652"><span class="hs-identifier hs-var">es</span></a></span></span><span>
</span><span id="line-317"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514651"><span class="hs-identifier hs-var">f'</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>                </span><span id="local-6989586621681514653"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514653"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Type -&gt; NLM Type
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Type -&gt; NLM Type) -&gt; NLM Type -&gt; NLM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; NLM Definition -&gt; NLM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-319"></span><span>                </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514653"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514652"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-320"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621681514657"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514657"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681514658"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514658"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621681514659"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514659"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514657"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>                </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514657"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe ((QName, Type, Args), Type))
-&gt; (Maybe ((QName, Type, Args), Type) -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-323"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514662"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514662"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514662"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514657"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514658"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514659"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-324"></span><span>                  </span><span class="annot"><span class="annottext">Maybe ((QName, Type, Args), Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-325"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514663"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514663"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514664"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514664"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-326"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514665"><span class="annot"><span class="annottext">ai :: ArgInfo
</span><a href="#local-6989586621681514665"><span class="hs-identifier hs-var hs-var">ai</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514663"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-327"></span><span>                </span><span id="local-6989586621681514667"><span class="annot"><span class="annottext">pbody :: NLPat
</span><a href="#local-6989586621681514667"><span class="hs-identifier hs-var hs-var">pbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-var">PDef</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim' NLPat] -&gt; NLPat) -&gt; [Elim' NLPat] -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; Arg NLPat -&gt; Elim' NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; NLPat -&gt; Arg NLPat
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681514665"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(NLPat -&gt; Arg NLPat) -&gt; NLPat -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-var">PTerm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLPat) -&gt; Term -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-328"></span><span>                </span><span id="local-6989586621681514672"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681514672"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514647"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514663"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span>                </span><span id="local-6989586621681514673"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681514673"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514663"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514664"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>            </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514673"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514664"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514667"><span class="hs-identifier hs-var">pbody</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514672"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-331"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514678"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514678"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514679"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514679"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681514596"><span class="hs-identifier hs-var">etaRecord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-332"></span><span>          </span><span class="hs-comment">-- If v is not of record constructor form but we are matching at record</span><span>
</span><span id="line-333"></span><span>          </span><span class="hs-comment">-- type, e.g., we eta-expand both v to (c vs) and</span><span>
</span><span id="line-334"></span><span>          </span><span class="hs-comment">-- the pattern (p = PDef f ps) to @c (p .f1) ... (p .fn)@.</span><span>
</span><span id="line-335"></span><span>            </span><span id="local-6989586621681514680"><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514680"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Defn -&gt; NLM Defn
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Defn -&gt; NLM Defn) -&gt; NLM Defn -&gt; NLM Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Defn) -&gt; NLM Definition -&gt; NLM Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514678"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681514682"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514682"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514683"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514683"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514684"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514684"><span class="hs-identifier hs-var">ci</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514685"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514685"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Telescope, ConHead, ConInfo, Args)
 -&gt; NLM (Telescope, ConHead, ConInfo, Args))
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; m (Telescope, ConHead, ConInfo, Args)
</span><a href="Agda.TypeChecking.Records.html#etaExpandRecord_"><span class="hs-identifier hs-var">etaExpandRecord_</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514678"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514679"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514680"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514647"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-337"></span><span>            </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514683"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe ((QName, Type, Args), Type))
-&gt; (Maybe ((QName, Type, Args), Type) -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-338"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514687"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514687"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-339"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514688"><span class="annot"><span class="annottext">flds :: [Arg QName]
</span><a href="#local-6989586621681514688"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">([Dom QName] -&gt; [Arg QName]) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">recFields</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514680"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-340"></span><span>                    </span><span id="local-6989586621681514690"><span class="annot"><span class="annottext">mkField :: QName -&gt; NLPat
</span><a href="#local-6989586621681514690"><span class="hs-identifier hs-var hs-var">mkField</span></a></span></span><span> </span><span id="local-6989586621681514691"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514691"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-var">PDef</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' NLPat
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514691"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>                    </span><span class="hs-comment">-- Issue #3335: when matching against the record constructor,</span><span>
</span><span id="line-342"></span><span>                    </span><span class="hs-comment">-- don't add projections but take record field directly.</span><span>
</span><span id="line-343"></span><span>                    </span><span id="local-6989586621681514693"><span class="annot"><span class="annottext">ps' :: [Elim' NLPat]
</span><a href="#local-6989586621681514693"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>
</span><span id="line-344"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514683"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514645"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514646"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-345"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; Elim' NLPat) -&gt; [Arg QName] -&gt; [Elim' NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat)
-&gt; (Arg QName -&gt; Arg NLPat) -&gt; Arg QName -&gt; Elim' NLPat
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLPat
</span><a href="#local-6989586621681514690"><span class="hs-identifier hs-var">mkField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681514688"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-346"></span><span>                </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514687"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514683"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514684"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514693"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514685"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>              </span><span class="annot"><span class="annottext">Maybe ((QName, Type, Args), Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-348"></span><span>          </span><span id="local-6989586621681514694"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514694"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514694"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PLam"><span class="hs-identifier hs-type">PLam</span></a></span><span> </span><span id="local-6989586621681514696"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681514696"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681514697"><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681514697"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514698"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514698"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514699"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514699"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514700"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681514700"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681514696"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-352"></span><span>              </span><span id="local-6989586621681514701"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681514701"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514698"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514699"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514701"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514699"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPat -&gt; NLPat
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681514697"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514700"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-354"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681514702"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514702"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681514703"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514703"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621681514704"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514704"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681514705"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514705"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type
</span><a href="#local-6989586621681514598"><span class="hs-identifier hs-var">pview</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514706"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681514706"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term -&gt; Elim
forall a. a -&gt; a -&gt; a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-var">IApply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514704"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514705"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Elim) -&gt; Term -&gt; Elim
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-356"></span><span>              </span><span id="local-6989586621681514707"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681514707"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514702"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514707"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514703"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPat -&gt; NLPat
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681514697"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514706"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span id="local-6989586621681514708"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514708"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514708"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-359"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PPi"><span class="hs-identifier hs-type">PPi</span></a></span><span> </span><span id="local-6989586621681514710"><span class="annot"><span class="annottext">Dom NLPType
</span><a href="#local-6989586621681514710"><span class="hs-identifier hs-var">pa</span></a></span></span><span> </span><span id="local-6989586621681514711"><span class="annot"><span class="annottext">Abs NLPType
</span><a href="#local-6989586621681514711"><span class="hs-identifier hs-var">pb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-360"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514712"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514712"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514713"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514713"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-361"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf (Dom Type)
-&gt; Dom NLPType
-&gt; Dom Type
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Dom NLPType
</span><a href="#local-6989586621681514710"><span class="hs-identifier hs-var">pa</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514712"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-362"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514714"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681514714"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514712"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514713"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Type
-&gt; NLPType
-&gt; Type
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514714"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPType -&gt; NLPType
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPType
</span><a href="#local-6989586621681514711"><span class="hs-identifier hs-var">pb</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514713"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>        </span><span id="local-6989586621681514715"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514715"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514715"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-365"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PSort"><span class="hs-identifier hs-type">PSort</span></a></span><span> </span><span id="local-6989586621681514717"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514717"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-366"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span id="local-6989586621681514719"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514719"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Sort
-&gt; NLPSort
-&gt; Sort
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681514717"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681514719"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span id="local-6989586621681514720"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514720"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514720"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-368"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-type">PBoundVar</span></a></span><span> </span><span id="local-6989586621681514722"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681514723"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514723"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-369"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681514725"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514725"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span id="local-6989586621681514726"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514726"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514725"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-370"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514727"><span class="annot"><span class="annottext">ti :: Type
</span><a href="#local-6989586621681514727"><span class="hs-identifier hs-var hs-var">ti</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Type) -&gt; Dom Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; [Dom Type] -&gt; Key -&gt; Dom Type
forall a. a -&gt; [a] -&gt; Key -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; [Dom Type]
forall a. TermSubst a =&gt; Tele (Dom a) -&gt; [Dom a]
</span><a href="Agda.TypeChecking.Telescope.html#flattenTel"><span class="hs-identifier hs-var">flattenTel</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-371"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514727"><span class="hs-identifier hs-var">ti</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514723"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681514726"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-372"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681514730"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514730"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514731"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514731"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-373"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514732"><span class="annot"><span class="annottext">ai :: ArgInfo
</span><a href="#local-6989586621681514732"><span class="hs-identifier hs-var hs-var">ai</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514730"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-374"></span><span>              </span><span id="local-6989586621681514733"><span class="annot"><span class="annottext">pbody :: NLPat
</span><a href="#local-6989586621681514733"><span class="hs-identifier hs-var hs-var">pbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-var">PBoundVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Elim' NLPat] -&gt; NLPat) -&gt; [Elim' NLPat] -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514723"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; Arg NLPat -&gt; Elim' NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; NLPat -&gt; Arg NLPat
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681514732"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(NLPat -&gt; Arg NLPat) -&gt; NLPat -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-var">PTerm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLPat) -&gt; Term -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-375"></span><span>              </span><span id="local-6989586621681514735"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681514735"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681514732"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-376"></span><span>              </span><span id="local-6989586621681514736"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681514736"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681514730"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514731"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; TypeOf Term -&gt; NLPat -&gt; Term -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514736"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681514731"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681514733"><span class="hs-identifier hs-var">pbody</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514735"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-378"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681514737"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514737"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514738"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514738"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681514596"><span class="hs-identifier hs-var">etaRecord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-379"></span><span>          </span><span id="local-6989586621681514739"><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514739"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Defn -&gt; NLM Defn
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Defn -&gt; NLM Defn) -&gt; NLM Defn -&gt; NLM Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Defn) -&gt; NLM Definition -&gt; NLM Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514737"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-380"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681514740"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514740"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514741"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514741"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514742"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514742"><span class="hs-identifier hs-var">ci</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514743"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514743"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Telescope, ConHead, ConInfo, Args)
 -&gt; NLM (Telescope, ConHead, ConInfo, Args))
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; m (Telescope, ConHead, ConInfo, Args)
</span><a href="Agda.TypeChecking.Records.html#etaExpandRecord_"><span class="hs-identifier hs-var">etaExpandRecord_</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514737"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514738"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514739"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-381"></span><span>          </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514741"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe ((QName, Type, Args), Type))
-&gt; (Maybe ((QName, Type, Args), Type) -&gt; NLM ()) -&gt; NLM ()
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-382"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514744"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514744"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-383"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514745"><span class="annot"><span class="annottext">flds :: [Arg QName]
</span><a href="#local-6989586621681514745"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">([Dom QName] -&gt; [Arg QName]) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">recFields</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681514739"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-384"></span><span>                  </span><span id="local-6989586621681514746"><span class="annot"><span class="annottext">ps' :: [Arg NLPat]
</span><a href="#local-6989586621681514746"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; Arg NLPat) -&gt; [Arg QName] -&gt; [Arg NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat)
-&gt; (QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681514747"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514747"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-var">PBoundVar</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514722"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681514723"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' NLPat
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514747"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681514745"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-385"></span><span>              </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; TypeOf Elims
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681514604"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514744"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681514741"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681514742"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; [Arg NLPat] -&gt; [Elim' NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg NLPat]
</span><a href="#local-6989586621681514746"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514743"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>            </span><span class="annot"><span class="annottext">Maybe ((QName, Type, Args), Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681514613"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-387"></span><span>        </span><span id="local-6989586621681514748"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514748"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681514617"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514748"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-type">PTerm</span></a></span><span> </span><span id="local-6989586621681514749"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514749"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PTerm&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514749"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-var">tellEq</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514581"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514582"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514591"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514749"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514590"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-type">makeSubstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span>
</span><span id="line-392"></span><span id="makeSubstitution"><span class="annot"><span class="annottext">makeSubstitution :: Telescope -&gt; Sub -&gt; Maybe Substitution
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-var hs-var">makeSubstitution</span></a></span></span><span> </span><span id="local-6989586621681514751"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514751"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514752"><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681514752"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-393"></span><span>  </span><span class="annot"><span class="annottext">[Term] -&gt; Substitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; Maybe [Term] -&gt; Maybe Substitution
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Key -&gt; Maybe Term) -&gt; [Key] -&gt; Maybe [Term]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Term
</span><a href="#local-6989586621681514755"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514751"><span class="hs-identifier hs-var">gamma</span></a></span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>      </span><span id="local-6989586621681514755"><span class="annot"><span class="annottext">val :: Key -&gt; Maybe Term
</span><a href="#local-6989586621681514755"><span class="hs-identifier hs-var hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681514756"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514756"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Sub -&gt; Maybe (Relevance, Term)
forall a. Key -&gt; IntMap a -&gt; Maybe a
</span><span class="hs-identifier hs-var">IntMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514756"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681514752"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-396"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514757"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514757"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Maybe Term) -&gt; Term -&gt; Maybe Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#dontCare"><span class="hs-identifier hs-var">dontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514757"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-397"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681514759"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514759"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514759"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-398"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-pragma hs-type">checkPostponedEquations</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-pragma hs-type">Substitution</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-pragma hs-type">PostponedEquations</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-pragma hs-type">TCM</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-pragma hs-type">Blocked_</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-401"></span><span id="local-6989586621681513253"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-type">checkPostponedEquations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513253"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-402"></span><span>                        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-403"></span><span id="checkPostponedEquations"><span class="annot"><span class="annottext">checkPostponedEquations :: forall (m :: * -&gt; *).
PureTCM m =&gt;
Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-var hs-var">checkPostponedEquations</span></a></span></span><span> </span><span id="local-6989586621681514796"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681514796"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span id="local-6989586621681514797"><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681514797"><span class="hs-identifier hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations
-&gt; (PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Applicative m, Monoid b) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Monad.html#forM%27"><span class="hs-identifier hs-var">forM'</span></a></span><span> </span><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681514797"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="annot"><span class="annottext">((PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_))
-&gt; (PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-type">PostponedEquation</span></a></span><span> </span><span id="local-6989586621681514799"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514799"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681514800"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514800"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514801"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514801"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681514802"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514802"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514803"><span class="annot"><span class="annottext">lhs' :: Term
</span><a href="#local-6989586621681514803"><span class="hs-identifier hs-var hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Substitution -&gt; Substitution
forall a. Key -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514799"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681514796"><span class="hs-identifier hs-var">sub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514801"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-406"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; Key -&gt; TCMT IO Doc -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;checking postponed equality between&quot;</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514799"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514803"><span class="hs-identifier hs-var">lhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514799"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514802"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-409"></span><span>      </span><span class="annot"><span class="annottext">Telescope -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514799"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var">equal</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514800"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514803"><span class="hs-identifier hs-var">lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514802"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="hs-comment">-- main function</span><span>
</span><span id="line-412"></span><span id="local-6989586621681513264"><span id="local-6989586621681513265"><span id="local-6989586621681513266"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nonLinMatch"><span class="hs-identifier hs-type">nonLinMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513264"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513265"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513266"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#TypeOf"><span class="hs-identifier hs-type">TypeOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513265"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513264"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-414"></span><span id="nonLinMatch"><span class="annot"><span class="annottext">nonLinMatch :: forall (m :: * -&gt; *) a b.
(PureTCM m, Match a b) =&gt;
Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; m (Either Blocked_ Substitution)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nonLinMatch"><span class="hs-identifier hs-var hs-var">nonLinMatch</span></a></span></span><span> </span><span id="local-6989586621681514837"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514837"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681514838"><span class="annot"><span class="annottext">TypeOf b
</span><a href="#local-6989586621681514838"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681514839"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681514839"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681514840"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681514840"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514870"><span class="annot"><span class="annottext">no :: String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681514870"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span> </span><span id="local-6989586621681514871"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681514871"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621681514872"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681514872"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; m (Either a b) -&gt; m (Either a b)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-416"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching failed during&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681514871"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-417"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681514872"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Either a b) -&gt; m (Either a b))
-&gt; m (Either a b) -&gt; m (Either a b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Either a b -&gt; m (Either a b)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Either a b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681514872"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>  </span><span class="annot"><span class="annottext">m (Either Blocked_ NLMState)
-&gt; (Blocked_ -&gt; m (Either Blocked_ Substitution))
-&gt; (NLMState -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
m (Either a b) -&gt; (a -&gt; m c) -&gt; (b -&gt; m c) -&gt; m c
</span><a href="Agda.Utils.Either.html#caseEitherM"><span class="hs-identifier hs-var">caseEitherM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLM () -&gt; m (Either Blocked_ NLMState)
forall (m :: * -&gt; *).
MonadReduce m =&gt;
NLM () -&gt; m (Either Blocked_ NLMState)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-var">runNLM</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; m (Either Blocked_ NLMState))
-&gt; NLM () -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
forall a b.
Match a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; TypeOf b -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Relevant"><span class="hs-identifier hs-var">Relevant</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514837"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
forall a. Tele a
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">EmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOf b
</span><a href="#local-6989586621681514838"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681514839"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681514840"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681514870"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;matching&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((NLMState -&gt; m (Either Blocked_ Substitution))
 -&gt; m (Either Blocked_ Substitution))
-&gt; (NLMState -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681514876"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681514876"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514877"><span class="annot"><span class="annottext">msub :: Maybe Substitution
</span><a href="#local-6989586621681514877"><span class="hs-identifier hs-var hs-var">msub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Sub -&gt; Maybe Substitution
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-var">makeSubstitution</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681514837"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; Maybe Substitution) -&gt; Sub -&gt; Maybe Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681514876"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Lens' NLMState Sub -&gt; Sub
forall o i. o -&gt; Lens' o i -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; f Sub) -&gt; NLMState -&gt; f NLMState
Lens' NLMState Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span>
</span><span id="line-420"></span><span>        </span><span id="local-6989586621681514880"><span class="annot"><span class="annottext">eqs :: PostponedEquations
</span><a href="#local-6989586621681514880"><span class="hs-identifier hs-var hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681514876"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Lens' NLMState PostponedEquations -&gt; PostponedEquations
forall o i. o -&gt; Lens' o i -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(PostponedEquations -&gt; f PostponedEquations)
-&gt; NLMState -&gt; f NLMState
Lens' NLMState PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; Key
-&gt; TCMT IO Doc
-&gt; m (Either Blocked_ Substitution)
-&gt; m (Either Blocked_ Substitution)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">90</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; String -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;msub = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Maybe Substitution -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe Substitution
</span><a href="#local-6989586621681514877"><span class="hs-identifier hs-var">msub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Either Blocked_ Substitution)
 -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
-&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Substitution
</span><a href="#local-6989586621681514877"><span class="hs-identifier hs-var">msub</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">Maybe Substitution
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681514870"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checking that all variables are bound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
forall t. Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#notBlocked_"><span class="hs-identifier hs-var">notBlocked_</span></a></span><span>
</span><span id="line-423"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681514884"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681514884"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-424"></span><span>        </span><span id="local-6989586621681514885"><span class="annot"><span class="annottext">Maybe Blocked_
</span><a href="#local-6989586621681514885"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-var">checkPostponedEquations</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681514884"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681514880"><span class="hs-identifier hs-var">eqs</span></a></span><span>
</span><span id="line-425"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_
</span><a href="#local-6989586621681514885"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-426"></span><span>          </span><span class="annot"><span class="annottext">Maybe Blocked_
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution))
-&gt; Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Either Blocked_ Substitution
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681514884"><span class="hs-identifier hs-var">sub</span></a></span><span>
</span><span id="line-427"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681514886"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514886"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681514870"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checking of postponed equations&quot;</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681514886"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">-- | Typed &#946;&#951;-equality, also handles empty record types.</span><span>
</span><span id="line-430"></span><span class="hs-comment">--   Returns `Nothing` if the terms are equal, or `Just b` if the terms are not</span><span>
</span><span id="line-431"></span><span class="hs-comment">--   (where b contains information about possible metas blocking the comparison)</span><span>
</span><span id="line-432"></span><span id="local-6989586621681513081"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-type">equal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513081"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513081"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-433"></span><span id="equal"><span class="annot"><span class="annottext">equal :: forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var hs-var">equal</span></a></span></span><span> </span><span id="local-6989586621681514908"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514908"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681514909"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514909"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681514910"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514910"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockT m Bool -&gt; m (Either Blocker Bool)
forall (m :: * -&gt; *) a.
Monad m =&gt;
BlockT m a -&gt; m (Either Blocker a)
</span><a href="Agda.TypeChecking.Monad.Base.html#runBlocked"><span class="hs-identifier hs-var">runBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; BlockT m Bool
forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m) =&gt;
Type -&gt; Term -&gt; Term -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualTerm"><span class="hs-identifier hs-var">pureEqualTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514908"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514909"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514910"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (Either Blocker Bool)
-&gt; (Either Blocker Bool -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_)
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681514912"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681514912"><span class="hs-identifier hs-var">b</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Blocked_ -&gt; m (Maybe Blocked_))
-&gt; Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Maybe Blocked_
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; Maybe Blocked_) -&gt; Blocked_ -&gt; Maybe Blocked_
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; () -&gt; Blocked_
forall t a. Blocker -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-var">Blocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681514912"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-436"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Key -&gt; TCMT IO Doc -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-437"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514909"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-438"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681514910"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-439"></span><span>      </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-440"></span><span>    </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Blocked_ -&gt; m (Maybe Blocked_))
-&gt; Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Maybe Blocked_
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; Maybe Blocked_) -&gt; Blocked_ -&gt; Maybe Blocked_
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-comment">-- | Utility function for getting the name and type of a head term (i.e. a</span><span>
</span><span id="line-443"></span><span class="hs-comment">--   `Def` or `Con` with no arguments)</span><span>
</span><span id="line-444"></span><span id="local-6989586621681513285"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#getTypedHead"><span class="hs-identifier hs-type">getTypedHead</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681513285"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681513285"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-445"></span><span id="getTypedHead"><span class="annot"><span class="annottext">getTypedHead :: forall (m :: * -&gt; *). PureTCM m =&gt; Term -&gt; m (Maybe (QName, Type))
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#getTypedHead"><span class="hs-identifier hs-var hs-var">getTypedHead</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621681514960"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514960"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(QName, Type) -&gt; Maybe (QName, Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((QName, Type) -&gt; Maybe (QName, Type))
-&gt; (Definition -&gt; (QName, Type))
-&gt; Definition
-&gt; Maybe (QName, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514960"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; (QName, Type))
-&gt; (Definition -&gt; Type) -&gt; Definition -&gt; (QName, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Maybe (QName, Type))
-&gt; m Definition -&gt; m (Maybe (QName, Type))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514960"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-type">ConHead</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">conName :: ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681514962"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514962"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- Andreas, 2018-09-08, issue #3211:</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">-- discount module parameters for constructor heads</span><span>
</span><span id="line-450"></span><span>    </span><span id="local-6989586621681514963"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514963"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Args
forall (m :: * -&gt; *).
(Functor m, HasConstInfo m, HasOptions m, ReadTCState m,
 MonadTCEnv m, MonadDebug m) =&gt;
QName -&gt; m Args
</span><a href="Agda.TypeChecking.Monad.Signature.html#freeVarsToApply"><span class="hs-identifier hs-var">freeVarsToApply</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514962"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">-- Jesper, 2020-06-17, issue #4755: add dummy arguments in</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- case we don't have enough parameters</span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><span class="annottext">QName -&gt; m (Maybe Key)
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m (Maybe Key)
</span><a href="Agda.TypeChecking.Datatypes.html#getNumberOfParameters"><span class="hs-identifier hs-var">getNumberOfParameters</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514962"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe Key)
-&gt; (Maybe Key -&gt; m (Maybe (QName, Type)))
-&gt; m (Maybe (QName, Type))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-454"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681514966"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514966"><span class="hs-identifier hs-var">npars</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681514967"><span class="annot"><span class="annottext">ws :: Args
</span><a href="#local-6989586621681514967"><span class="hs-identifier hs-var hs-var">ws</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Arg Term -&gt; Args
forall a. Key -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681514966"><span class="hs-identifier hs-var">npars</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514963"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Args) -&gt; Arg Term -&gt; Args
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">Term
HasCallStack =&gt; Term
</span><a href="Agda.Syntax.Internal.html#__DUMMY_TERM__"><span class="hs-identifier hs-var">__DUMMY_TERM__</span></a></span><span>
</span><span id="line-456"></span><span>        </span><span id="local-6989586621681514970"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514970"><span class="hs-identifier hs-var">t0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; m Definition -&gt; m Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514962"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-457"></span><span>        </span><span id="local-6989586621681514971"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514971"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514970"><span class="hs-identifier hs-var">t0</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; m Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
forall (m :: * -&gt; *).
(MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; Args -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514963"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681514967"><span class="hs-identifier hs-var">ws</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>        </span><span class="annot"><span class="annottext">Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (QName, Type) -&gt; m (Maybe (QName, Type)))
-&gt; Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(QName, Type) -&gt; Maybe (QName, Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681514962"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681514971"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>      </span><span class="annot"><span class="annottext">Maybe Key
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-460"></span><span>  </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-461"></span></pre></body></html>