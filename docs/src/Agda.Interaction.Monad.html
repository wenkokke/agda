<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wunused-imports #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# OPTIONS_GHC -fwarn-orphans #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE CPP               #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Interaction.Monad</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier">IM</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#runIM"><span class="hs-identifier">runIM</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#readline"><span class="hs-identifier">readline</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier">HasOptions</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier">MonadTCEnv</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier">MonadTCM</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCState"><span class="hs-identifier">MonadTCState</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier">ReadTCState</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier">TCErr</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier">TCM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCMT"><span class="hs-identifier">TCMT</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#mapTCMT"><span class="hs-identifier">mapTCMT</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">throwIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadError</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lift</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Console.Haskeline</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskeline</span></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">-- MonadException is replaced by MonadCatch in haskeline 0.8</span><span class="hs-cpp">
#if MIN_VERSION_haskeline(0,8,0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskeline</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catch</span></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-32"></span><span class="annot"><span class="hs-comment">-- | Interaction monad.</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">newtype</span><span> </span><span id="IM"><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-var">IM</span></a></span></span><span> </span><span id="local-6989586621681590099"><span class="annot"><a href="#local-6989586621681590099"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IM"><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-var">IM</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unIM"><span class="annot"><span class="annottext">forall a. IM a -&gt; TCMT (InputT IO) a
</span><a href="Agda.Interaction.Monad.html#unIM"><span class="hs-identifier hs-var hs-var">unIM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCMT"><span class="hs-identifier hs-type">TCMT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Haskeline.InputT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681590099"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">(</span><span> </span><span id="local-6989586621681590254"><span id="local-6989586621681590260"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; IM a -&gt; IM b)
-&gt; (forall a b. a -&gt; IM b -&gt; IM a) -&gt; Functor IM
forall a b. a -&gt; IM b -&gt; IM a
forall a b. (a -&gt; b) -&gt; IM a -&gt; IM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; IM a -&gt; IM b
fmap :: forall a b. (a -&gt; b) -&gt; IM a -&gt; IM b
$c&lt;$ :: forall a b. a -&gt; IM b -&gt; IM a
&lt;$ :: forall a b. a -&gt; IM b -&gt; IM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590273"><span id="local-6989586621681590279"><span id="local-6989586621681590284"><span id="local-6989586621681590289"><span id="local-6989586621681590294"><span class="annot"><span class="annottext">Functor IM
Functor IM =&gt;
(forall a. a -&gt; IM a)
-&gt; (forall a b. IM (a -&gt; b) -&gt; IM a -&gt; IM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; IM a -&gt; IM b -&gt; IM c)
-&gt; (forall a b. IM a -&gt; IM b -&gt; IM b)
-&gt; (forall a b. IM a -&gt; IM b -&gt; IM a)
-&gt; Applicative IM
forall a. a -&gt; IM a
forall a b. IM a -&gt; IM b -&gt; IM a
forall a b. IM a -&gt; IM b -&gt; IM b
forall a b. IM (a -&gt; b) -&gt; IM a -&gt; IM b
forall a b c. (a -&gt; b -&gt; c) -&gt; IM a -&gt; IM b -&gt; IM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; IM a
pure :: forall a. a -&gt; IM a
$c&lt;*&gt; :: forall a b. IM (a -&gt; b) -&gt; IM a -&gt; IM b
&lt;*&gt; :: forall a b. IM (a -&gt; b) -&gt; IM a -&gt; IM b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; IM a -&gt; IM b -&gt; IM c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; IM a -&gt; IM b -&gt; IM c
$c*&gt; :: forall a b. IM a -&gt; IM b -&gt; IM b
*&gt; :: forall a b. IM a -&gt; IM b -&gt; IM b
$c&lt;* :: forall a b. IM a -&gt; IM b -&gt; IM a
&lt;* :: forall a b. IM a -&gt; IM b -&gt; IM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590310"><span id="local-6989586621681590315"><span id="local-6989586621681590319"><span class="annot"><span class="annottext">Applicative IM
Applicative IM =&gt;
(forall a b. IM a -&gt; (a -&gt; IM b) -&gt; IM b)
-&gt; (forall a b. IM a -&gt; IM b -&gt; IM b)
-&gt; (forall a. a -&gt; IM a)
-&gt; Monad IM
forall a. a -&gt; IM a
forall a b. IM a -&gt; IM b -&gt; IM b
forall a b. IM a -&gt; (a -&gt; IM b) -&gt; IM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. IM a -&gt; (a -&gt; IM b) -&gt; IM b
&gt;&gt;= :: forall a b. IM a -&gt; (a -&gt; IM b) -&gt; IM b
$c&gt;&gt; :: forall a b. IM a -&gt; IM b -&gt; IM b
&gt;&gt; :: forall a b. IM a -&gt; IM b -&gt; IM b
$creturn :: forall a. a -&gt; IM a
return :: forall a. a -&gt; IM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590327"><span class="annot"><span class="annottext">Monad IM
Monad IM =&gt; (forall a. IO a -&gt; IM a) -&gt; MonadIO IM
forall a. IO a -&gt; IM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; IM a
liftIO :: forall a. IO a -&gt; IM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590342"><span id="local-6989586621681590348"><span class="annot"><span class="annottext">Monad IM
Functor IM
Applicative IM
IM PragmaOptions
IM CommandLineOptions
(Functor IM, Applicative IM, Monad IM) =&gt;
IM PragmaOptions -&gt; IM CommandLineOptions -&gt; HasOptions IM
forall (m :: * -&gt; *).
(Functor m, Applicative m, Monad m) =&gt;
m PragmaOptions -&gt; m CommandLineOptions -&gt; HasOptions m
$cpragmaOptions :: IM PragmaOptions
pragmaOptions :: IM PragmaOptions
$ccommandLineOptions :: IM CommandLineOptions
commandLineOptions :: IM CommandLineOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasOptions</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590357"><span id="local-6989586621681590363"><span class="annot"><span class="annottext">Monad IM
IM TCEnv
Monad IM =&gt;
IM TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; IM a -&gt; IM a) -&gt; MonadTCEnv IM
forall a. (TCEnv -&gt; TCEnv) -&gt; IM a -&gt; IM a
forall (m :: * -&gt; *).
Monad m =&gt;
m TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; m a -&gt; m a) -&gt; MonadTCEnv m
$caskTC :: IM TCEnv
askTC :: IM TCEnv
$clocalTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; IM a -&gt; IM a
localTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; IM a -&gt; IM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCEnv</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590372"><span id="local-6989586621681590380"><span id="local-6989586621681590385"><span class="annot"><span class="annottext">Monad IM
IM TCState
Monad IM =&gt;
IM TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; IM b -&gt; IM b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; IM a -&gt; IM a)
-&gt; ReadTCState IM
forall a. (TCState -&gt; TCState) -&gt; IM a -&gt; IM a
forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; IM b -&gt; IM b
forall (m :: * -&gt; *).
Monad m =&gt;
m TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; m b -&gt; m b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; m a -&gt; m a)
-&gt; ReadTCState m
$cgetTCState :: IM TCState
getTCState :: IM TCState
$clocallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; IM b -&gt; IM b
locallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; IM b -&gt; IM b
$cwithTCState :: forall a. (TCState -&gt; TCState) -&gt; IM a -&gt; IM a
withTCState :: forall a. (TCState -&gt; TCState) -&gt; IM a -&gt; IM a
</span><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ReadTCState</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590394"><span id="local-6989586621681590400"><span id="local-6989586621681590405"><span class="annot"><span class="annottext">Monad IM
IM TCState
Monad IM =&gt;
IM TCState
-&gt; (TCState -&gt; IM ())
-&gt; ((TCState -&gt; TCState) -&gt; IM ())
-&gt; MonadTCState IM
TCState -&gt; IM ()
(TCState -&gt; TCState) -&gt; IM ()
forall (m :: * -&gt; *).
Monad m =&gt;
m TCState
-&gt; (TCState -&gt; m ())
-&gt; ((TCState -&gt; TCState) -&gt; m ())
-&gt; MonadTCState m
$cgetTC :: IM TCState
getTC :: IM TCState
$cputTC :: TCState -&gt; IM ()
putTC :: TCState -&gt; IM ()
$cmodifyTC :: (TCState -&gt; TCState) -&gt; IM ()
modifyTC :: (TCState -&gt; TCState) -&gt; IM ()
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCState</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681590422"><span class="annot"><span class="annottext">Applicative IM
MonadIO IM
HasOptions IM
MonadTCState IM
MonadTCEnv IM
(Applicative IM, MonadIO IM, MonadTCEnv IM, MonadTCState IM,
 HasOptions IM) =&gt;
(forall a. TCM a -&gt; IM a) -&gt; MonadTCM IM
forall a. TCM a -&gt; IM a
forall (tcm :: * -&gt; *).
(Applicative tcm, MonadIO tcm, MonadTCEnv tcm, MonadTCState tcm,
 HasOptions tcm) =&gt;
(forall a. TCM a -&gt; tcm a) -&gt; MonadTCM tcm
$cliftTCM :: forall a. TCM a -&gt; IM a
liftTCM :: forall a. TCM a -&gt; IM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCM</span></a></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span id="local-6989586621681590188"><span class="annot"><a href="Agda.Interaction.Monad.html#runIM"><span class="hs-identifier hs-type">runIM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-type">IM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681590188"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681590188"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-39"></span><span id="runIM"><span class="annot"><span class="annottext">runIM :: forall a. IM a -&gt; TCM a
</span><a href="Agda.Interaction.Monad.html#runIM"><span class="hs-identifier hs-var hs-var">runIM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a1. InputT IO a1 -&gt; IO a1)
-&gt; TCMT (InputT IO) a -&gt; TCMT IO a
forall (m :: * -&gt; *) (n :: * -&gt; *) a.
(forall a1. m a1 -&gt; n a1) -&gt; TCMT m a -&gt; TCMT n a
</span><a href="Agda.TypeChecking.Monad.Base.html#mapTCMT"><span class="hs-identifier hs-var">mapTCMT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Settings IO -&gt; InputT IO a1 -&gt; IO a1
forall (m :: * -&gt; *) a.
(MonadIO m, MonadMask m) =&gt;
Settings m -&gt; InputT m a -&gt; m a
</span><span class="hs-identifier hs-var">Haskeline.runInputT</span></span><span> </span><span class="annot"><span class="annottext">Settings IO
forall (m :: * -&gt; *). MonadIO m =&gt; Settings m
</span><span class="hs-identifier hs-var">Haskeline.defaultSettings</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT (InputT IO) a -&gt; TCMT IO a)
-&gt; (IM a -&gt; TCMT (InputT IO) a) -&gt; IM a -&gt; TCMT IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IM a -&gt; TCMT (InputT IO) a
forall a. IM a -&gt; TCMT (InputT IO) a
</span><a href="Agda.Interaction.Monad.html#unIM"><span class="hs-identifier hs-var">unIM</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-type">IM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>  </span><span id="local-6989586621681590444"><span class="annot"><span class="annottext">throwError :: forall a. TCErr -&gt; IM a
</span><a href="#local-6989586621681590444"><span class="hs-identifier hs-var hs-var hs-var hs-var">throwError</span></a></span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IM a
forall a. IO a -&gt; IM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IM a) -&gt; (TCErr -&gt; IO a) -&gt; TCErr -&gt; IM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span>
</span><span id="line-43"></span><span>  </span><span id="local-6989586621681590453"><span class="annot"><span class="annottext">catchError :: forall a. IM a -&gt; (TCErr -&gt; IM a) -&gt; IM a
</span><a href="#local-6989586621681590453"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchError</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-type">IM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span id="local-6989586621681590456"><span class="annot"><span class="annottext">IORef TCState -&gt; TCEnv -&gt; InputT IO a
</span><a href="#local-6989586621681590456"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681590457"><span class="annot"><span class="annottext">TCErr -&gt; IM a
</span><a href="#local-6989586621681590457"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT (InputT IO) a -&gt; IM a
forall a. TCMT (InputT IO) a -&gt; IM a
</span><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-var">IM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT (InputT IO) a -&gt; IM a)
-&gt; ((IORef TCState -&gt; TCEnv -&gt; InputT IO a) -&gt; TCMT (InputT IO) a)
-&gt; (IORef TCState -&gt; TCEnv -&gt; InputT IO a)
-&gt; IM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(IORef TCState -&gt; TCEnv -&gt; InputT IO a) -&gt; TCMT (InputT IO) a
forall (m :: * -&gt; *) a. (IORef TCState -&gt; TCEnv -&gt; m a) -&gt; TCMT m a
</span><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-var">TCM</span></a></span><span> </span><span class="annot"><span class="annottext">((IORef TCState -&gt; TCEnv -&gt; InputT IO a) -&gt; IM a)
-&gt; (IORef TCState -&gt; TCEnv -&gt; InputT IO a) -&gt; IM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681590458"><span class="annot"><span class="annottext">IORef TCState
</span><a href="#local-6989586621681590458"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681590459"><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621681590459"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="annottext">IORef TCState -&gt; TCEnv -&gt; InputT IO a
</span><a href="#local-6989586621681590456"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">IORef TCState
</span><a href="#local-6989586621681590458"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621681590459"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">InputT IO a -&gt; (TCErr -&gt; InputT IO a) -&gt; InputT IO a
forall e a.
(HasCallStack, Exception e) =&gt;
InputT IO a -&gt; (e -&gt; InputT IO a) -&gt; InputT IO a
forall (m :: * -&gt; *) e a.
(MonadCatch m, HasCallStack, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`Haskeline.catch`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681590460"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681590460"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT (InputT IO) a -&gt; IORef TCState -&gt; TCEnv -&gt; InputT IO a
forall (m :: * -&gt; *) a. TCMT m a -&gt; IORef TCState -&gt; TCEnv -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#unTCM"><span class="hs-identifier hs-var">unTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IM a -&gt; TCMT (InputT IO) a
forall a. IM a -&gt; TCMT (InputT IO) a
</span><a href="Agda.Interaction.Monad.html#unIM"><span class="hs-identifier hs-var">unIM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCErr -&gt; IM a
</span><a href="#local-6989586621681590457"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681590460"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IORef TCState
</span><a href="#local-6989586621681590458"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621681590459"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- | Line reader. The line reader history is not stored between</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- sessions.</span><span>
</span><span id="line-48"></span><span class="annot"><a href="Agda.Interaction.Monad.html#readline"><span class="hs-identifier hs-type">readline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-type">IM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span id="readline"><span class="annot"><span class="annottext">readline :: String -&gt; IM (Maybe String)
</span><a href="Agda.Interaction.Monad.html#readline"><span class="hs-identifier hs-var hs-var">readline</span></a></span></span><span> </span><span id="local-6989586621681590462"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681590462"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT (InputT IO) (Maybe String) -&gt; IM (Maybe String)
forall a. TCMT (InputT IO) a -&gt; IM a
</span><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-var">IM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT (InputT IO) (Maybe String) -&gt; IM (Maybe String))
-&gt; TCMT (InputT IO) (Maybe String) -&gt; IM (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InputT IO (Maybe String) -&gt; TCMT (InputT IO) (Maybe String)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; TCMT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; InputT IO (Maybe String)
forall (m :: * -&gt; *).
(MonadIO m, MonadMask m) =&gt;
String -&gt; InputT m (Maybe String)
</span><span class="hs-identifier hs-var">Haskeline.getInputLine</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681590462"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span></pre></body></html>