<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wunused-imports #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Unify.LeftInverse</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(!!)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.html"><span class="hs-identifier">Agda.Interaction.Options</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Options.Base.html#optCubical"><span class="hs-identifier">optCubical</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.html"><span class="hs-identifier">Agda.TypeChecking.Primitive</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Primitive.html#Nat"><span class="hs-identifier">Nat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Names.html"><span class="hs-identifier">Agda.TypeChecking.Names</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html"><span class="hs-identifier">Agda.TypeChecking.Records</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Problem.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Problem</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Unify.Types</span></a></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#PrettyTCM"><span class="hs-identifier hs-type">PrettyTCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoLeftInv"><span class="hs-identifier hs-type">NoLeftInv</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-39"></span><span>  </span><span id="local-6989586621681493828"><span class="annot"><span class="annottext">prettyTCM :: forall (m :: * -&gt; *). MonadPretty m =&gt; NoLeftInv -&gt; m Doc
</span><a href="#local-6989586621681493828"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyTCM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedYet"><span class="hs-identifier hs-type">UnsupportedYet</span></a></span><span> </span><span id="local-6989586621681493831"><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681493831"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="annot"><span class="annottext">([m Doc] -&gt; m Doc) -&gt; [m Doc] -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [m Doc]
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; [m Doc]
</span><a href="Agda.TypeChecking.Pretty.html#pwords"><span class="hs-identifier hs-var">pwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It relies on&quot;</span></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; [m Doc] -&gt; [m Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">UnifyStep -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyStep -&gt; m Doc
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681493831"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;,&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; [m Doc] -&gt; [m Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [m Doc]
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; [m Doc]
</span><a href="Agda.TypeChecking.Pretty.html#pwords"><span class="hs-identifier hs-var">pwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;which is not yet supported&quot;</span></span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedCxt"><span class="hs-identifier hs-var">UnsupportedCxt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fwords"><span class="hs-identifier hs-var">fwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;it relies on higher-dimensional unification, which is not yet supported&quot;</span></span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Illegal"><span class="hs-identifier hs-type">Illegal</span></a></span><span> </span><span id="local-6989586621681493838"><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681493838"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="annot"><span class="annottext">([m Doc] -&gt; m Doc) -&gt; [m Doc] -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [m Doc]
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; [m Doc]
</span><a href="Agda.TypeChecking.Pretty.html#pwords"><span class="hs-identifier hs-var">pwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It relies on&quot;</span></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; [m Doc] -&gt; [m Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">UnifyStep -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyStep -&gt; m Doc
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681493838"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;,&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; [m Doc] -&gt; [m Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [m Doc]
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; [m Doc]
</span><a href="Agda.TypeChecking.Pretty.html#pwords"><span class="hs-identifier hs-var">pwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;which is incompatible with&quot;</span></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; [m Doc] -&gt; [m Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cubical Agda&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoCubical"><span class="hs-identifier hs-var">NoCubical</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fwords"><span class="hs-identifier hs-var">fwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cubical Agda is disabled&quot;</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#WithKEnabled"><span class="hs-identifier hs-var">WithKEnabled</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fwords"><span class="hs-identifier hs-var">fwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The K rule is enabled&quot;</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnStrict"><span class="hs-identifier hs-var">SplitOnStrict</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fwords"><span class="hs-identifier hs-var">fwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It splits on a type in SSet&quot;</span></span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnFlat"><span class="hs-identifier hs-var">SplitOnFlat</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#fwords"><span class="hs-identifier hs-var">fwords</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It splits on a @&#9837; argument&quot;</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">data</span><span> </span><span id="NoLeftInv"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoLeftInv"><span class="hs-identifier hs-var">NoLeftInv</span></a></span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UnsupportedYet"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedYet"><span class="hs-identifier hs-var">UnsupportedYet</span></a></span></span><span> </span><span class="hs-special">{</span><span id="badStep"><span class="annot"><span class="annottext">NoLeftInv -&gt; UnifyStep
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#badStep"><span class="hs-identifier hs-var hs-var">badStep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyStep"><span class="hs-identifier hs-type">UnifyStep</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Illegal"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Illegal"><span class="hs-identifier hs-var">Illegal</span></a></span></span><span>        </span><span class="hs-special">{</span><span id="badStep"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#badStep"><span class="hs-identifier hs-var">badStep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyStep"><span class="hs-identifier hs-type">UnifyStep</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoCubical"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoCubical"><span class="hs-identifier hs-var">NoCubical</span></a></span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WithKEnabled"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#WithKEnabled"><span class="hs-identifier hs-var">WithKEnabled</span></a></span></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SplitOnStrict"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnStrict"><span class="hs-identifier hs-var">SplitOnStrict</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ splitting on a Strict Set.</span></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SplitOnFlat"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnFlat"><span class="hs-identifier hs-var">SplitOnFlat</span></a></span></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ splitting on a @&#9837; argument</span></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnsupportedCxt"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedCxt"><span class="hs-identifier hs-var">UnsupportedCxt</span></a></span></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681493846"><span id="local-6989586621681493854"><span id="local-6989586621681493858"><span class="annot"><span class="annottext">Int -&gt; NoLeftInv -&gt; ShowS
[NoLeftInv] -&gt; ShowS
NoLeftInv -&gt; String
(Int -&gt; NoLeftInv -&gt; ShowS)
-&gt; (NoLeftInv -&gt; String)
-&gt; ([NoLeftInv] -&gt; ShowS)
-&gt; Show NoLeftInv
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NoLeftInv -&gt; ShowS
showsPrec :: Int -&gt; NoLeftInv -&gt; ShowS
$cshow :: NoLeftInv -&gt; String
show :: NoLeftInv -&gt; String
$cshowList :: [NoLeftInv] -&gt; ShowS
showList :: [NoLeftInv] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span id="local-6989586621681493485"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildLeftInverse"><span class="hs-identifier hs-type">buildLeftInverse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493485"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493485"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyState"><span class="hs-identifier hs-type">UnifyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyLog"><span class="hs-identifier hs-type">UnifyLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681493485"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoLeftInv"><span class="hs-identifier hs-type">NoLeftInv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-58"></span><span id="buildLeftInverse"><span class="annot"><span class="annottext">buildLeftInverse :: forall (tcm :: * -&gt; *).
(PureTCM tcm, MonadError TCErr tcm) =&gt;
UnifyState
-&gt; UnifyLog -&gt; tcm (Either NoLeftInv (Substitution, Substitution))
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildLeftInverse"><span class="hs-identifier hs-var hs-var">buildLeftInverse</span></a></span></span><span> </span><span id="local-6989586621681494020"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span></span><span> </span><span id="local-6989586621681494021"><span class="annot"><span class="annottext">UnifyLog
</span><a href="#local-6989586621681494021"><span class="hs-identifier hs-var">log</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv.badstep&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-60"></span><span>    </span><span id="local-6989586621681494023"><span class="annot"><span class="annottext">Maybe Cubical
</span><a href="#local-6989586621681494023"><span class="hs-identifier hs-var">cubical</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PragmaOptions -&gt; Maybe Cubical
</span><a href="Agda.Interaction.Options.Base.html#optCubical"><span class="hs-identifier hs-var">optCubical</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; Maybe Cubical)
-&gt; TCMT IO PragmaOptions -&gt; TCMT IO (Maybe Cubical)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">pragmaOptions</span></a></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cubical:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Cubical -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe Cubical
</span><a href="#local-6989586621681494023"><span class="hs-identifier hs-var">cubical</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv.badstep&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-63"></span><span>    </span><span id="local-6989586621681494028"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681494028"><span class="hs-identifier hs-var">pathp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuiltinId -&gt; TCMT IO (Maybe Term)
forall (m :: * -&gt; *) a.
(HasBuiltins m, IsBuiltin a) =&gt;
a -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinId
</span><a href="Agda.Syntax.Builtin.html#builtinPathP"><span class="hs-identifier hs-var">builtinPathP</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pathp:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; String) -&gt; Bool -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681494028"><span class="hs-identifier hs-var">pathp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494043"><span class="annot"><span class="annottext">cond :: tcm Bool
</span><a href="#local-6989586621681494043"><span class="hs-identifier hs-var hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[tcm Bool] -&gt; tcm Bool
forall (f :: * -&gt; *) (m :: * -&gt; *).
(Foldable f, Monad m) =&gt;
f (m Bool) -&gt; m Bool
</span><a href="Agda.Utils.Monad.html#andM"><span class="hs-identifier hs-var">andM</span></a></span><span>
</span><span id="line-66"></span><span>       </span><span class="hs-comment">-- TODO: handle open contexts: they happen during &quot;higher dimensional&quot; unification,</span><span>
</span><span id="line-67"></span><span>       </span><span class="hs-comment">--       in injectivity cases.</span><span>
</span><span id="line-68"></span><span>       </span><span class="hs-special">[</span><span>
</span><span id="line-69"></span><span>         </span><span class="annot"><span class="annottext">Context -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">(Context -&gt; Bool) -&gt; tcm Context -&gt; tcm Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">tcm Context
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m Context
</span><a href="Agda.TypeChecking.Monad.Context.html#getContext"><span class="hs-identifier hs-var">getContext</span></a></span><span>
</span><span id="line-70"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><span class="annottext">tcm Bool
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall (m :: * -&gt; *) a. Monad m =&gt; m Bool -&gt; m a -&gt; m a -&gt; m a
</span><a href="Agda.Utils.Monad.html#ifNotM"><span class="hs-identifier hs-var">ifNotM</span></a></span><span> </span><span class="annot"><span class="annottext">tcm Bool
</span><a href="#local-6989586621681494043"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either NoLeftInv (Substitution, Substitution)
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either NoLeftInv (Substitution, Substitution)
 -&gt; tcm (Either NoLeftInv (Substitution, Substitution)))
-&gt; Either NoLeftInv (Substitution, Substitution)
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv -&gt; Either NoLeftInv (Substitution, Substitution)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedCxt"><span class="hs-identifier hs-var">UnsupportedCxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm (Either NoLeftInv (Substitution, Substitution))
 -&gt; tcm (Either NoLeftInv (Substitution, Substitution)))
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621681494048"><span class="annot"><span class="annottext">[Either NoLeftInv (Retract, Term)]
</span><a href="#local-6989586621681494048"><span class="hs-identifier hs-var">equivs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnifyLog
-&gt; ((UnifyLogEntry, UnifyState)
    -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; tcm [Either NoLeftInv (Retract, Term)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">UnifyLog
</span><a href="#local-6989586621681494021"><span class="hs-identifier hs-var">log</span></a></span><span> </span><span class="annot"><span class="annottext">(((UnifyLogEntry, UnifyState)
  -&gt; tcm (Either NoLeftInv (Retract, Term)))
 -&gt; tcm [Either NoLeftInv (Retract, Term)])
-&gt; ((UnifyLogEntry, UnifyState)
    -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; tcm [Either NoLeftInv (Retract, Term)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(UnifyLogEntry
 -&gt; UnifyState -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; (UnifyLogEntry, UnifyState)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">UnifyLogEntry
-&gt; UnifyState -&gt; tcm (Either NoLeftInv (Retract, Term))
forall (tcm :: * -&gt; *).
(PureTCM tcm, MonadError TCErr tcm) =&gt;
UnifyLogEntry
-&gt; UnifyState -&gt; tcm (Either NoLeftInv (Retract, Term))
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildEquiv"><span class="hs-identifier hs-var">buildEquiv</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Either NoLeftInv (Retract, Term)]
-&gt; Either NoLeftInv [(Retract, Term)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">[Either NoLeftInv (Retract, Term)]
</span><a href="#local-6989586621681494048"><span class="hs-identifier hs-var">equivs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681494053"><span class="annot"><span class="annottext">NoLeftInv
</span><a href="#local-6989586621681494053"><span class="hs-identifier hs-var">no</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-75"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv.badstep&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;No Left Inverse:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyStep -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoLeftInv -&gt; UnifyStep
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#badStep"><span class="hs-identifier hs-var">badStep</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="#local-6989586621681494053"><span class="hs-identifier hs-var">no</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><span class="annottext">Either NoLeftInv (Substitution, Substitution)
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoLeftInv -&gt; Either NoLeftInv (Substitution, Substitution)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="#local-6989586621681494053"><span class="hs-identifier hs-var">no</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681494054"><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494054"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">-- &#915;,&#966;,us =_&#916; vs &#8866; &#964;0 : &#915;', &#966;</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-comment">-- &#915;,&#966;,us =_&#916; vs, i : I &#8866; leftInv0 : &#915;,&#966;,us =_&#916; vs</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">-- leftInv0 : [wkS |&#966;,us =_&#916; vs| &#961;,&#966;,refls][&#964;0] = IdS : &#915;,&#966;,us =_&#916; vs</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681494055"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494055"><span class="hs-identifier hs-var">tau0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494056"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494056"><span class="hs-identifier hs-var">leftInv0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494054"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-82"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Substitution, Substitution) -&gt; tcm (Substitution, Substitution)
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int -&gt; Substitution
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>      </span><span id="local-6989586621681494059"><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494059"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-85"></span><span>            </span><span id="local-6989586621681494182"><span class="annot"><span class="annottext">loop :: [(Retract, Term)] -&gt; m Retract
</span><a href="#local-6989586621681494182"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Retract
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-86"></span><span>            </span><span class="annot"><a href="#local-6989586621681494182"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681494184"><span class="annot"><span class="annottext">(Retract, Term)
</span><a href="#local-6989586621681494184"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Retract -&gt; m Retract
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Retract -&gt; m Retract) -&gt; Retract -&gt; m Retract
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Retract, Term) -&gt; Retract
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(Retract, Term)
</span><a href="#local-6989586621681494184"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-87"></span><span>            </span><span class="annot"><a href="#local-6989586621681494182"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681494186"><span class="annot"><span class="annottext">(Retract, Term)
</span><a href="#local-6989586621681494186"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681494187"><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494187"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-88"></span><span>              </span><span id="local-6989586621681494188"><span class="annot"><span class="annottext">Retract
</span><a href="#local-6989586621681494188"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Retract, Term)] -&gt; m Retract
</span><a href="#local-6989586621681494182"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494187"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-89"></span><span>              </span><span class="annot"><span class="annottext">(Retract -&gt; Term -&gt; Retract -&gt; m Retract)
-&gt; (Retract, Term) -&gt; Retract -&gt; m Retract
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Retract -&gt; Term -&gt; Retract -&gt; m Retract
forall (tcm :: * -&gt; *).
(PureTCM tcm, MonadError TCErr tcm, MonadDebug tcm,
 HasBuiltins tcm, MonadAddContext tcm) =&gt;
Retract -&gt; Term -&gt; Retract -&gt; tcm Retract
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#composeRetract"><span class="hs-identifier hs-var">composeRetract</span></a></span><span> </span><span class="annot"><span class="annottext">(Retract, Term)
</span><a href="#local-6989586621681494186"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Retract
</span><a href="#local-6989586621681494188"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681494190"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494190"><span class="hs-identifier hs-var">tau</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494191"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494191"><span class="hs-identifier hs-var">leftInv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Retract, Term)] -&gt; tcm Retract
forall {m :: * -&gt; *}.
(PureTCM m, MonadError TCErr m) =&gt;
[(Retract, Term)] -&gt; m Retract
</span><a href="#local-6989586621681494182"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[(Retract, Term)]
</span><a href="#local-6989586621681494059"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="annottext">(Substitution, Substitution) -&gt; tcm (Substitution, Substitution)
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494190"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494191"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">-- &#915;,&#966;,us =_&#916; vs &#8866; &#964;0 : &#915;', &#966;</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">-- leftInv0 : [wkS |&#966;,us =_&#916; vs| &#961;,1,refls][&#964;] = idS : &#915;,&#966;,us =_&#916; vs</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494192"><span class="annot"><span class="annottext">tau :: Substitution
</span><a href="#local-6989586621681494192"><span class="hs-identifier hs-var hs-var">tau</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494055"><span class="hs-identifier hs-var">tau0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-95"></span><span>    </span><span id="local-6989586621681494194"><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681494194"><span class="hs-identifier hs-var">unview</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm (IntervalView -&gt; Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; m (IntervalView -&gt; Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#intervalUnview%27"><span class="hs-identifier hs-var">intervalUnview'</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494196"><span class="annot"><span class="annottext">replaceAt :: Int -&gt; a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681494196"><span class="hs-identifier hs-var hs-var">replaceAt</span></a></span></span><span> </span><span id="local-6989586621681494197"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681494197"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681494198"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681494198"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681494199"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494199"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494200"><span class="hs-identifier hs-var">xs0</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681494198"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494201"><span class="hs-identifier hs-var">xs1</span></a></span><span>
</span><span id="line-97"></span><span>                </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681494200"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494200"><span class="hs-identifier hs-var">xs0</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681494201"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494201"><span class="hs-identifier hs-var">xs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; ([a], [a])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681494197"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494199"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494203"><span class="annot"><span class="annottext">max :: Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681494203"><span class="hs-identifier hs-var hs-var">max</span></a></span></span><span> </span><span id="local-6989586621681494204"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494204"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681494205"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494205"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681494194"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="annot"><span class="annottext">(IntervalView -&gt; Term) -&gt; IntervalView -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#IMax"><span class="hs-identifier hs-var">IMax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494204"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494205"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>        </span><span id="local-6989586621681494208"><span class="annot"><span class="annottext">neg :: Term -&gt; Term
</span><a href="#local-6989586621681494208"><span class="hs-identifier hs-var hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621681494209"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494209"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681494194"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="annot"><span class="annottext">(IntervalView -&gt; Term) -&gt; IntervalView -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#INeg"><span class="hs-identifier hs-var">INeg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494209"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494211"><span class="annot"><span class="annottext">phieq :: Term
</span><a href="#local-6989586621681494211"><span class="hs-identifier hs-var hs-var">phieq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="#local-6989586621681494208"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681494203"><span class="hs-operator hs-var">`max`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>                       </span><span class="hs-comment">-- I + us =_&#916; vs -- inplaceS</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494216"><span class="annot"><span class="annottext">leftInv :: Substitution
</span><a href="#local-6989586621681494216"><span class="hs-identifier hs-var hs-var">leftInv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term -&gt; [Term] -&gt; [Term]
forall {a}. Int -&gt; a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681494196"><span class="hs-identifier hs-var">replaceAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494211"><span class="hs-identifier hs-var">phieq</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; [Term]) -&gt; [Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Term) -&gt; [Int] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution -&gt; Int -&gt; Term
forall a. EndoSubst a =&gt; Substitution' a -&gt; Int -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494056"><span class="hs-identifier hs-var">leftInv0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; [Term]) -&gt; [Int] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Int]
forall a. Integral a =&gt; a -&gt; [a]
</span><a href="Agda.Utils.List.html#downFrom"><span class="hs-identifier hs-var">downFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494221"><span class="annot"><span class="annottext">working_tel :: Telescope
</span><a href="#local-6989586621681494221"><span class="hs-identifier hs-var hs-var">working_tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope -&gt; Telescope) -&gt; Abs Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;phi0&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Abs Telescope) -&gt; Telescope -&gt; Abs Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681494020"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;=== before mod&quot;</span></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494221"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau0    :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494055"><span class="hs-identifier hs-var">tau0</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494221"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>                               </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv0:  &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494056"><span class="hs-identifier hs-var">leftInv0</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;=== after mod&quot;</span></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494221"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau    :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494192"><span class="hs-identifier hs-var">tau</span></a></span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494221"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>                               </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv:   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494216"><span class="hs-identifier hs-var">leftInv</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><span class="annottext">Either NoLeftInv (Substitution, Substitution)
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either NoLeftInv (Substitution, Substitution)
 -&gt; tcm (Either NoLeftInv (Substitution, Substitution)))
-&gt; Either NoLeftInv (Substitution, Substitution)
-&gt; tcm (Either NoLeftInv (Substitution, Substitution))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Substitution, Substitution)
-&gt; Either NoLeftInv (Substitution, Substitution)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494192"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494216"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">type</span><span> </span><span id="Retract"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Retract"><span class="hs-identifier hs-var">Retract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>     </span><span class="hs-comment">-- &#915; (the problem, including equalities),</span><span>
</span><span id="line-120"></span><span>     </span><span class="hs-comment">-- &#916; &#8866; &#961; : &#915;</span><span>
</span><span id="line-121"></span><span>     </span><span class="hs-comment">-- &#915; &#8866; &#964; : &#916;</span><span>
</span><span id="line-122"></span><span>     </span><span class="hs-comment">-- &#915;, i : I &#8866; leftInv : &#915;, such that (&#955;i. leftInv) : &#961;[&#964;] = id_&#915;</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">--- &#915; &#8866; us : &#916;   &#915; &#8866; termsS e us : &#916;</span><span>
</span><span id="line-125"></span><span id="local-6989586621681493581"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-type">termsS</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493581"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681493581"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493581"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-126"></span><span id="termsS"><span class="annot"><span class="annottext">termsS :: forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var hs-var">termsS</span></a></span></span><span> </span><span id="local-6989586621681494229"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681494229"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681494230"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494230"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681494230"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var">++#</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681494229"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621681493570"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#composeRetract"><span class="hs-identifier hs-type">composeRetract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-type">MonadDebug</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-type">MonadAddContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Retract"><span class="hs-identifier hs-type">Retract</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Retract"><span class="hs-identifier hs-type">Retract</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681493570"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Retract"><span class="hs-identifier hs-type">Retract</span></a></span></span><span>
</span><span id="line-129"></span><span id="composeRetract"><span class="annot"><span class="annottext">composeRetract :: forall (tcm :: * -&gt; *).
(PureTCM tcm, MonadError TCErr tcm, MonadDebug tcm,
 HasBuiltins tcm, MonadAddContext tcm) =&gt;
Retract -&gt; Term -&gt; Retract -&gt; tcm Retract
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#composeRetract"><span class="hs-identifier hs-var hs-var">composeRetract</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681494503"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494504"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494504"><span class="hs-identifier hs-var">rho0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494505"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494506"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494506"><span class="hs-identifier hs-var">leftInv0</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681494507"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494507"><span class="hs-identifier hs-var">phi0</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681494508"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494508"><span class="hs-identifier hs-var">prob1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494509"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494509"><span class="hs-identifier hs-var">rho1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494510"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494510"><span class="hs-identifier hs-var">tau1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681494511"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494511"><span class="hs-identifier hs-var">leftInv1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;=== composing&quot;</span></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&#915;0   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau0  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&#915;1   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494508"><span class="hs-identifier hs-var">prob1</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494508"><span class="hs-identifier hs-var">prob1</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau1  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494510"><span class="hs-identifier hs-var">tau1</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-comment">{-
  &#915;0 = prob0
  S0 &#8866; &#961;0 : &#915;0
  &#915;0 &#8866; &#964;0 : S0
  &#915;0 &#8866; leftInv0 : &#961;0[&#964;0] = id&#915;0
  &#915;0 &#8866; &#966;0
  &#915;0,&#966;0 &#8866; leftInv0 = refl

  &#915;1 = prob1
  S1 &#8866; &#961;1 : &#915;1
  &#915;1 &#8866; &#964;1 : S1
  &#915;1 &#8866; leftInv1 : &#961;1[&#964;1] = id&#915;1
  &#915;1 &#8866; &#966;1 = &#966;0[&#964;0] (**)
  &#915;1,&#966;1 &#8866; leftInv1 = refl
  S0 = &#915;1

  (**) implies?
  &#915;0,&#966;0 &#8866; leftInv1[&#964;0] = refl  (*)


  S1 &#8866; &#961; := &#961;0[&#961;1] : &#915;0
  &#915;0 &#8866; &#964; := &#964;1[&#964;0] : S1
  -}</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494512"><span class="annot"><span class="annottext">prob :: Telescope
</span><a href="#local-6989586621681494512"><span class="hs-identifier hs-var hs-var">prob</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494513"><span class="annot"><span class="annottext">rho :: Substitution
</span><a href="#local-6989586621681494513"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494509"><span class="hs-identifier hs-var">rho1</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494504"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494514"><span class="annot"><span class="annottext">tau :: Substitution
</span><a href="#local-6989586621681494514"><span class="hs-identifier hs-var hs-var">tau</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494510"><span class="hs-identifier hs-var">tau1</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494514"><span class="hs-identifier hs-var">tau</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-comment">{-
  &#915;0 &#8866; leftInv : &#961;[&#964;] = id&#915;0
  &#915;0 &#8866; leftInv : &#961;0[&#961;1[&#964;1]][&#964;0] = id&#915;0
  &#915;0 &#8866; step0 := &#961;0[leftInv1[&#964;0]] : &#961;0[&#961;1[&#964;1]][&#964;0] = &#961;0[&#964;0]

  &#915;0,&#966;0 &#8866; step0 = refl     by (*)


  &#915;0 &#8866; leftInv := step0 &#183; leftInv0 : &#961;0[&#961;1[&#964;1]][&#964;0] = id&#915;0

  &#915;0 &#8866; leftInv := tr (\ i &#8594; &#961;0[&#961;1[&#964;1]][&#964;0] = leftInv0[i]) &#966;0 step0
  &#915;0,&#966;0 &#8866; leftInv = refl  -- because it will become step0, which is refl when &#966;0

  &#915;0, i : I &#8866; hcomp {&#915;0} (\ j &#8594; \ { (i = 0) -&gt; &#961;0[&#961;1[&#964;1]][&#964;0]
                                  ; (i = 1) -&gt; leftInv0[j]
                                  ; (&#966;0 = 1) -&gt; &#947;0
                                  })
                         (step0[i])




  -}</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681494515"><span class="annot"><span class="annottext">step0 :: Substitution
</span><a href="#local-6989586621681494515"><span class="hs-identifier hs-var hs-var">step0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution -&gt; Substitution
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494511"><span class="hs-identifier hs-var">leftInv1</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494504"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv0  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494506"><span class="hs-identifier hs-var">leftInv0</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494508"><span class="hs-identifier hs-var">prob1</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;rho0  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494504"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau0  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;rhos0[tau0]  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494505"><span class="hs-identifier hs-var">tau0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494504"><span class="hs-identifier hs-var">rho0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494508"><span class="hs-identifier hs-var">prob1</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv1  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494511"><span class="hs-identifier hs-var">leftInv1</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;step0  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494515"><span class="hs-identifier hs-var">step0</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>  </span><span id="local-6989586621681494517"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681494517"><span class="hs-identifier hs-var">interval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Type
</span><a href="Agda.TypeChecking.Primitive.Cubical.Base.html#primIntervalType"><span class="hs-identifier hs-var">primIntervalType</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621681494519"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494519"><span class="hs-identifier hs-var">max</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Term
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#primIMax"><span class="hs-identifier hs-var">primIMax</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span id="local-6989586621681494521"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494521"><span class="hs-identifier hs-var">neg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Term
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#primINeg"><span class="hs-identifier hs-var">primINeg</span></a></span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681494523"><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494523"><span class="hs-identifier hs-var">leftInv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Abs (Either (Closure (Abs Type)) [Term])
 -&gt; Either (Closure (Abs Type)) (Abs [Term]))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Either (Closure (Abs Type)) (Abs [Term]))
forall a b. (a -&gt; b) -&gt; tcm a -&gt; tcm b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Abs (Either (Closure (Abs Type)) [Term])
-&gt; Either (Closure (Abs Type)) (Abs [Term])
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
forall (f :: * -&gt; *) a. Applicative f =&gt; Abs (f a) -&gt; f (Abs a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">(tcm (Abs (Either (Closure (Abs Type)) [Term]))
 -&gt; tcm (Either (Closure (Abs Type)) (Abs [Term])))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Either (Closure (Abs Type)) (Abs [Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm (Abs (Either (Closure (Abs Type)) [Term]))
 -&gt; tcm (Abs (Either (Closure (Abs Type)) [Term])))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Names
-&gt; NamesT tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall (m :: * -&gt; *) a. Names -&gt; NamesT m a -&gt; m a
</span><a href="Agda.TypeChecking.Names.html#runNamesT"><span class="hs-identifier hs-var">runNamesT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Names
</span><a href="Agda.TypeChecking.Telescope.html#teleNames"><span class="hs-identifier hs-var">teleNames</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT tcm (Abs (Either (Closure (Abs Type)) [Term]))
 -&gt; tcm (Abs (Either (Closure (Abs Type)) [Term])))
-&gt; NamesT tcm (Abs (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>             </span><span id="local-6989586621681494527"><span class="annot"><span class="annottext">NamesT tcm Term
</span><a href="#local-6989586621681494527"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT tcm (NamesT tcm Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494507"><span class="hs-identifier hs-var">phi0</span></a></span><span>
</span><span id="line-205"></span><span>             </span><span id="local-6989586621681494529"><span class="annot"><span class="annottext">NamesT tcm Telescope
</span><a href="#local-6989586621681494529"><span class="hs-identifier hs-var">g0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NamesT tcm (NamesT tcm Telescope)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; NamesT tcm (NamesT tcm Telescope))
-&gt; Telescope -&gt; NamesT tcm (NamesT tcm Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span>
</span><span id="line-206"></span><span>             </span><span id="local-6989586621681494531"><span class="annot"><span class="annottext">NamesT tcm (Abs [Arg Term])
</span><a href="#local-6989586621681494531"><span class="hs-identifier hs-var">step0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; NamesT tcm (NamesT tcm (Abs [Arg Term]))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; NamesT tcm (NamesT tcm (Abs [Arg Term])))
-&gt; Abs [Arg Term] -&gt; NamesT tcm (NamesT tcm (Abs [Arg Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [Arg Term] -&gt; Abs [Arg Term]
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Abs [Arg Term]) -&gt; [Arg Term] -&gt; Abs [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution
Substitution' (SubstArg [Arg Term])
</span><a href="#local-6989586621681494515"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [Arg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleArgs"><span class="hs-identifier hs-var">teleArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span>
</span><span id="line-207"></span><span>             </span><span id="local-6989586621681494534"><span class="annot"><span class="annottext">NamesT tcm (Abs [Term])
</span><a href="#local-6989586621681494534"><span class="hs-identifier hs-var">leftInv0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs [Term] -&gt; NamesT tcm (NamesT tcm (Abs [Term]))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Term] -&gt; NamesT tcm (NamesT tcm (Abs [Term])))
-&gt; Abs [Term] -&gt; NamesT tcm (NamesT tcm (Abs [Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [Term] -&gt; Abs [Term]
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Abs [Term]) -&gt; [Term] -&gt; Abs [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Term]) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution
Substitution' (SubstArg [Arg Term])
</span><a href="#local-6989586621681494506"><span class="hs-identifier hs-var">leftInv0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [Arg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleArgs"><span class="hs-identifier hs-var">teleArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span>
</span><span id="line-208"></span><span>             </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
    -&gt; NamesT tcm (Either (Closure (Abs Type)) [Term]))
-&gt; NamesT tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
  -&gt; NamesT tcm (Either (Closure (Abs Type)) [Term]))
 -&gt; NamesT tcm (Abs (Either (Closure (Abs Type)) [Term])))
-&gt; ((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
    -&gt; NamesT tcm (Either (Closure (Abs Type)) [Term]))
-&gt; NamesT tcm (Abs (Either (Closure (Abs Type)) [Term]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681494537"><span class="annot"><span class="annottext">forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b
</span><a href="#local-6989586621681494537"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(String, Dom Type)
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681494517"><span class="hs-identifier hs-var">interval</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT tcm (Either (Closure (Abs Type)) [Term])
 -&gt; NamesT tcm (Either (Closure (Abs Type)) [Term]))
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-209"></span><span>              </span><span id="local-6989586621681494539"><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681494539"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
    -&gt; NamesT tcm Telescope)
-&gt; NamesT tcm (Abs Telescope)
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
  -&gt; NamesT tcm Telescope)
 -&gt; NamesT tcm (Abs Telescope))
-&gt; ((forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b)
    -&gt; NamesT tcm Telescope)
-&gt; NamesT tcm (Abs Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681494540"><span class="annot"><span class="annottext">NamesT tcm Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Names.html#NamesT"><span class="hs-identifier hs-type">NamesT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681494540"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT tcm Telescope
</span><a href="#local-6989586621681494529"><span class="hs-identifier hs-var">g0</span></a></span><span>
</span><span id="line-210"></span><span>              </span><span id="local-6989586621681494541"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681494541"><span class="hs-identifier hs-var">step0i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; Term -&gt; [Arg Term]
Abs [Arg Term] -&gt; SubstArg [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; Term -&gt; [Arg Term])
-&gt; NamesT tcm (Abs [Arg Term]) -&gt; NamesT tcm (Term -&gt; [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT tcm (Abs [Arg Term])
</span><a href="#local-6989586621681494531"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT tcm (Term -&gt; [Arg Term])
-&gt; NamesT tcm Term -&gt; NamesT tcm [Arg Term]
forall a b. NamesT tcm (a -&gt; b) -&gt; NamesT tcm a -&gt; NamesT tcm b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term
forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b
</span><a href="#local-6989586621681494537"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-211"></span><span>              </span><span id="local-6989586621681494543"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494543"><span class="hs-identifier hs-var">face</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT tcm Term
forall a. a -&gt; NamesT tcm a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494519"><span class="hs-identifier hs-var">max</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term -&gt; NamesT tcm Term -&gt; NamesT tcm Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT tcm Term
forall a. a -&gt; NamesT tcm a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494521"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term -&gt; NamesT tcm Term -&gt; NamesT tcm Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term
forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b
</span><a href="#local-6989586621681494537"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term -&gt; NamesT tcm Term -&gt; NamesT tcm Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term
</span><a href="#local-6989586621681494527"><span class="hs-identifier hs-var">phi</span></a></span><span>
</span><span id="line-212"></span><span>              </span><span id="local-6989586621681494545"><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494545"><span class="hs-identifier hs-var">leftInv0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamesT tcm (Abs [Term])
</span><a href="#local-6989586621681494534"><span class="hs-identifier hs-var">leftInv0</span></a></span><span>
</span><span id="line-213"></span><span>              </span><span id="local-6989586621681494546"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494546"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamesT tcm Term
forall {b}. (Subst b, DeBruijn b) =&gt; NamesT tcm b
</span><a href="#local-6989586621681494537"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-214"></span><span>              </span><span class="hs-comment">-- this composition could be optimized further whenever step0i is actually constant in i.</span><span>
</span><span id="line-215"></span><span>              </span><span class="annot"><span class="annottext">tcm (Either (Closure (Abs Type)) [Term])
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; NamesT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(tcm (Either (Closure (Abs Type)) [Term])
 -&gt; NamesT tcm (Either (Closure (Abs Type)) [Term]))
-&gt; tcm (Either (Closure (Abs Type)) [Term])
-&gt; NamesT tcm (Either (Closure (Abs Type)) [Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Term]
-&gt; tcm (Either (Closure (Abs Type)) [Term])
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Term])
-&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term]
-&gt; ExceptT (Closure (Abs Type)) tcm [Term]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Abs Telescope
-&gt; [(Term, Abs [Term])]
-&gt; Term
-&gt; [Arg Term]
-&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term]
forall (m :: * -&gt; *).
(PureTCM m, MonadError TCErr m) =&gt;
Bool
-&gt; Abs Telescope
-&gt; [(Term, Abs [Term])]
-&gt; Term
-&gt; [Arg Term]
-&gt; ExceptT (Closure (Abs Type)) m [Arg Term]
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#transpSysTel%27"><span class="hs-identifier hs-var">transpSysTel'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681494539"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494546"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494545"><span class="hs-identifier hs-var">leftInv0</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681494543"><span class="hs-identifier hs-var">face</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681494541"><span class="hs-identifier hs-var">step0i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs [Term] -&gt; [Term]
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494523"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs [Term] -&gt; [Term]
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494523"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><span class="annottext">Telescope -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494503"><span class="hs-identifier hs-var">prob0</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type) -&gt; tcm () -&gt; tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(tcm () -&gt; tcm ()) -&gt; tcm () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInvSub  :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs [Term] -&gt; [Term]
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Term] -&gt; [Term]) -&gt; Abs [Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494523"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="annottext">Retract -&gt; tcm Retract
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681494512"><span class="hs-identifier hs-var">prob</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494513"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681494514"><span class="hs-identifier hs-var">tau</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs [Term] -&gt; [Term]
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Term] -&gt; [Term]) -&gt; Abs [Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs [Term]
</span><a href="#local-6989586621681494523"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildEquiv"><span class="hs-identifier hs-type">buildEquiv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681493556"><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyLogEntry"><span class="hs-identifier hs-type">UnifyLogEntry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyState"><span class="hs-identifier hs-type">UnifyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoLeftInv"><span class="hs-identifier hs-type">NoLeftInv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Retract"><span class="hs-identifier hs-type">Retract</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span id="buildEquiv"><span class="annot"><span class="annottext">buildEquiv :: forall (tcm :: * -&gt; *).
(PureTCM tcm, MonadError TCErr tcm) =&gt;
UnifyLogEntry
-&gt; UnifyState -&gt; tcm (Either NoLeftInv (Retract, Term))
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildEquiv"><span class="hs-identifier hs-var hs-var">buildEquiv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnificationStep"><span class="hs-identifier hs-type">UnificationStep</span></a></span><span> </span><span id="local-6989586621681495115"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621681495116"><span class="annot"><span class="annottext">step :: UnifyStep
</span><a href="#local-6989586621681495116"><span class="hs-identifier hs-var">step</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Solution"><span class="hs-identifier hs-type">Solution</span></a></span><span> </span><span id="local-6989586621681495118"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681495119"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681495119"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681495120"><span class="annot"><span class="annottext">FlexibleVar Int
</span><a href="#local-6989586621681495120"><span class="hs-identifier hs-var">fx</span></a></span></span><span> </span><span id="local-6989586621681495121"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495121"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681495122"><span class="annot"><span class="annottext">Either () ()
</span><a href="#local-6989586621681495122"><span class="hs-identifier hs-var">side</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681495123"><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495123"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681495124"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm (Retract, Term)
 -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; ExceptT NoLeftInv tcm (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-226"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-227"></span><span>          </span><span id="local-6989586621681493705"><span id="local-6989586621681493706"><span class="annot"><a href="#local-6989586621681495125"><span class="hs-identifier hs-type">errorToUnsupported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621681493705"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493706"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#NoLeftInv"><span class="hs-identifier hs-type">NoLeftInv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493556"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493706"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-228"></span><span>          </span><span id="local-6989586621681495125"><span class="annot"><span class="annottext">errorToUnsupported :: forall a b. ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
</span><a href="#local-6989586621681495125"><span class="hs-identifier hs-var hs-var">errorToUnsupported</span></a></span></span><span> </span><span id="local-6989586621681495127"><span class="annot"><span class="annottext">ExceptT a tcm b
</span><a href="#local-6989586621681495127"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; NoLeftInv) -&gt; ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
forall (m :: * -&gt; *) e e' a.
Functor m =&gt;
(e -&gt; e') -&gt; ExceptT e m a -&gt; ExceptT e' m a
</span><span class="hs-identifier hs-var">withExceptT</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnifyStep -&gt; NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedYet"><span class="hs-identifier hs-var">UnsupportedYet</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495116"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT a tcm b
</span><a href="#local-6989586621681495127"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-229"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;step unifyState:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyState -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-230"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;step step:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyStep -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyStep -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495116"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>        </span><span id="local-6989586621681495129"><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681495129"><span class="hs-identifier hs-var">unview</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm (IntervalView -&gt; Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; m (IntervalView -&gt; Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#intervalUnview%27"><span class="hs-identifier hs-var">intervalUnview'</span></a></span><span>
</span><span id="line-232"></span><span>        </span><span id="local-6989586621681495130"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495130"><span class="hs-identifier hs-var">cxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm Telescope
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;context:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495130"><span class="hs-identifier hs-var">cxt</span></a></span><span>
</span><span id="line-234"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-235"></span><span>          </span><span class="hs-comment">-- k counds in eqs from the left</span><span>
</span><span id="line-236"></span><span>          </span><span id="local-6989586621681495132"><span class="annot"><span class="annottext">m :: Int
</span><a href="#local-6989586621681495132"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Int
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varCount"><span class="hs-identifier hs-var">varCount</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-237"></span><span>          </span><span id="local-6989586621681495134"><span class="annot"><span class="annottext">gamma :: Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var hs-var">gamma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-238"></span><span>          </span><span id="local-6989586621681495135"><span class="annot"><span class="annottext">eqs :: Telescope
</span><a href="#local-6989586621681495135"><span class="hs-identifier hs-var hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-239"></span><span>          </span><span id="local-6989586621681495136"><span class="annot"><span class="annottext">u :: Arg Term
</span><a href="#local-6989586621681495136"><span class="hs-identifier hs-var hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqLHS"><span class="hs-identifier hs-var">eqLHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int -&gt; Arg Term
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-240"></span><span>          </span><span id="local-6989586621681495139"><span class="annot"><span class="annottext">v :: Arg Term
</span><a href="#local-6989586621681495139"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqRHS"><span class="hs-identifier hs-var">eqRHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int -&gt; Arg Term
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-241"></span><span>          </span><span id="local-6989586621681495141"><span class="annot"><span class="annottext">x :: Int
</span><a href="#local-6989586621681495141"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlexibleVar Int -&gt; Int
forall a. FlexibleVar a -&gt; a
</span><a href="Agda.TypeChecking.Rules.LHS.Problem.html#flexVar"><span class="hs-identifier hs-var">flexVar</span></a></span><span> </span><span class="annot"><span class="annottext">FlexibleVar Int
</span><a href="#local-6989586621681495120"><span class="hs-identifier hs-var">fx</span></a></span><span>
</span><span id="line-242"></span><span>          </span><span id="local-6989586621681495143"><span class="annot"><span class="annottext">neqs :: Int
</span><a href="#local-6989586621681495143"><span class="hs-identifier hs-var hs-var">neqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495135"><span class="hs-identifier hs-var">eqs</span></a></span><span>
</span><span id="line-243"></span><span>          </span><span id="local-6989586621681495145"><span class="annot"><span class="annottext">phis :: Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var hs-var">phis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-comment">-- neqs</span><span>
</span><span id="line-244"></span><span>        </span><span id="local-6989586621681495146"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681495146"><span class="hs-identifier hs-var">interval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Type -&gt; ExceptT NoLeftInv tcm Type
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT NoLeftInv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(tcm Type -&gt; ExceptT NoLeftInv tcm Type)
-&gt; tcm Type -&gt; ExceptT NoLeftInv tcm Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">tcm Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Type
</span><a href="Agda.TypeChecking.Primitive.Cubical.Base.html#primIntervalType"><span class="hs-identifier hs-var">primIntervalType</span></a></span><span>
</span><span id="line-245"></span><span>         </span><span class="hs-comment">-- &#915;, &#966;s : I^phis</span><span>
</span><span id="line-246"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495147"><span class="annot"><span class="annottext">gamma_phis :: Telescope
</span><a href="#local-6989586621681495147"><span class="hs-identifier hs-var hs-var">gamma_phis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope) -&gt; ListTel -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-247"></span><span>              </span><span class="annot"><span class="annottext">(Int -&gt; Dom (String, Type)) -&gt; [Int] -&gt; ListTel
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String, Type) -&gt; Dom (String, Type)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">((String, Type) -&gt; Dom (String, Type))
-&gt; (Int -&gt; (String, Type)) -&gt; Int -&gt; Dom (String, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681495146"><span class="hs-identifier hs-var">interval</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; (String, Type))
-&gt; (Int -&gt; String) -&gt; Int -&gt; (String, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;phi&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; (Int -&gt; String) -&gt; Int -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-248"></span><span>        </span><span id="local-6989586621681495150"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495147"><span class="hs-identifier hs-var">gamma_phis</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope)
-&gt; ExceptT NoLeftInv tcm Telescope
-&gt; ExceptT NoLeftInv tcm Telescope
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-249"></span><span>          </span><span class="annot"><span class="annottext">ExceptT (Closure Type) tcm Telescope
-&gt; ExceptT NoLeftInv tcm Telescope
forall a b. ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
</span><a href="#local-6989586621681495125"><span class="hs-identifier hs-var">errorToUnsupported</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
-&gt; [Arg Term] -&gt; [Arg Term] -&gt; ExceptT (Closure Type) tcm Telescope
forall (m :: * -&gt; *).
(PureTCM m, MonadError (Closure Type) m) =&gt;
Telescope -&gt; [Arg Term] -&gt; [Arg Term] -&gt; m Telescope
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#pathTelescope%27"><span class="hs-identifier hs-var">pathTelescope'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqLHS"><span class="hs-identifier hs-var">eqLHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqRHS"><span class="hs-identifier hs-var">eqRHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-251"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;working tel:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;working tel args:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [Arg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleArgs"><span class="hs-identifier hs-var">teleArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-254"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681495153"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495153"><span class="hs-identifier hs-var">tau</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495154"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495154"><span class="hs-identifier hs-var">leftInv</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495155"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495155"><span class="hs-identifier hs-var">phi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
 -&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term))
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Names
-&gt; NamesT (ExceptT NoLeftInv tcm) ([Arg Term], [Arg Term], Term)
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
forall (m :: * -&gt; *) a. Names -&gt; NamesT m a -&gt; m a
</span><a href="Agda.TypeChecking.Names.html#runNamesT"><span class="hs-identifier hs-var">runNamesT</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(NamesT (ExceptT NoLeftInv tcm) ([Arg Term], [Arg Term], Term)
 -&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term))
-&gt; NamesT (ExceptT NoLeftInv tcm) ([Arg Term], [Arg Term], Term)
-&gt; ExceptT NoLeftInv tcm ([Arg Term], [Arg Term], Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-255"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495156"><span class="annot"><span class="annottext">raiseFrom :: Telescope -&gt; Term -&gt; Term
</span><a href="#local-6989586621681495156"><span class="hs-identifier hs-var hs-var">raiseFrom</span></a></span></span><span> </span><span id="local-6989586621681495157"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495157"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681495158"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495158"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term -&gt; Term
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495157"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495158"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span>          </span><span class="hs-special">[</span><span id="local-6989586621681495159"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495159"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495160"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495160"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Arg Term
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term))
-&gt; [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) [NamesT (ExceptT NoLeftInv tcm) Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term))
-&gt; (Arg Term -&gt; Term)
-&gt; Arg Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
</span><a href="#local-6989586621681495156"><span class="hs-identifier hs-var">raiseFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; (Arg Term -&gt; Term) -&gt; Arg Term -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495136"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495139"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-258"></span><span>          </span><span class="hs-comment">-- &#966;</span><span>
</span><span id="line-259"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495162"><span class="annot"><span class="annottext">phi :: Term
</span><a href="#local-6989586621681495162"><span class="hs-identifier hs-var hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
</span><a href="#local-6989586621681495156"><span class="hs-identifier hs-var">raiseFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495147"><span class="hs-identifier hs-var">gamma_phis</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-260"></span><span>          </span><span class="hs-comment">-- working_tel &#8866; &#947;&#8321;,x,&#947;&#8322;,&#966;,eqs</span><span>
</span><span id="line-261"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495163"><span class="annot"><span class="annottext">all_args :: [Arg Term]
</span><a href="#local-6989586621681495163"><span class="hs-identifier hs-var hs-var">all_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [Arg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleArgs"><span class="hs-identifier hs-var">teleArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span>
</span><span id="line-262"></span><span>          </span><span class="hs-comment">-- &#915;&#8321;,x : A,&#915;&#8322;</span><span>
</span><span id="line-263"></span><span class="hs-comment">--          gamma &lt;- open $ raiseFrom EmptyTel gamma</span><span>
</span><span id="line-264"></span><span>          </span><span class="hs-comment">-- -- &#947;&#8321;,x,&#947;&#8322;,&#966;,eqs : W</span><span>
</span><span id="line-265"></span><span>          </span><span class="hs-comment">-- working_tel &lt;- open $ raiseFrom EmptyTel working_tel</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span>          </span><span class="hs-comment">-- eq_tel &lt;- open $ raiseFrom gamma (eqTel st)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span>          </span><span class="hs-comment">-- [lhs,rhs] &lt;- mapM (open . raiseFrom gamma) [eqLHS st,eqRHS st]</span><span>
</span><span id="line-270"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495164"><span class="annot"><span class="annottext">bindSplit :: (Telescope, a) -&gt; (Telescope, AbsN a)
</span><a href="#local-6989586621681495164"><span class="hs-identifier hs-var hs-var">bindSplit</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495165"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495165"><span class="hs-identifier hs-var">tel1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495166"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681495166"><span class="hs-identifier hs-var">tel2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495165"><span class="hs-identifier hs-var">tel1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Names -&gt; a -&gt; AbsN a
forall a. Names -&gt; a -&gt; AbsN a
</span><a href="Agda.TypeChecking.Names.html#AbsN"><span class="hs-identifier hs-var">AbsN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Names
</span><a href="Agda.TypeChecking.Telescope.html#teleNames"><span class="hs-identifier hs-var">teleNames</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495165"><span class="hs-identifier hs-var">tel1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681495166"><span class="hs-identifier hs-var">tel2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>          </span><span class="hs-comment">-- . &#8866; &#915;&#8321;  ,  &#947;&#8321;. (x : A),&#915;&#8322;,&#966; : I,[lhs &#8801; rhs]</span><span>
</span><span id="line-272"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495168"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495168"><span class="hs-identifier hs-var">gamma1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681495169"><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495169"><span class="hs-identifier hs-var">xxi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Telescope, Telescope) -&gt; (Telescope, AbsN Telescope)
forall {a}. (Telescope, a) -&gt; (Telescope, AbsN a)
</span><a href="#local-6989586621681495164"><span class="hs-identifier hs-var">bindSplit</span></a></span><span> </span><span class="annot"><span class="annottext">((Telescope, Telescope) -&gt; (Telescope, AbsN Telescope))
-&gt; (Telescope, Telescope) -&gt; (Telescope, AbsN Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; (Telescope, Telescope)
</span><a href="Agda.TypeChecking.Telescope.html#splitTelescopeAt"><span class="hs-identifier hs-var">splitTelescopeAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495141"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span>
</span><span id="line-273"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495171"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495171"><span class="hs-identifier hs-var">gamma1_args</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495172"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495172"><span class="hs-identifier hs-var">xxi_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; ([Arg Term], [Arg Term])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495168"><span class="hs-identifier hs-var">gamma1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495163"><span class="hs-identifier hs-var">all_args</span></a></span><span>
</span><span id="line-274"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621681495173"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495173"><span class="hs-identifier hs-var">_x_arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681495174"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495174"><span class="hs-identifier hs-var">xi_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495172"><span class="hs-identifier hs-var">xxi_args</span></a></span><span>
</span><span id="line-275"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621681495175"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495175"><span class="hs-identifier hs-var">x_arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681495176"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495176"><span class="hs-identifier hs-var">xi0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495177"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495177"><span class="hs-identifier hs-var">k_arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681495178"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495178"><span class="hs-identifier hs-var">xi1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; ([Arg Term], [Arg Term])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495168"><span class="hs-identifier hs-var">gamma1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495172"><span class="hs-identifier hs-var">xxi_args</span></a></span><span>
</span><span id="line-276"></span><span>              </span><span class="hs-comment">-- W &#8866; (x : A),&#915;&#8322;,&#966; : I,[lhs &#8801; rhs]</span><span>
</span><span id="line-277"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-278"></span><span>            </span><span class="annot"><a href="#local-6989586621681495179"><span class="hs-identifier hs-type">xxi_here</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>
</span><span id="line-279"></span><span>            </span><span id="local-6989586621681495179"><span class="annot"><span class="annottext">xxi_here :: Telescope
</span><a href="#local-6989586621681495179"><span class="hs-identifier hs-var hs-var">xxi_here</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AbsN Telescope -&gt; [SubstArg Telescope] -&gt; Telescope
forall a. Subst a =&gt; AbsN a -&gt; [SubstArg a] -&gt; a
</span><a href="Agda.TypeChecking.Names.html#absAppN"><span class="hs-identifier hs-var">absAppN</span></a></span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495169"><span class="hs-identifier hs-var">xxi</span></a></span><span> </span><span class="annot"><span class="annottext">([SubstArg Telescope] -&gt; Telescope)
-&gt; [SubstArg Telescope] -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495171"><span class="hs-identifier hs-var">gamma1_args</span></a></span><span>
</span><span id="line-280"></span><span>          </span><span class="hs-comment">--                                                      x:A,&#915;&#8322;                &#966;</span><span>
</span><span id="line-281"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495181"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495181"><span class="hs-identifier hs-var">xpre</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495182"><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495182"><span class="hs-identifier hs-var">krest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Telescope, Telescope) -&gt; (Telescope, AbsN Telescope)
forall {a}. (Telescope, a) -&gt; (Telescope, AbsN a)
</span><a href="#local-6989586621681495164"><span class="hs-identifier hs-var">bindSplit</span></a></span><span> </span><span class="annot"><span class="annottext">((Telescope, Telescope) -&gt; (Telescope, AbsN Telescope))
-&gt; (Telescope, Telescope) -&gt; (Telescope, AbsN Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; (Telescope, Telescope)
</span><a href="Agda.TypeChecking.Telescope.html#splitTelescopeAt"><span class="hs-identifier hs-var">splitTelescopeAt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495134"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495168"><span class="hs-identifier hs-var">gamma1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495179"><span class="hs-identifier hs-var">xxi_here</span></a></span><span>
</span><span id="line-282"></span><span>          </span><span id="local-6989586621681495183"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495183"><span class="hs-identifier hs-var">k_arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term))
-&gt; Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681495177"><span class="hs-identifier hs-var">k_arg</span></a></span><span>
</span><span id="line-283"></span><span>          </span><span id="local-6989586621681495184"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Telescope
</span><a href="#local-6989586621681495184"><span class="hs-identifier hs-var">xpre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Telescope)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495181"><span class="hs-identifier hs-var">xpre</span></a></span><span>
</span><span id="line-284"></span><span>          </span><span id="local-6989586621681495185"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
</span><a href="#local-6989586621681495185"><span class="hs-identifier hs-var">krest</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495182"><span class="hs-identifier hs-var">krest</span></a></span><span>
</span><span id="line-285"></span><span>          </span><span id="local-6989586621681495186"><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495186"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Names
-&gt; (Vars (ExceptT NoLeftInv tcm)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
Names -&gt; (Vars m -&gt; NamesT m a) -&gt; NamesT m (AbsN a)
</span><a href="Agda.TypeChecking.Names.html#bindN"><span class="hs-identifier hs-var">bindN</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;x&quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;eq&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((Vars (ExceptT NoLeftInv tcm)
  -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
 -&gt; NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope))
-&gt; (Vars (ExceptT NoLeftInv tcm)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681495188"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495188"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495189"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495189"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>                     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495190"><span class="annot"><span class="annottext">pre :: NamesT (ExceptT NoLeftInv tcm) Telescope
</span><a href="#local-6989586621681495190"><span class="hs-identifier hs-var hs-var">pre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Telescope
forall t. Apply t =&gt; t -&gt; Term -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply1"><span class="hs-identifier hs-var">apply1</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Term -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Telescope)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Telescope
</span><a href="#local-6989586621681495184"><span class="hs-identifier hs-var">xpre</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495188"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-287"></span><span>                     </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Telescope
-&gt; (Vars (ExceptT NoLeftInv tcm)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall (m :: * -&gt; *) a.
(MonadFail m, Abstract a) =&gt;
NamesT m Telescope -&gt; (Vars m -&gt; NamesT m a) -&gt; NamesT m a
</span><a href="Agda.TypeChecking.Names.html#abstractN"><span class="hs-identifier hs-var">abstractN</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Telescope
</span><a href="#local-6989586621681495190"><span class="hs-identifier hs-var">pre</span></a></span><span> </span><span class="annot"><span class="annottext">((Vars (ExceptT NoLeftInv tcm)
  -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
 -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; (Vars (ExceptT NoLeftInv tcm)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495193"><span class="annot"><span class="annottext">Vars (ExceptT NoLeftInv tcm)
</span><a href="#local-6989586621681495193"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-288"></span><span>                       </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Telescope
forall t. Apply t =&gt; t -&gt; Term -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply1"><span class="hs-identifier hs-var">apply1</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Term -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Telescope)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
-&gt; [NamesT (ExceptT NoLeftInv tcm) (SubstArg Telescope)]
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall (m :: * -&gt; *) a.
(Monad m, Subst a) =&gt;
NamesT m (AbsN a) -&gt; [NamesT m (SubstArg a)] -&gt; NamesT m a
</span><a href="Agda.TypeChecking.Names.html#applyN"><span class="hs-identifier hs-var">applyN</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
</span><a href="#local-6989586621681495185"><span class="hs-identifier hs-var">krest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495188"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[NamesT (ExceptT NoLeftInv tcm) Term]
Vars (ExceptT NoLeftInv tcm)
</span><a href="#local-6989586621681495193"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495189"><span class="hs-identifier hs-var">eq</span></a></span><span>
</span><span id="line-289"></span><span class="hs-comment">--          let delta_zero = absAppN delta $ map unArg [x_arg,k_arg]</span><span>
</span><span id="line-290"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495195"><span class="annot"><span class="annottext">d_zero_args :: [Arg Term]
</span><a href="#local-6989586621681495195"><span class="hs-identifier hs-var hs-var">d_zero_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495176"><span class="hs-identifier hs-var">xi0</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; [Arg Term] -&gt; [Arg Term]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495178"><span class="hs-identifier hs-var">xi1</span></a></span><span>
</span><span id="line-291"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ())
-&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;size delta:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; String) -&gt; Int -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AbsN Telescope -&gt; Telescope
forall a. AbsN a -&gt; a
</span><a href="Agda.TypeChecking.Names.html#unAbsN"><span class="hs-identifier hs-var">unAbsN</span></a></span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495186"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ())
-&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;size d0args:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; String) -&gt; Int -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495195"><span class="hs-identifier hs-var">d_zero_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495197"><span class="annot"><span class="annottext">appSide :: Term -&gt; Term
</span><a href="#local-6989586621681495197"><span class="hs-identifier hs-var hs-var">appSide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either () ()
</span><a href="#local-6989586621681495122"><span class="hs-identifier hs-var">side</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-294"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-295"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681495129"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="annot"><span class="annottext">(IntervalView -&gt; Term) -&gt; (Term -&gt; IntervalView) -&gt; Term -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#INeg"><span class="hs-identifier hs-var">INeg</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; IntervalView)
-&gt; (Term -&gt; Arg Term) -&gt; Term -&gt; IntervalView
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span>
</span><span id="line-296"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-297"></span><span>                  </span><span class="hs-comment">-- csingl :: NamesT tcm Term -&gt; NamesT tcm [Arg Term]</span><span>
</span><span id="line-298"></span><span>                  </span><span id="local-6989586621681495199"><span class="annot"><span class="annottext">csingl :: NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495199"><span class="hs-identifier hs-var hs-var">csingl</span></a></span></span><span> </span><span id="local-6989586621681495200"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495200"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NamesT (ExceptT NoLeftInv tcm) Term
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Arg Term))
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term -&gt; Arg Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) (Arg Term)
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamesT (ExceptT NoLeftInv tcm) Term]
 -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495202"><span class="hs-identifier hs-var">csingl'</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495200"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-299"></span><span>                  </span><span class="hs-comment">-- csingl' :: NamesT tcm Term -&gt; [NamesT tcm Term]</span><span>
</span><span id="line-300"></span><span>                  </span><span id="local-6989586621681495202"><span class="annot"><span class="annottext">csingl' :: NamesT (ExceptT NoLeftInv tcm) Term
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495202"><span class="hs-identifier hs-var hs-var">csingl'</span></a></span></span><span> </span><span id="local-6989586621681495203"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495203"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495183"><span class="hs-identifier hs-var">k_arg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; (NamesT (ExceptT NoLeftInv tcm) Term,
    NamesT (ExceptT NoLeftInv tcm) Term,
    NamesT (ExceptT NoLeftInv tcm) Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (m :: * -&gt; *).
Applicative m =&gt;
m Term -&gt; (m Term, m Term, m Term) -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%40%3E"><span class="hs-operator hs-var">&lt;@@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495159"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495160"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="#local-6989586621681495197"><span class="hs-identifier hs-var">appSide</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495203"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (NamesT (ExceptT NoLeftInv tcm) Term
    -&gt; NamesT (ExceptT NoLeftInv tcm) Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
String -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;j&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT (ExceptT NoLeftInv tcm) Term
  -&gt; NamesT (ExceptT NoLeftInv tcm) Term)
 -&gt; NamesT (ExceptT NoLeftInv tcm) Term)
-&gt; (NamesT (ExceptT NoLeftInv tcm) Term
    -&gt; NamesT (ExceptT NoLeftInv tcm) Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495206"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495206"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-302"></span><span>                                  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495207"><span class="annot"><span class="annottext">r :: Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681495207"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681495208"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495208"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681495209"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495209"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either () ()
</span><a href="#local-6989586621681495122"><span class="hs-identifier hs-var">side</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-303"></span><span>                                            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681495129"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#IMax"><span class="hs-identifier hs-var">IMax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495209"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495208"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>                                            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681495129"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#IMin"><span class="hs-identifier hs-var">IMin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495209"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term)
-&gt; (IntervalView -&gt; Term) -&gt; IntervalView -&gt; Arg Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IntervalView -&gt; Term
</span><a href="#local-6989586621681495129"><span class="hs-identifier hs-var">unview</span></a></span><span> </span><span class="annot"><span class="annottext">(IntervalView -&gt; Arg Term) -&gt; IntervalView -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; IntervalView
</span><a href="Agda.Syntax.Internal.html#INeg"><span class="hs-identifier hs-var">INeg</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; IntervalView) -&gt; Arg Term -&gt; IntervalView
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall e. e -&gt; Arg e
</span><a href="Agda.TypeChecking.Primitive.Base.html#argN"><span class="hs-identifier hs-var">argN</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495208"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>                                  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495183"><span class="hs-identifier hs-var">k_arg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; (NamesT (ExceptT NoLeftInv tcm) Term,
    NamesT (ExceptT NoLeftInv tcm) Term,
    NamesT (ExceptT NoLeftInv tcm) Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (m :: * -&gt; *).
Applicative m =&gt;
m Term -&gt; (m Term, m Term, m Term) -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%40%3E"><span class="hs-operator hs-var">&lt;@@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495159"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495160"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681495207"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term -&gt; Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495203"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495206"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>                              </span><span class="hs-special">]</span><span>
</span><span id="line-307"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495211"><span class="annot"><span class="annottext">replaceAt :: Int -&gt; a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681495211"><span class="hs-identifier hs-var hs-var">replaceAt</span></a></span></span><span> </span><span id="local-6989586621681495212"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495212"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681495213"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681495213"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681495214"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495214"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495215"><span class="hs-identifier hs-var">xs0</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681495213"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495216"><span class="hs-identifier hs-var">xs1</span></a></span><span>
</span><span id="line-308"></span><span>                </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495215"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495215"><span class="hs-identifier hs-var">xs0</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681495216"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495216"><span class="hs-identifier hs-var">xs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; ([a], [a])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495212"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495214"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-309"></span><span>              </span><span id="local-6989586621681495217"><span class="annot"><span class="annottext">dropAt :: Int -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681495217"><span class="hs-identifier hs-var hs-var">dropAt</span></a></span></span><span> </span><span id="local-6989586621681495218"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495218"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681495219"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495219"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495220"><span class="hs-identifier hs-var">xs0</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495221"><span class="hs-identifier hs-var">xs1</span></a></span><span>
</span><span id="line-310"></span><span>                </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681495220"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495220"><span class="hs-identifier hs-var">xs0</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681495221"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495221"><span class="hs-identifier hs-var">xs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; ([a], [a])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495218"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681495219"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-311"></span><span>          </span><span id="local-6989586621681495222"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
</span><a href="#local-6989586621681495222"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">AbsN Telescope
</span><a href="#local-6989586621681495186"><span class="hs-identifier hs-var">delta</span></a></span><span>
</span><span id="line-312"></span><span>          </span><span id="local-6989586621681495223"><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495223"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495224"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495224"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
-&gt; [NamesT (ExceptT NoLeftInv tcm) (SubstArg Telescope)]
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall (m :: * -&gt; *) a.
(Monad m, Subst a) =&gt;
NamesT m (AbsN a) -&gt; [NamesT m (SubstArg a)] -&gt; NamesT m a
</span><a href="Agda.TypeChecking.Names.html#applyN"><span class="hs-identifier hs-var">applyN</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
</span><a href="#local-6989586621681495222"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495202"><span class="hs-identifier hs-var">csingl'</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495224"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span>          </span><span class="hs-comment">-- Andrea 06/06/2018</span><span>
</span><span id="line-315"></span><span>          </span><span class="hs-comment">-- We do not actually add a transp/fill if the family is</span><span>
</span><span id="line-316"></span><span>          </span><span class="hs-comment">-- constant (TODO: postpone for metas) This is so variables</span><span>
</span><span id="line-317"></span><span>          </span><span class="hs-comment">-- whose types do not depend on &quot;x&quot; are left alone, in</span><span>
</span><span id="line-318"></span><span>          </span><span class="hs-comment">-- particular those the solution &quot;t&quot; depends on.</span><span>
</span><span id="line-319"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span>          </span><span class="hs-comment">-- We might want to instead use the info discovered by the</span><span>
</span><span id="line-321"></span><span>          </span><span class="hs-comment">-- solver when checking if &quot;t&quot; depends on &quot;x&quot; to decide what</span><span>
</span><span id="line-322"></span><span>          </span><span class="hs-comment">-- to transp and what not to.</span><span>
</span><span id="line-323"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495225"><span class="annot"><span class="annottext">flag :: Bool
</span><a href="#local-6989586621681495225"><span class="hs-identifier hs-var hs-var">flag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-324"></span><span>                 </span><span class="hs-comment">{-   &#966; -}</span><span>
</span><span id="line-325"></span><span>          </span><span id="local-6989586621681495226"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495226"><span class="hs-identifier hs-var">tau</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-comment">{-dropAt (size gamma - 1 + k) .-}</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495171"><span class="hs-identifier hs-var">gamma1_args</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; [Arg Term] -&gt; [Arg Term]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-326"></span><span>                                                   </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; NamesT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
-&gt; ExceptT NoLeftInv tcm [Arg Term]
forall a b. ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
</span><a href="#local-6989586621681495125"><span class="hs-identifier hs-var">errorToUnsupported</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term]
forall (m :: * -&gt; *).
(PureTCM m, MonadError TCErr m) =&gt;
Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; ExceptT (Closure (Abs Type)) m [Arg Term]
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#transpTel%27"><span class="hs-identifier hs-var">transpTel'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681495225"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495223"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495162"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495195"><span class="hs-identifier hs-var">d_zero_args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ())
-&gt; TCMT IO Doc -&gt; NamesT (ExceptT NoLeftInv tcm) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau    :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495226"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>          </span><span id="local-6989586621681495230"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495230"><span class="hs-identifier hs-var">leftInv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-329"></span><span>            </span><span id="local-6989586621681495231"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495231"><span class="hs-identifier hs-var">gamma1_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) [Arg Term])
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495171"><span class="hs-identifier hs-var">gamma1_args</span></a></span><span>
</span><span id="line-330"></span><span>            </span><span id="local-6989586621681495232"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495232"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495162"><span class="hs-identifier hs-var">phi</span></a></span><span>
</span><span id="line-331"></span><span>            </span><span class="hs-comment">-- xxi_here &lt;- open xxi_here</span><span>
</span><span id="line-332"></span><span>            </span><span class="hs-comment">-- (xi_here_f :: Abs Telescope) &lt;- bind &quot;i&quot; $ \ i -&gt; apply &lt;$&gt; xxi_here &lt;*&gt; (take 1 `fmap` csingl i)</span><span>
</span><span id="line-333"></span><span>            </span><span class="hs-comment">-- xi_here_f &lt;- open xi_here_f</span><span>
</span><span id="line-334"></span><span>            </span><span class="hs-comment">-- xi_args &lt;- open xi_args</span><span>
</span><span id="line-335"></span><span>            </span><span class="hs-comment">-- xif &lt;- bind &quot;i&quot; $ \ i -&gt; do</span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-comment">--                      m &lt;- (runExceptT &lt;$&gt; (trFillTel' flag &lt;$&gt; xi_here_f &lt;*&gt; phi &lt;*&gt; xi_args &lt;*&gt; i))</span><span>
</span><span id="line-337"></span><span>            </span><span class="hs-comment">--                      either __IMPOSSIBLE__ id &lt;$&gt; lift m</span><span>
</span><span id="line-338"></span><span>            </span><span class="hs-comment">-- xif &lt;- open xif</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span>            </span><span id="local-6989586621681495233"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495233"><span class="hs-identifier hs-var">xi0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) [Arg Term])
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495176"><span class="hs-identifier hs-var">xi0</span></a></span><span>
</span><span id="line-341"></span><span>            </span><span id="local-6989586621681495234"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495234"><span class="hs-identifier hs-var">xi1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) [Arg Term])
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495178"><span class="hs-identifier hs-var">xi1</span></a></span><span>
</span><span id="line-342"></span><span>            </span><span id="local-6989586621681495235"><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495235"><span class="hs-identifier hs-var">delta0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495236"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495236"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term] -&gt; Telescope
forall t. Apply t =&gt; t -&gt; [Arg Term] -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; [Arg Term] -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
-&gt; NamesT (ExceptT NoLeftInv tcm) ([Arg Term] -&gt; Telescope)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Telescope
</span><a href="#local-6989586621681495184"><span class="hs-identifier hs-var">xpre</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) ([Arg Term] -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495199"><span class="hs-identifier hs-var">csingl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495236"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>            </span><span id="local-6989586621681495239"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
</span><a href="#local-6989586621681495239"><span class="hs-identifier hs-var">delta0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Telescope
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (Abs Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495235"><span class="hs-identifier hs-var">delta0</span></a></span><span>
</span><span id="line-344"></span><span>            </span><span id="local-6989586621681495240"><span class="annot"><span class="annottext">Abs [Arg Term]
</span><a href="#local-6989586621681495240"><span class="hs-identifier hs-var">xi0f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term]))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495241"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495241"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-345"></span><span>                                 </span><span id="local-6989586621681495242"><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
</span><a href="#local-6989586621681495242"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; Term
-&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term]
forall (m :: * -&gt; *).
(PureTCM m, MonadError TCErr m) =&gt;
Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; Term
-&gt; ExceptT (Closure (Abs Type)) m [Arg Term]
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#trFillTel%27"><span class="hs-identifier hs-var">trFillTel'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681495225"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope
 -&gt; Term
 -&gt; [Arg Term]
 -&gt; Term
 -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (Term
      -&gt; [Arg Term]
      -&gt; Term
      -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
</span><a href="#local-6989586621681495239"><span class="hs-identifier hs-var">delta0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  (Term
   -&gt; [Arg Term]
   -&gt; Term
   -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     ([Arg Term] -&gt; Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495232"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  ([Arg Term] -&gt; Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495233"><span class="hs-identifier hs-var">xi0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  (Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495241"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-346"></span><span>                                 </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; NamesT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
-&gt; ExceptT NoLeftInv tcm [Arg Term]
forall a b. ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
</span><a href="#local-6989586621681495125"><span class="hs-identifier hs-var">errorToUnsupported</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
</span><a href="#local-6989586621681495242"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>            </span><span id="local-6989586621681495244"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
</span><a href="#local-6989586621681495244"><span class="hs-identifier hs-var">xi0f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term]))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term]
</span><a href="#local-6989586621681495240"><span class="hs-identifier hs-var">xi0f</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>            </span><span id="local-6989586621681495245"><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495245"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495246"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495246"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>                   </span><span id="local-6989586621681495247"><span class="annot"><span class="annottext">[NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495247"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Arg Term
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term))
-&gt; [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) [NamesT (ExceptT NoLeftInv tcm) Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term))
-&gt; (Arg Term -&gt; Term)
-&gt; Arg Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm) (NamesT (ExceptT NoLeftInv tcm) Term)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Arg Term]
 -&gt; NamesT
      (ExceptT NoLeftInv tcm) [NamesT (ExceptT NoLeftInv tcm) Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm) [NamesT (ExceptT NoLeftInv tcm) Term]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; Term -&gt; [Arg Term]
Abs [Arg Term] -&gt; SubstArg [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
</span><a href="#local-6989586621681495244"><span class="hs-identifier hs-var">xi0f</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495246"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>                   </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term] -&gt; Telescope
forall t. Apply t =&gt; t -&gt; [Arg Term] -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; [Arg Term] -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
-&gt; NamesT (ExceptT NoLeftInv tcm) ([Arg Term] -&gt; Telescope)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
-&gt; [NamesT (ExceptT NoLeftInv tcm) (SubstArg Telescope)]
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall (m :: * -&gt; *) a.
(Monad m, Subst a) =&gt;
NamesT m (AbsN a) -&gt; [NamesT m (SubstArg a)] -&gt; NamesT m a
</span><a href="Agda.TypeChecking.Names.html#applyN"><span class="hs-identifier hs-var">applyN</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (AbsN Telescope)
</span><a href="#local-6989586621681495185"><span class="hs-identifier hs-var">krest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495202"><span class="hs-identifier hs-var">csingl'</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495246"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
-&gt; [NamesT (ExceptT NoLeftInv tcm) Term]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamesT (ExceptT NoLeftInv tcm) Term]
</span><a href="#local-6989586621681495247"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) ([Arg Term] -&gt; Telescope)
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) Telescope
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495199"><span class="hs-identifier hs-var">csingl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495246"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>            </span><span id="local-6989586621681495250"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
</span><a href="#local-6989586621681495250"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Telescope
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (Abs Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621681495245"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-354"></span><span>            </span><span id="local-6989586621681495251"><span class="annot"><span class="annottext">Abs [Arg Term]
</span><a href="#local-6989586621681495251"><span class="hs-identifier hs-var">xi1f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term]))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495252"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495252"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>                                 </span><span id="local-6989586621681495253"><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
</span><a href="#local-6989586621681495253"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; Term
-&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term]
forall (m :: * -&gt; *).
(PureTCM m, MonadError TCErr m) =&gt;
Bool
-&gt; Abs Telescope
-&gt; Term
-&gt; [Arg Term]
-&gt; Term
-&gt; ExceptT (Closure (Abs Type)) m [Arg Term]
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#trFillTel%27"><span class="hs-identifier hs-var">trFillTel'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681495225"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope
 -&gt; Term
 -&gt; [Arg Term]
 -&gt; Term
 -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (Term
      -&gt; [Arg Term]
      -&gt; Term
      -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs Telescope)
</span><a href="#local-6989586621681495250"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  (Term
   -&gt; [Arg Term]
   -&gt; Term
   -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     ([Arg Term] -&gt; Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495232"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  ([Arg Term] -&gt; Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495234"><span class="hs-identifier hs-var">xi1</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT
  (ExceptT NoLeftInv tcm)
  (Term -&gt; ExceptT (Closure (Abs Type)) tcm [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (ExceptT (Closure (Abs Type)) tcm [Arg Term])
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495252"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-356"></span><span>                                 </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; NamesT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
-&gt; ExceptT NoLeftInv tcm [Arg Term]
forall a b. ExceptT a tcm b -&gt; ExceptT NoLeftInv tcm b
</span><a href="#local-6989586621681495125"><span class="hs-identifier hs-var">errorToUnsupported</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) tcm [Arg Term]
</span><a href="#local-6989586621681495253"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>            </span><span id="local-6989586621681495254"><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
</span><a href="#local-6989586621681495254"><span class="hs-identifier hs-var">xi1f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term]
-&gt; NamesT
     (ExceptT NoLeftInv tcm)
     (NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term]))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term]
</span><a href="#local-6989586621681495251"><span class="hs-identifier hs-var">xi1f</span></a></span><span>
</span><span id="line-358"></span><span>            </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
 -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall (m :: * -&gt; *) a.
MonadFail m =&gt;
String
-&gt; ((forall b. (Subst b, DeBruijn b) =&gt; NamesT m b) -&gt; NamesT m a)
-&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(((forall {b}.
   (Subst b, DeBruijn b) =&gt;
   NamesT (ExceptT NoLeftInv tcm) b)
  -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
 -&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term]))
-&gt; ((forall {b}.
     (Subst b, DeBruijn b) =&gt;
     NamesT (ExceptT NoLeftInv tcm) b)
    -&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681495255"><span class="annot"><span class="annottext">forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495255"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-359"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495264"><span class="annot"><span class="annottext">+++ :: m [a] -&gt; m [a] -&gt; m [a]
</span><a href="#local-6989586621681495264"><span class="hs-operator hs-var hs-var">(+++)</span></a></span></span><span> </span><span id="local-6989586621681495265"><span class="annot"><span class="annottext">m [a]
</span><a href="#local-6989586621681495265"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a] -&gt; [a]) -&gt; m [a] -&gt; m [a] -&gt; m [a]
forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="annot"><span class="annottext">m [a]
</span><a href="#local-6989586621681495265"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-360"></span><span>                  </span><span id="local-6989586621681495267"><span class="annot"><span class="annottext">i :: NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495267"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT NoLeftInv tcm Term -&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; NamesT m a
</span><a href="Agda.TypeChecking.Names.html#cl"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">tcm Term -&gt; ExceptT NoLeftInv tcm Term
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT NoLeftInv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">tcm Term
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#primINeg"><span class="hs-identifier hs-var">primINeg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
forall {b}.
(Subst b, DeBruijn b) =&gt;
NamesT (ExceptT NoLeftInv tcm) b
</span><a href="#local-6989586621681495255"><span class="hs-identifier hs-var">i'</span></a></span><span>
</span><span id="line-361"></span><span class="hs-comment">--              replaceAt (size gamma + k) &lt;$&gt; (fmap defaultArg $ cl primIMax &lt;@&gt; phi &lt;@&gt; i) &lt;*&gt; do</span><span>
</span><span id="line-362"></span><span>              </span><span class="hs-keyword">do</span><span>
</span><span id="line-363"></span><span>                </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495231"><span class="hs-identifier hs-var">gamma1_args</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall {m :: * -&gt; *} {a}. Monad m =&gt; m [a] -&gt; m [a] -&gt; m [a]
</span><a href="#local-6989586621681495264"><span class="hs-operator hs-var">+++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495199"><span class="hs-identifier hs-var">csingl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495267"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall {m :: * -&gt; *} {a}. Monad m =&gt; m [a] -&gt; m [a] -&gt; m [a]
</span><a href="#local-6989586621681495264"><span class="hs-operator hs-var">+++</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; Term -&gt; [Arg Term]
Abs [Arg Term] -&gt; SubstArg [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
</span><a href="#local-6989586621681495244"><span class="hs-identifier hs-var">xi0f</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495267"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall {m :: * -&gt; *} {a}. Monad m =&gt; m [a] -&gt; m [a] -&gt; m [a]
</span><a href="#local-6989586621681495264"><span class="hs-operator hs-var">+++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
(a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">`fmap`</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
</span><a href="#local-6989586621681495199"><span class="hs-identifier hs-var">csingl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495267"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall {m :: * -&gt; *} {a}. Monad m =&gt; m [a] -&gt; m [a] -&gt; m [a]
</span><a href="#local-6989586621681495264"><span class="hs-operator hs-var">+++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs [Arg Term] -&gt; Term -&gt; [Arg Term]
Abs [Arg Term] -&gt; SubstArg [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs [Arg Term] -&gt; Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Abs [Arg Term])
</span><a href="#local-6989586621681495254"><span class="hs-identifier hs-var">xi1f</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) (Term -&gt; [Arg Term])
-&gt; NamesT (ExceptT NoLeftInv tcm) Term
-&gt; NamesT (ExceptT NoLeftInv tcm) [Arg Term]
forall a b.
NamesT (ExceptT NoLeftInv tcm) (a -&gt; b)
-&gt; NamesT (ExceptT NoLeftInv tcm) a
-&gt; NamesT (ExceptT NoLeftInv tcm) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT (ExceptT NoLeftInv tcm) Term
</span><a href="#local-6989586621681495267"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>          </span><span class="annot"><span class="annottext">([Arg Term], [Arg Term], Term)
-&gt; NamesT (ExceptT NoLeftInv tcm) ([Arg Term], [Arg Term], Term)
forall a. a -&gt; NamesT (ExceptT NoLeftInv tcm) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495226"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495230"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495162"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>        </span><span id="local-6989586621681495269"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495269"><span class="hs-identifier hs-var">iz</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Term -&gt; ExceptT NoLeftInv tcm Term
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT NoLeftInv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(tcm Term -&gt; ExceptT NoLeftInv tcm Term)
-&gt; tcm Term -&gt; ExceptT NoLeftInv tcm Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">tcm Term
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#primIZero"><span class="hs-identifier hs-var">primIZero</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span id="local-6989586621681495271"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495271"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Term -&gt; ExceptT NoLeftInv tcm Term
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT NoLeftInv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(tcm Term -&gt; ExceptT NoLeftInv tcm Term)
-&gt; tcm Term -&gt; ExceptT NoLeftInv tcm Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">tcm Term
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#primIOne"><span class="hs-identifier hs-var">primIOne</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau    :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495153"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tauS   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495153"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type)
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681495146"><span class="hs-identifier hs-var">interval</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>                               </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv:   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495154"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv[0]:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; TCMT IO Doc) -&gt; TCMT IO [Arg Term] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO [Arg Term]
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SubstArg [Arg Term] -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term
SubstArg [Arg Term]
</span><a href="#local-6989586621681495269"><span class="hs-identifier hs-var">iz</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495154"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;leftInv[1]:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Arg Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; TCMT IO Doc) -&gt; TCMT IO [Arg Term] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; TCMT IO [Arg Term]
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SubstArg [Arg Term] -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term
SubstArg [Arg Term]
</span><a href="#local-6989586621681495271"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495154"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;[rho]tau :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-374"></span><span>                                                                                  </span><span class="hs-comment">-- k   &#966;</span><span>
</span><span id="line-375"></span><span>          </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' (SubstArg Substitution)
-&gt; Substitution -&gt; Substitution
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible
-&gt; [SubstArg Substitution] -&gt; Substitution' (SubstArg Substitution)
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([SubstArg Substitution] -&gt; Substitution' (SubstArg Substitution))
-&gt; [SubstArg Substitution] -&gt; Substitution' (SubstArg Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495153"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Substitution -&gt; Substitution) -&gt; Substitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution
</span><a href="Agda.TypeChecking.Substitute.html#fromPatternSubstitution"><span class="hs-identifier hs-var">fromPatternSubstitution</span></a></span><span>
</span><span id="line-376"></span><span>                                                                      </span><span class="annot"><span class="annottext">(PatternSubstitution -&gt; Substitution)
-&gt; PatternSubstitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PatternSubstitution -&gt; PatternSubstitution
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-comment">{-k-}</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495145"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="hs-comment">{-neqs{-&#966;s-} - 1{-&#966;0-}-}</span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>                                                                      </span><span class="annot"><span class="annottext">(PatternSubstitution -&gt; PatternSubstitution)
-&gt; PatternSubstitution -&gt; PatternSubstitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyOutput -&gt; PatternSubstitution
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#unifySubst"><span class="hs-identifier hs-var">unifySubst</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495123"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-379"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495277"><span class="annot"><span class="annottext">rho0 :: Substitution
</span><a href="#local-6989586621681495277"><span class="hs-identifier hs-var hs-var">rho0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution
</span><a href="Agda.TypeChecking.Substitute.html#fromPatternSubstitution"><span class="hs-identifier hs-var">fromPatternSubstitution</span></a></span><span> </span><span class="annot"><span class="annottext">(PatternSubstitution -&gt; Substitution)
-&gt; PatternSubstitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyOutput -&gt; PatternSubstitution
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#unifySubst"><span class="hs-identifier hs-var">unifySubst</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495123"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-380"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-381"></span><span>          </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;prf :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution
</span><a href="Agda.TypeChecking.Substitute.html#fromPatternSubstitution"><span class="hs-identifier hs-var">fromPatternSubstitution</span></a></span><span> </span><span class="annot"><span class="annottext">(PatternSubstitution -&gt; Substitution)
-&gt; PatternSubstitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyOutput -&gt; PatternSubstitution
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#unifyProof"><span class="hs-identifier hs-var">unifyProof</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495123"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495279"><span class="annot"><span class="annottext">c0 :: Term
</span><a href="#local-6989586621681495279"><span class="hs-identifier hs-var hs-var">c0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="Agda.Syntax.Common.html#defaultArgInfo"><span class="hs-identifier hs-var">defaultArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term) -&gt; Abs Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Term -&gt; Abs Term
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Abs Term) -&gt; Term -&gt; Abs Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term -&gt; Term
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Int -&gt; Term
forall a. EndoSubst a =&gt; Substitution' a -&gt; Int -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution
</span><a href="Agda.TypeChecking.Substitute.html#fromPatternSubstitution"><span class="hs-identifier hs-var">fromPatternSubstitution</span></a></span><span> </span><span class="annot"><span class="annottext">(PatternSubstitution -&gt; Substitution)
-&gt; PatternSubstitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyOutput -&gt; PatternSubstitution
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#unifyProof"><span class="hs-identifier hs-var">unifyProof</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495123"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495143"><span class="hs-identifier hs-var">neqs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495282"><span class="annot"><span class="annottext">c :: Term
</span><a href="#local-6989586621681495282"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution -&gt; Substitution
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Substitution
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495279"><span class="hs-identifier hs-var">c0</span></a></span><span>
</span><span id="line-384"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type)
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#966;&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-385"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;c :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495282"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-386"></span><span class="hs-comment">--        let rho = liftS (neqs - k - 1) $ consS (raise (1 + k) c) $ liftS (1 + k) rho0</span><span>
</span><span id="line-387"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495283"><span class="annot"><span class="annottext">rho :: Substitution
</span><a href="#local-6989586621681495283"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term -&gt; Substitution
forall a. DeBruijn a =&gt; Int -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var">singletonS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495143"><span class="hs-identifier hs-var">neqs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495118"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495282"><span class="hs-identifier hs-var">c</span></a></span><span>  </span><span class="annot"><span class="annottext">Substitution -&gt; Substitution -&gt; Substitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution -&gt; Substitution
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495143"><span class="hs-identifier hs-var">neqs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495277"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-388"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;old_sizes: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495115"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;new_sizes: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Int) -&gt; Telescope -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span class="hs-comment">--        addContext (abstract (varTel next) $ ExtendTel __DUMMY_DOM__ (Abs &quot;&#966;&quot; $ raise 1 $ eqTel next)) $</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Dom Type)
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
(String, Dom Type) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#966;&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dom Type
HasCallStack =&gt; Dom Type
</span><a href="Agda.Syntax.Internal.html#__DUMMY_DOM__"><span class="hs-identifier hs-var">__DUMMY_DOM__</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495124"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ())
-&gt; ExceptT NoLeftInv tcm () -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-392"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ())
-&gt; TCMT IO Doc -&gt; ExceptT NoLeftInv tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;rho   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495283"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">(Retract, Term) -&gt; ExceptT NoLeftInv tcm (Retract, Term)
forall a. a -&gt; ExceptT NoLeftInv tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Retract, Term) -&gt; ExceptT NoLeftInv tcm (Retract, Term))
-&gt; (Retract, Term) -&gt; ExceptT NoLeftInv tcm (Retract, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495150"><span class="hs-identifier hs-var">working_tel</span></a></span><span>
</span><span id="line-394"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495283"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-395"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495153"><span class="hs-identifier hs-var">tau</span></a></span><span>
</span><span id="line-396"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; [Term] -&gt; Substitution
forall a. DeBruijn a =&gt; Impossible -&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#termsS"><span class="hs-identifier hs-var">termsS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; [Term] -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; [Arg Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495154"><span class="hs-identifier hs-var">leftInv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495155"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildEquiv"><span class="hs-identifier hs-var">buildEquiv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnificationStep"><span class="hs-identifier hs-type">UnificationStep</span></a></span><span> </span><span id="local-6989586621681495285"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621681495286"><span class="annot"><span class="annottext">step :: UnifyStep
</span><a href="#local-6989586621681495286"><span class="hs-identifier hs-var">step</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#EtaExpandVar"><span class="hs-identifier hs-type">EtaExpandVar</span></a></span><span> </span><span id="local-6989586621681495288"><span class="annot"><span class="annottext">FlexibleVar Int
</span><a href="#local-6989586621681495288"><span class="hs-identifier hs-var">fv</span></a></span></span><span> </span><span id="local-6989586621681495289"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681495289"><span class="hs-identifier hs-var">_d</span></a></span></span><span> </span><span id="local-6989586621681495290"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681495290"><span class="hs-identifier hs-var">_args</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681495291"><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495291"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681495292"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495292"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Retract, Term) -&gt; Either NoLeftInv (Retract, Term))
-&gt; tcm (Retract, Term) -&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b. (a -&gt; b) -&gt; tcm a -&gt; tcm b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Retract, Term) -&gt; Either NoLeftInv (Retract, Term)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(tcm (Retract, Term) -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; tcm (Retract, Term) -&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;buildEquiv EtaExpandVar&quot;</span></span><span>
</span><span id="line-400"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-401"></span><span>          </span><span id="local-6989586621681495293"><span class="annot"><span class="annottext">gamma :: Telescope
</span><a href="#local-6989586621681495293"><span class="hs-identifier hs-var hs-var">gamma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#varTel"><span class="hs-identifier hs-var">varTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-402"></span><span>          </span><span id="local-6989586621681495294"><span class="annot"><span class="annottext">eqs :: Telescope
</span><a href="#local-6989586621681495294"><span class="hs-identifier hs-var hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-403"></span><span>          </span><span id="local-6989586621681495295"><span class="annot"><span class="annottext">x :: Int
</span><a href="#local-6989586621681495295"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlexibleVar Int -&gt; Int
forall a. FlexibleVar a -&gt; a
</span><a href="Agda.TypeChecking.Rules.LHS.Problem.html#flexVar"><span class="hs-identifier hs-var">flexVar</span></a></span><span> </span><span class="annot"><span class="annottext">FlexibleVar Int
</span><a href="#local-6989586621681495288"><span class="hs-identifier hs-var">fv</span></a></span><span>
</span><span id="line-404"></span><span>          </span><span id="local-6989586621681495296"><span class="annot"><span class="annottext">neqs :: Int
</span><a href="#local-6989586621681495296"><span class="hs-identifier hs-var hs-var">neqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495294"><span class="hs-identifier hs-var">eqs</span></a></span><span>
</span><span id="line-405"></span><span>          </span><span id="local-6989586621681495298"><span class="annot"><span class="annottext">phis :: Int
</span><a href="#local-6989586621681495298"><span class="hs-identifier hs-var hs-var">phis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-406"></span><span>        </span><span id="local-6989586621681495299"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681495299"><span class="hs-identifier hs-var">interval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">tcm Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Type
</span><a href="Agda.TypeChecking.Primitive.Cubical.Base.html#primIntervalType"><span class="hs-identifier hs-var">primIntervalType</span></a></span><span>
</span><span id="line-407"></span><span>         </span><span class="hs-comment">-- &#915;, &#966;s : I^phis</span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495300"><span class="annot"><span class="annottext">gamma_phis :: Telescope
</span><a href="#local-6989586621681495300"><span class="hs-identifier hs-var hs-var">gamma_phis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495293"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope) -&gt; ListTel -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-409"></span><span>              </span><span class="annot"><span class="annottext">(Int -&gt; Dom (String, Type)) -&gt; [Int] -&gt; ListTel
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String, Type) -&gt; Dom (String, Type)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">((String, Type) -&gt; Dom (String, Type))
-&gt; (Int -&gt; (String, Type)) -&gt; Int -&gt; Dom (String, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681495299"><span class="hs-identifier hs-var">interval</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; (String, Type))
-&gt; (Int -&gt; String) -&gt; Int -&gt; (String, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;phi&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; (Int -&gt; String) -&gt; Int -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495298"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-410"></span><span>        </span><span id="local-6989586621681495301"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495301"><span class="hs-identifier hs-var">working_tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495300"><span class="hs-identifier hs-var">gamma_phis</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; tcm Telescope -&gt; tcm Telescope
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-411"></span><span>          </span><span class="annot"><span class="annottext">Telescope -&gt; [Arg Term] -&gt; [Arg Term] -&gt; tcm Telescope
forall (m :: * -&gt; *).
(PureTCM m, MonadError TCErr m) =&gt;
Telescope -&gt; [Arg Term] -&gt; [Arg Term] -&gt; m Telescope
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#pathTelescope"><span class="hs-identifier hs-var">pathTelescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495298"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; Telescope
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqTel"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495298"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqLHS"><span class="hs-identifier hs-var">eqLHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495298"><span class="hs-identifier hs-var">phis</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; [Arg Term]) -&gt; [Arg Term] -&gt; [Arg Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyState -&gt; [Arg Term]
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#eqRHS"><span class="hs-identifier hs-var">eqRHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495285"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495303"><span class="annot"><span class="annottext">raiseFrom :: Telescope -&gt; Int -&gt; Int
</span><a href="#local-6989586621681495303"><span class="hs-identifier hs-var hs-var">raiseFrom</span></a></span></span><span> </span><span id="local-6989586621681495304"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495304"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681495305"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495305"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495301"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495304"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495305"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495306"><span class="annot"><span class="annottext">phi :: Term
</span><a href="#local-6989586621681495306"><span class="hs-identifier hs-var hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Term) -&gt; Int -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int -&gt; Int
</span><a href="#local-6989586621681495303"><span class="hs-identifier hs-var">raiseFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495300"><span class="hs-identifier hs-var">gamma_phis</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>        </span><span class="annot"><span class="annottext">tcm (Maybe (Telescope, Substitution, Substitution, Telescope))
-&gt; tcm (Retract, Term)
-&gt; ((Telescope, Substitution, Substitution, Telescope)
    -&gt; tcm (Retract, Term))
-&gt; tcm (Retract, Term)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; Telescope
-&gt; tcm (Maybe (Telescope, Substitution, Substitution, Telescope))
forall (m :: * -&gt; *).
PureTCM m =&gt;
Int
-&gt; Telescope
-&gt; m (Maybe (Telescope, Substitution, Substitution, Telescope))
</span><a href="Agda.TypeChecking.Records.html#expandRecordVar"><span class="hs-identifier hs-var">expandRecordVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int -&gt; Int
</span><a href="#local-6989586621681495303"><span class="hs-identifier hs-var">raiseFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495293"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681495295"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495301"><span class="hs-identifier hs-var">working_tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">tcm (Retract, Term)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(((Telescope, Substitution, Substitution, Telescope)
  -&gt; tcm (Retract, Term))
 -&gt; tcm (Retract, Term))
-&gt; ((Telescope, Substitution, Substitution, Telescope)
    -&gt; tcm (Retract, Term))
-&gt; tcm (Retract, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681495309"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495309"><span class="hs-identifier hs-var">tau</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681495310"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495310"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-416"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495301"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tau    :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Substitution -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495309"><span class="hs-identifier hs-var">tau</span></a></span><span>
</span><span id="line-417"></span><span>          </span><span class="annot"><span class="annottext">(Retract, Term) -&gt; tcm (Retract, Term)
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Retract, Term) -&gt; tcm (Retract, Term))
-&gt; (Retract, Term) -&gt; tcm (Retract, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681495301"><span class="hs-identifier hs-var">working_tel</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495310"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681495309"><span class="hs-identifier hs-var">tau</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int -&gt; Substitution
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681495306"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#buildEquiv"><span class="hs-identifier hs-var">buildEquiv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnificationStep"><span class="hs-identifier hs-type">UnificationStep</span></a></span><span> </span><span id="local-6989586621681495311"><span class="annot"><span class="annottext">UnifyState
</span><a href="#local-6989586621681495311"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621681495312"><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495312"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621681495313"><span class="annot"><span class="annottext">UnifyOutput
</span><a href="#local-6989586621681495313"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnifyState
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-420"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; TCMT IO Doc -&gt; tcm ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.lhs.unify.inv&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; tcm ()) -&gt; TCMT IO Doc -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;steps&quot;</span></span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681495314"><span class="annot"><span class="annottext">illegal :: tcm (Either NoLeftInv (Retract, Term))
</span><a href="#local-6989586621681495314"><span class="hs-identifier hs-var hs-var">illegal</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either NoLeftInv (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either NoLeftInv (Retract, Term)
 -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; Either NoLeftInv (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv -&gt; Either NoLeftInv (Retract, Term)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(NoLeftInv -&gt; Either NoLeftInv (Retract, Term))
-&gt; NoLeftInv -&gt; Either NoLeftInv (Retract, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyStep -&gt; NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#Illegal"><span class="hs-identifier hs-var">Illegal</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495312"><span class="hs-identifier hs-var">step</span></a></span><span>
</span><span id="line-422"></span><span>      </span><span id="local-6989586621681495315"><span class="annot"><span class="annottext">unsupported :: tcm (Either NoLeftInv (Retract, Term))
</span><a href="#local-6989586621681495315"><span class="hs-identifier hs-var hs-var">unsupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either NoLeftInv (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either NoLeftInv (Retract, Term)
 -&gt; tcm (Either NoLeftInv (Retract, Term)))
-&gt; Either NoLeftInv (Retract, Term)
-&gt; tcm (Either NoLeftInv (Retract, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv -&gt; Either NoLeftInv (Retract, Term)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(NoLeftInv -&gt; Either NoLeftInv (Retract, Term))
-&gt; NoLeftInv -&gt; Either NoLeftInv (Retract, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnifyStep -&gt; NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#UnsupportedYet"><span class="hs-identifier hs-var">UnsupportedYet</span></a></span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495312"><span class="hs-identifier hs-var">step</span></a></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnifyStep
</span><a href="#local-6989586621681495312"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Deletion"><span class="hs-identifier hs-type">Deletion</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
</span><a href="#local-6989586621681495314"><span class="hs-identifier hs-var">illegal</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#TypeConInjectivity"><span class="hs-identifier hs-type">TypeConInjectivity</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
</span><a href="#local-6989586621681495314"><span class="hs-identifier hs-var">illegal</span></a></span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-comment">-- These should end up in a NoUnify</span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Conflict"><span class="hs-identifier hs-type">Conflict</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-428"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#LitConflict"><span class="hs-identifier hs-type">LitConflict</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-429"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-430"></span><span>    </span><span class="annot"><span class="annottext">UnifyStep
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tcm (Either NoLeftInv (Retract, Term))
</span><a href="#local-6989586621681495315"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-pragma hs-type">explainStep</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyStep"><span class="hs-pragma hs-type">UnifyStep</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-pragma hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#Doc"><span class="hs-pragma hs-type">Doc</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-433"></span><span id="local-6989586621681493480"><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-type">explainStep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#MonadPretty"><span class="hs-identifier hs-type">MonadPretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681493480"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#UnifyStep"><span class="hs-identifier hs-type">UnifyStep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681493480"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span></span><span>
</span><span id="line-434"></span><span id="explainStep"><span class="annot"><span class="annottext">explainStep :: forall (m :: * -&gt; *). MonadPretty m =&gt; UnifyStep -&gt; m Doc
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var hs-var">explainStep</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Injectivity"><span class="hs-identifier hs-type">Injectivity</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">injectConstructor :: UnifyStep -&gt; ConHead
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#injectConstructor"><span class="hs-identifier hs-var">injectConstructor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681495344"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681495344"><span class="hs-identifier hs-var">ch</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;injectivity of the data constructor&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681495344"><span class="hs-identifier hs-var">ch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#TypeConInjectivity"><span class="hs-identifier hs-type">TypeConInjectivity</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;injectivity of type constructors&quot;</span></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Deletion"><span class="hs-identifier hs-type">Deletion</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;the K rule&quot;</span></span><span>
</span><span id="line-438"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Solution"><span class="hs-identifier hs-type">Solution</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;substitution in Set&#969;&quot;</span></span><span>
</span><span id="line-439"></span><span class="hs-comment">-- Note: this is the actual reason that a Solution step can fail, rather</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- than the explanation for the actual step</span><span>
</span><span id="line-441"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Conflict"><span class="hs-identifier hs-type">Conflict</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;the disjointness of data constructors&quot;</span></span><span>
</span><span id="line-442"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#LitConflict"><span class="hs-identifier hs-type">LitConflict</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;the disjointness of literal values&quot;</span></span><span>
</span><span id="line-443"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;the impossibility of cyclic values&quot;</span></span><span>
</span><span id="line-444"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#EtaExpandVar"><span class="hs-identifier hs-type">EtaExpandVar</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;eta-expansion of variables&quot;</span></span><span>
</span><span id="line-445"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#EtaExpandEquation"><span class="hs-identifier hs-type">EtaExpandEquation</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;eta-expansion of equations&quot;</span></span><span>
</span><span id="line-446"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#StripSizeSuc"><span class="hs-identifier hs-type">StripSizeSuc</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;the injectivity of size successors&quot;</span></span><span>
</span><span id="line-447"></span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#explainStep"><span class="hs-identifier hs-var">explainStep</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.Types.html#SkipIrrelevantEquation"><span class="hs-identifier hs-type">SkipIrrelevantEquation</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;ignoring irrelevant equations&quot;</span></span><span>
</span><span id="line-448"></span></pre></body></html>